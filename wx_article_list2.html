<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    
    <meta name="format-detection" content="telephone=no">
    <meta name="format-detection" content="email=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>mutuus - being imaginative, being different</title>

    <meta name="keywords" content="">
    <meta name="description" content="">

    <link href="https://res.wx.qq.com/open/libs/weui/1.1.0/weui.min.css" rel="stylesheet">
    <link href="https://res.wx.qq.com/mmbizwap/zh_CN/htmledition/style/page/profile/index.css" rel="stylesheet">

    <script src="js/jquery.1.11.0.min.js"></script>

</head>

<body>
<form class="page__form">

<div class="profile_info appmsg">
    <span class="radius_avatar profile_avatar">
        <img src="images/bg/logo-icon.jpg">
    </span>
    <strong class="profile_nickname">mutuus</strong>
        <p class="profile_desc">
            什么是好的教育？这个问题很难回答。孩子们会多背几首古诗、会多读几个英文单词？或者掌握一些熟练的绘画技巧，会一些乐器？这些成就虽然能令人羡慕，但其实并不能说明什么。
        </p>
    <div class="profile_opr">
        <a href="javascript:void(0);" class="weui-btn weui-btn_plain-primary" >进入公众号</a>
    </div>
</div>


<div class="weui_category_title js_tag">所有消息</div>

<div class="weui_msg_card_list" id="js_msg_card">
    
        <div class="weui_msg_card">
            <div class="weui_msg_card_bd">
                <div class="weui_media_box appmsg">

                    <span class="weui_media_hd" style="background-image:url(http://mmbiz.qpic.cn/mmbiz/EqMW83Qo2SAFic01D4u3Za4CWVDqvtOohgS9TxO0nnuKdicuGtibqLlYtYnI8NAkRfHLV0SZs137ISHykJF0wCrPA/0)" dLink="http://mp.weixin.qq.com/s?__biz=MzA3NzYxODMwNA==&amp;mid=220441671&amp;idx=1&amp;sn=88c63047facce2698d1696c57a67c5db&amp;scene=27#wechat_redirect"></span>
                    
                    <div class="weui_media_bd">
                        <h4 class="weui_media_title" dLink="http://mp.weixin.qq.com/s?__biz=MzA3NzYxODMwNA==&amp;mid=220441671&amp;idx=1&amp;sn=88c63047facce2698d1696c57a67c5db&amp;scene=27#wechat_redirect">
                        
                        对中国公益事业的一点点儿小感想  
                        </h4>
                        <p class="weui_media_desc">首先，作为“第四个中国困境儿童关注日”传播团队的核心成员，非常感谢浙大传媒学院公益研究中心给予的这一次宝贵经</p>
                        <p class="weui_media_extra_info">2014年12月16日</p>
                    </div>
                </div>

            </div>
        </div>

        <div class="weui_msg_card">
            <div class="weui_msg_card_bd">
                <div class="weui_media_box appmsg">
                    
                    <span class="weui_media_hd" style="background-image:url(http://mmbiz.qpic.cn/mmbiz/EqMW83Qo2SAFic01D4u3Za4CWVDqvtOoh3eJ22SibyXWPc9NEH3niaPC5ib1fKzvUHGvBDHs9QjvbVVDPr8ic7iaibo0g/0)"></span>
                    
                    <div class="weui_media_bd">
                        <h4 class="weui_media_title" dLink="http://mp.weixin.qq.com/s?__biz=MzA3NzYxODMwNA==&amp;mid=220441671&amp;idx=2&amp;sn=57e3cc914a75f57bf46feccf8c8c08ec&amp;scene=27#wechat_redirect">
                        
                        牛逼！游戏设计师告诉你什么是困境儿童的五维世界！能看懂的都是天才～
                        </h4>
                        <p class="weui_media_desc">（这是之前为了配合“困境儿童关注日”制作的一组内容，但是概念太复杂了，而且错过了《星际穿越》的时间节点，就没</p>
                        <p class="weui_media_extra_info">2014年12月16日</p>
                    </div>
                </div>
                

            </div>
        </div>


        <div class="weui_msg_card">
            <div class="weui_msg_card_bd">
                <div class="weui_media_box appmsg">
                    
                    <span class="weui_media_hd" style="background-image:url(http://mmbiz.qpic.cn/mmbiz/EqMW83Qo2SAibvqLRY6RsPeP5N9yz0StF4icnptFTicogcXxjW2aWju7jgoNTLicJ0O2b6M77Wmw5V8C0tlorwP25w/0)" dLink="http://mp.weixin.qq.com/s?__biz=MzA3NzYxODMwNA==&amp;mid=210839691&amp;idx=1&amp;sn=29eed61fe15c4cf23a1365354cdcd323&amp;scene=27#wechat_redirect"></span>
                    
                    <div class="weui_media_bd">
                        <h4 class="weui_media_title" dLink="http://mp.weixin.qq.com/s?__biz=MzA3NzYxODMwNA==&amp;mid=210839691&amp;idx=1&amp;sn=29eed61fe15c4cf23a1365354cdcd323&amp;scene=27#wechat_redirect">
                        
                        “屌丝才看性价比” —— 评王自如对Apple Watch的看法  
                        </h4>
                        <p class="weui_media_desc">国内互联网圈子里有句话：得屌丝者得天下，这句话，在特定的一些案例里，确实是正确的，但是，绝对不是真理。苹果前</p>
                        <p class="weui_media_extra_info">2014年9月11日</p>
                    </div>
                </div>
                

                

            </div>
        </div>



</div>

<div class="loadmore js-load-more" style="" id="js_loading">
    <div class="tips_wrp"><i class="icon_loading"></i><span class="tips">正在加载</span></div>
</div>

<div class="loadmore with_line" id="js_nomore">
    <div class="tips_wrp">
        <span class="tips">已无更多</span>
    </div>
</div>


<div class="floatbtn">
    <span id="back-to-top"><i class="fa fa-arrow-up"></i></span>
</div>

</form>
</body>

<script src="http://apps.bdimg.com/libs/zepto/1.1.4/zepto.min.js"></script>
<script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
function onBridgeReady() {
  WeixinJSBridge.invoke('hideOptionMenu');
}
if (typeof WeixinJSBridge == "undefined") {
  document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);
} else if (document.attachEvent) {
  document.attachEvent('WeixinJSBridgeReady', onBridgeReady); 
  document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);
} else {
  onBridgeReady();
}

$(function(){

    /*初始化*/
    var counter = 0; /*计数器*/
    var pageStart = 0; /*offset*/
    var pageSize = 4; /*size*/
    
    /*首次加载*/
    getData(pageStart, pageSize);
    
    /*监听加载更多*/
    $(document).on('click', '.js-load-more', function(){
        counter ++;
        pageStart = counter * pageSize;
        
        getData(pageStart, pageSize);
    });
    
    
    function getData(offset,size){
        $.ajax({
            type: 'GET',
            url: 'http://me.52fhy.com/demo/loadmore/json/blog.json' + '?' + offset + '/' + size, //这里offset,size无作用，仅方便调试 + '?' + offset + '/' + size
            dataType: 'json',
            success: function(reponse){

                var data = reponse.list;
                var sum = reponse.list.length;

                var result = '';
                
                /************业务逻辑块：实现拼接html内容并append到页面*****************/
                
                console.log(offset , size, sum);
                
                /*如果剩下的记录数不够分页，就让分页数取剩下的记录数
                * 例如分页数是5，只剩2条，则只取2条
                *
                * 实际MySQL查询时不写这个不会有问题
                */
                if(sum - offset < size ){
                    size = sum - offset;
                }
                

                /*使用for循环模拟SQL里的limit(offset,size)*/
                for(var i=offset; i< (offset+size); i++){
                    result +='<div class="weui_msg_card"><div class="weui_msg_card_bd"><div class="weui_media_box appmsg"><span class="weui_media_hd" style="background-image:url('+ data[i].img+')" dLink="' + data[i].url + '"></span><div class="weui_media_bd"><h4 class="weui_media_title" dLink="'+ data[i].url +'">'+ data[i].title + '</h4><p class="weui_media_desc">'+ data[i].cont + '</p><p class="weui_media_extra_info">'+ data[i].time + '</p></div></div></div></div>';
                }

                $('#js_msg_card').append(result);
                
                /*******************************************/
    
                /*隐藏more*/
                if ( (offset + size) >= sum){
                    $(".js-load-more").hide();
                }else{
                    $(".js-load-more").show();
                }
            },
            error: function(xhr, type){
                alert('Ajax error!');
            }
        });
    }
});
</script>
</html>
