var MemoryStats=function(){var c=100,h=0,t=document.createElement("div");t.id="stats",t.style.cssText="width:80px;opacity:0.9;cursor:pointer";var e=document.createElement("div");e.id="ms",e.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;",t.appendChild(e);var d=document.createElement("div");d.id="msText",d.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="Memory",e.appendChild(d);var u=document.createElement("div");for(u.id="msGraph",u.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",e.appendChild(u);u.children.length<74;){var i=document.createElement("span");i.style.cssText="width:1px;height:30px;float:left;background-color:#131",u.appendChild(i)}window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var p=Date.now(),f=performance.memory.usedJSHeapSize;return{domElement:t,update:function(){if(!(Date.now()-p<1e3/30)){p=Date.now();var t=performance.memory.usedJSHeapSize-f;f=performance.memory.usedJSHeapSize;var e=t<0?"#830":"#131",i=performance.memory.usedJSHeapSize;c=Math.min(c,i),h=Math.max(h,i),d.textContent="Mem: "+function(t,e){if(0==t)return"n/a";e=void 0!==e?e:0;var i=Math.pow(10,e),n=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t*i/Math.pow(1024,n))/i+" "+["Bytes","KB","MB","GB","TB"][n]}(i,2);var n,r,o,s,a=i/31457280,l=Math.min(30,30-30*a);r=l,o=e,(s=(n=u).appendChild(n.firstChild)).style.height=r+"px",o&&(s.style.backgroundColor=o)}}}},HM=HM||{};HM.Version="1.0.1";var HM=HM||{};HM.extend=function(t,e){var i=t.apply(t,e);return i._super=i._super||{},i.override=function(t,e){void 0!==this[t]&&(this._super[t]=this[t]),this[t]=e},i},function(){var t=this;t.disableSelection=function(t){void 0!==t.style.MozUserSelect&&(t.style.MozUserSelect="-moz-none"),t.onselectstart=function(){return!1},t.onmousedown=function(){return!1}},t.getHtml=function(t,e){return t.querySelector('div[data-name="'+e+'"]').innerHTML},t.getChildren=function(t,e){return t.querySelector('div[data-name="'+e+'"]').children},t.getData=function(t,e){return t.querySelector('div[data-name="'+e+'"]')},t.copyCSS=function(t,e){t.style.cssText=document.defaultView.getComputedStyle(e,"").cssText},window.Selector=t}();var HM=HM||{};!function(r){var t={};function o(t){var e=t.currentTarget;!0===t.lengthComputable&&null!==e._onUpdate&&e._onUpdate(t.loaded/t.total)}function s(t){var e=t.currentTarget;4==e.readyState&&200==e.status&&(e.removeEventListener(Event.PROGRESS,o,!0),e.removeEventListener(Event.READY_STATE_CHANGE,s,!1),e._onComplete&&e._onComplete(e.responseText),e=null)}t.load=function(t,e,i){var n;i=i||"GET",e=e||{};(n=r.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))._onComplete=e.onComplete||null,n._onUpdate=e.onUpdate||null,n.addEventListener(Event.PROGRESS,o,!0),n.addEventListener(Event.READY_STATE_CHANGE,s,!1),e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),e.withCredentials&&(n.withCredentials=!0),n.open(i,t,!0),n.send(null)},r.HM.Ajax=t}(window);var BrowserDetect={};function Event(){}function MouseEvent(){}function KeyboardEvent(){}function TouchEvent(){}function MutationEvent(){}function MessageEvent(){}function MediaEvent(){}function MouseAndTouchEvent(){}function Trace(t,e){if(Trace.isEnabled){var i=t;trace._consoleAvailable,null!=e&&(i=function(e){var i="";try{i="Function"==typeof e?e.name.toString()+"();":e.toString()}catch(t){try{i=e.toString()}catch(t){i="null"}}return i}(e)+" => "+i),Trace.displayOnScreen?(Trace._onScreenDiv||(Trace._onScreenDiv=document.createElement("div"),Trace._onScreenDiv.style.position="absolute",Trace._onScreenDiv.style.width="200px",Trace._onScreenDiv.style.height="300px",Trace._onScreenDiv.style.overflowY="scroll",Trace._onScreenDiv.style.color="#00ff00",Trace._onScreenDiv.style.padding="10px",Trace._onScreenDiv.style.zIndex=2e7,Trace._onScreenDiv.style.left="20px",Trace._onScreenDiv.style.top="20px",Trace._onScreenDiv.style.fontFamily="Courier New",Trace._onScreenDiv.style.fontSize="10px",Trace._onScreenDiv.style.backgroundColor="#000000",Trace._fieldLines=[]),Trace._fieldLines.push(i),Trace._fieldLines.length>Trace.onScreenMaxLines&&Trace._fieldLines.shift(),Trace._onScreenDiv.innerHTML=Trace._fieldLines.join("<br />"),document.body.appendChild(Trace._onScreenDiv)):!0===trace._consoleAvailable&&console.log(i),Trace._traceArray.push(i)}else Trace._traceArray.push(i)}BrowserDetect.init=function(){BrowserDetect.MOBILE=BrowserDetect.checkMobile(),BrowserDetect.TABLET=BrowserDetect.checkTablet(),BrowserDetect.MOBILE||BrowserDetect.TABLET||(BrowserDetect.DESKTOP=!0),BrowserDetect.MOBILE?BrowserDetect.DEVICE="mobile":BrowserDetect.TABLET?BrowserDetect.DEVICE="tablet":BrowserDetect.DESKTOP&&(BrowserDetect.DEVICE="desktop"),BrowserDetect.BROWSER_NAME=this.searchString(this.dataBrowser)||"An unknown browser",BrowserDetect.BROWSER_VERSION=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",BrowserDetect.OS=this.searchString(this.dataOS)||"an unknown OS",window.chrome&&(window.chrome.webstore||(BrowserDetect.BROWSER_NAME="Opera")),"Firefox"==BrowserDetect.BROWSER_NAME?BrowserDetect.FIREFOX=!0:"Chrome"==BrowserDetect.BROWSER_NAME?BrowserDetect.CHROME=!0:"Safari"==BrowserDetect.BROWSER_NAME?BrowserDetect.SAFARI=!0:"Explorer"==BrowserDetect.BROWSER_NAME?BrowserDetect.IE=!0:"Opera"==BrowserDetect.BROWSER_NAME&&(BrowserDetect.OPERA=!0),BrowserDetect.IE&&BrowserDetect.BROWSER_VERSION<=8&&(BrowserDetect.IE8=!0),BrowserDetect.IE&&9==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE9=!0),BrowserDetect.IE&&10==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE10=!0),"Mozilla"==BrowserDetect.BROWSER_NAME&&11==BrowserDetect.BROWSER_VERSION&&(BrowserDetect.IE11=!0),BrowserDetect.FIREFOX&&10<=BrowserDetect.BROWSER_VERSION&&(BrowserDetect.TRANSLATE3D_SUPPORT=!0)},BrowserDetect.searchString=function(t){for(var e=0;e<t.length;e++){var i=t[e].string,n=t[e].prop;if(BrowserDetect.BROWSER_VERSIONSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(n)return t[e].identity}},BrowserDetect.searchVersion=function(t){var e=t.indexOf(BrowserDetect.BROWSER_VERSIONSearchString);if(-1!=e)return parseFloat(t.substring(e+BrowserDetect.BROWSER_VERSIONSearchString.length+1))},BrowserDetect.getOlderSafariVersion=function(t){return t<100?1:t<125.2?1.1:t<312.1?1.2:t<412?1.3:t<523.1?2:t<=523.12?3:void 0},BrowserDetect.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],BrowserDetect.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.userAgent,subString:"Windows CE",identity:"Windows CE"},{string:navigator.userAgent,subString:"Palm",identity:"Palm"},{string:navigator.userAgent,subString:"Blackberry",identity:"Blackberry"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],BrowserDetect.checkMobile=function(){var t=/iphone|ipod|kindle|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase());return 1==t&&(BrowserDetect.TABLET=!1),!0===t},BrowserDetect.checkTablet=function(){var t=/ipad|sch-i800|playbook|xoom|tablet|gt-p1000|gt-p7510|sgh-t849|nexus 7|nexus 10|shw-m180s|a100|dell streak|silk/i.test(navigator.userAgent.toLowerCase());if(!0===/android/i.test(navigator.userAgent.toLowerCase())||!0===t){var e=screen.height,i=screen.width;i<e&&(i=screen.height,e=screen.width),t=736<=e&&1024<=i||!(BrowserDetect.MOBILE=!0)}return 1==t&&(BrowserDetect.MOBILE=!1),!0===t},BrowserDetect.has3d=function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in document.body.insertBefore(e,null),i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));return document.body.removeChild(e),void 0!==t&&0<t.length&&"none"!==t},BrowserDetect.BROWSER_NAME=null,BrowserDetect.BROWSER_VERSION=null,BrowserDetect.OS=null,BrowserDetect.DEVICE="",BrowserDetect.MOBILE=!1,BrowserDetect.TABLET=!1,BrowserDetect.DESKTOP=!1,BrowserDetect.CHROME=!1,BrowserDetect.SAFARI=!1,BrowserDetect.FIREFOX=!1,BrowserDetect.OPERA=!1,BrowserDetect.IE=!1,BrowserDetect.IE8=!1,BrowserDetect.IE9=!1,BrowserDetect.TRANSLATE3D_SUPPORT=BrowserDetect.has3d(),BrowserDetect.init(),Event.RESIZE="resize",Event.ORIENTATIONCHANGE="orientationchange",Event.LOAD="load",Event.SCROLL="scroll",Event.SELECT="select",Event.SUBMIT="submit",Event.HASHCHANGE="hashchange",Event.BLUR="blur",Event.PROGRESS="progress",Event.CHANGE="change",Event.ABORT="abort",Event.UNLOAD="unload",Event.BEFOREUNLOAD="beforeunload",Event.LOAD="load",Event.PROGRESS="progress",Event.ERROR="error",Event.CONTEXTMENU="contextmenu",Event.COPY="copy",Event.PASTE="paste",Event.READY_STATE_CHANGE="readystatechange",Event.RESET="reset",MouseEvent.CLICK="click",MouseEvent.MOUSE_DOWN="mousedown",MouseEvent.MOUSE_MOVE="mousemove",MouseEvent.MOUSE_UP="mouseup",MouseEvent.RIGHT_CLICK="rightclick",MouseEvent.MOUSE_OVER="mouseover",MouseEvent.MOUSE_OUT="mouseout",MouseEvent.DOUBLE_CLICK="dblclick",MouseEvent.FOCUS="focus",MouseEvent.MOUSE_ENTER="mouseenter",MouseEvent.MOUSE_LEAVE="mouseleave",MouseEvent.ROLL_OVER="mouseenter",MouseEvent.ROLL_OUT="mouseleave",MouseEvent.DRAG_END="dragend",MouseEvent.DRAG_ENTER="dragenter",MouseEvent.DRAG_LEAVE="dragleave",MouseEvent.DRAG_OVER="dragover",MouseEvent.DRAG_START="dragstart",MouseEvent.DROP="drop",MouseEvent.MOUSE_WHEEL="mousewheel","Firefox"==BrowserDetect.BROWSER_NAME&&(MouseEvent.MOUSE_WHEEL="DOMMouseScroll"),KeyboardEvent.KEY_DOWN="keydown",KeyboardEvent.KEY_UP="keyup",KeyboardEvent.KEY_PRESS="keypress",TouchEvent.TOUCH_START="touchstart",TouchEvent.TOUCH_MOVE="touchmove",TouchEvent.TOUCH_END="touchend",TouchEvent.TOUCH_CANCEL="touchcancel",1==BrowserDetect.TABLET||1==BrowserDetect.MOBILE?(MouseAndTouchEvent.MOUSE_DOWN=TouchEvent.TOUCH_START,MouseAndTouchEvent.MOUSE_MOVE=TouchEvent.TOUCH_MOVE,MouseAndTouchEvent.MOUSE_UP=TouchEvent.TOUCH_END,MouseAndTouchEvent.RESIZE=Event.ORIENTATIONCHANGE):(MouseAndTouchEvent.MOUSE_DOWN=MouseEvent.MOUSE_DOWN,MouseAndTouchEvent.MOUSE_MOVE=MouseEvent.MOUSE_MOVE,MouseAndTouchEvent.MOUSE_UP=MouseEvent.MOUSE_UP,MouseAndTouchEvent.RESIZE=Event.RESIZE),MessageEvent.MESSAGE="message",MediaEvent.ABORT="abort",MediaEvent.CANPLAY="canplay",MediaEvent.CAN_PLAY_THROUGH="canplaythrough",MediaEvent.DURATION_CHANGE="durationchange",MediaEvent.EMPTIED="emptied",MediaEvent.ENDED="ended",MediaEvent.ERROR="error",MediaEvent.LOADED_DATA="loadeddata",MediaEvent.LOADED_METADATA="loadedmetadata",MediaEvent.LOAD_START="loadstart",MediaEvent.PAUSE="pause",MediaEvent.PLAY="play",MediaEvent.PLAYING="playing",MediaEvent.PROGRESS="progress",MediaEvent.RATE_CHANGE="ratechange",MediaEvent.SEEKED="seeked",MediaEvent.SEEKING="seeking",MediaEvent.SUSPEND="suspend",MediaEvent.TIME_UPDATE="timeupdate",MediaEvent.VOLUME_CHANGE="volumechange",MediaEvent.WAITING="waiting",Trace.checkConsole=function(){var t=!1;return"undefined"!=typeof console&&(t=!0),t};var trace=Trace;Trace.isEnabled=!0,Trace.displayOnScreen=!1,Trace.onScreenMaxLines=50,Trace._onScreenDiv=null,Trace._fieldLines=null,Trace._traceArray=[],Trace._consoleAvailable=Trace.checkConsole();var GoogleAnalytics={trackPage:function(t){null!==t?ga("send","pageview",t):ga("send","pageview")},trackEvent:function(t,e,i,n,r){null===r&&(r="0"),ga("send","event",t,e,label,n,{nonInteraction:r})},trackSocialEvent:function(t,e,i){ga("send","social",t,e,i)}},HM=HM||{};!function(e){var d,h,i,u,p=document.createElement("a"),n=[],r=0,o=!1;p.IOS_READY="HM.Audio.IOS_READY",p.init=function(t){if(!o){try{if(!0===t)throw new Error("forcing HTML5 audio");e.AudioContext=e.AudioContext||e.webkitAudioContext,p.fallback=!1,(u=new AudioContext).createGain=u.createGain||u.createGainNode,(i=u.createGain()).connect(u.destination),(h=u.createGain()).connect(i),(d=u.createGain()).connect(i)}catch(t){0,u={createMediaElementSource:function(t){return t}},p.fallback=!0}o=!0}},p.createAudioObject=function(t,e,i,n,r){var o,s,a={},l=i;if(e&&!0!==i&&(a.loop=!0,a.loopStart=n,a.loopEnd=r,l=!1),p.fallback)(s=HM.AssetLoader.get(t)).setAttribute("loop",!0),(o={}).path=t,o.params=a,o.buffer=s,o.getVolume=function(){return this.buffer.volume},o.setVolume=function(t){this.buffer.volume=t},Object.defineProperty(o,"volume",{get:o.getVolume,set:o.setVolume});else{s=HM.AssetLoader.get(t);var c=u.createBufferSource();(o=new HM.AudioObject(t,c,s,u,d,h,a)).volume=1}return o.multiShot=l||!1,o},p.play=function(t,e,i,n){var r,o=void 0!==i?i:0,s=!1;if(p.fallback){(c=t.buffer)||((c=HM.AssetLoader.get(t)).pause(),c.currentTime=0),c.volume=e||1,c.play()}else{var a;t.path;if(s="AudioObject"==(r=t,-1<Object.prototype.toString.call(r).indexOf("String")?"Path":"AudioObject")){if(t.paused)return void p.resume(t);if(!t.multiShot){if(t.paused)return void p.resume(t);if(t.playing)return}(a=u.createBufferSource()).buffer=t.buffer,t.setSource(a),t.playing=!0,t.volume=void 0!==e?e:t.volume;var l=t.params;t.startTime=u.currentTime,t.startedAt=o,l.loop&&(a.loop=!0,a.loopStart=l.loopStart||0,l.loopEnd&&(a.loopEnd=l.loopEnd||0))}else{a=u.createBufferSource();var c=HM.AssetLoader.get(t);a.buffer=c;var h=u.createGain();a.connect(h),h.gain.value=e||1,h.connect(d)}a.start||(a.start=a.noteOn),a.start(0,o),s?t.pitch=n||t.pitch:a.playbackRate.value=n||1}},p.stop=function(t){if(t.playing=!1,t.paused=!1,p.fallback)t.stop();else{var e=t.source;t.startOffset=0,e.stop||(e.stop=e.noteOff),e.stop(0)}},p.pause=function(t){var e;p.fallback?t.buffer.pause():(t.startOffset+=u.currentTime-t.startTime,t.pausedAt=t.currentTime,(e=t.source).stop||(e.stop=e.noteOff),e.stop(0));t.playing=!1,t.paused=!0},p.resume=function(t){if(p.fallback)t.resume();else if(t.paused){var e=t.startOffset%t.buffer.duration;t.paused=!1,p.play(t,void 0,e)}},p.addEffect=function(t){var e=r;return n.push({effect:t,id:e}),r++,e},p.removeEffect=function(t){for(var e=0,i=n.length;e<i;e++)if(n[e].id==t){n.splice(e,1);break}},p.unlockIOSSound=function(t){var e=u.createBuffer(1,1,22050),i=u.createBufferSource();i.buffer=e,i.connect(u.destination),i.start||(i.start=i.noteOn),i.start(0);var n=setInterval(function(){if(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE){clearInterval(n);var t=new CustomEvent(p.IOS_READY);p.dispatchEvent(t)}},100)},p.noteToFreq=function(t){return 440*Math.pow(2,(t-49)/12)},Object.defineProperty(p,"initialized",{get:function(){return o}}),Object.defineProperty(p,"mainBus",{get:function(){return u}}),Object.defineProperty(p,"masterVolume",{get:function(){return p.fallback?_smMasterVolume:i.gain.value},set:function(t){1<t?t=1:t<0&&(t=0);p.fallback?(_smMasterVolume=t,updateSMMasterVolume()):i.gain.value=t}}),Object.defineProperty(p,"dryVolume",{get:function(){return d.gain.value},set:function(t){1<t?t=1:t<0&&(t=0);d.gain.value=t}}),Object.defineProperty(p,"wetVolume",{get:function(){return h.gain.value},set:function(t){1<t?t=1:t<0&&(t=0);h.gain.value=t}}),e.HM.Audio=p}(window);var HM=HM||{};HM.AudioObject=function(t,e,i,n,r,o,s){var a,l,c={},h=1;function d(){return l.gain.value}return c.addEffect=function(t){"dry"==t.outputType?a.addInsert(t):a.addSend(t)},c.removeEffect=function(t){"dry"==t.outputType?a.removeInsert(t):a.removeSend(t)},c.setSource=function(t){(c.source=t).connect(l),a.update()},Object.defineProperty(c,"currentTime",{get:function(){if(!c.source.buffer)return 0;var t;t=c.paused?c.pausedAt:n.currentTime-c.startTime+c.startedAt;t>=c.source.buffer.duration&&(t=c.source.buffer.duration);return t},set:function(t){HM.Audio.stop(c),HM.Audio.play(c,d(),t)}}),Object.defineProperty(c,"pitch",{get:function(){return h},set:function(t){h=t,c.source.playbackRate.value=t}}),Object.defineProperty(c,"duration",{get:function(){if(!c.source.buffer)return 0;return c.source.buffer.duration}}),Object.defineProperty(c,"volume",{get:d,set:function(t){l.gain.value=t}}),c.playing=!1,c.paused=!1,l=n.createGain(),a=new HM.AudioSignalChain(l,r,o),c.path=t,c.source=e,c.buffer=i,c.params=s,c.startTime=0,c.startOffset=0,c.pausePosition=0,c.setSource(e),c};var HM=HM||{};HM.AudioSignalChain=function(i,n,r){var o={};return o.addInsert=function(t){o.dryEffects.push(t),o.update()},o.addSend=function(t){o.wetEffects.push(t),o.update()},o.removeInsert=function(t){for(var e=0,i=o.dryEffects.length;e<i;e++)if(o.dryEffects[e].id==t.id){o.dryEffects.splice(e,1);break}o.update()},o.removeSend=function(t){for(var e=0,i=o.wetEffects.length;e<i;e++)if(o.wetEffects[e].id==t.id){o.wetEffects.splice(e,1);break}o.update()},o.update=function(){i.disconnect(),function(){var t=1,e=o.dryEffects.length;if(0<e){for(i.connect(o.dryEffects[0].input);t<e;t++)o.dryEffects[t-1].output.connect(o.dryEffects[t].input);o.dryEffects[t-1].output.connect(n)}else i.connect(n)}(),function(){var t=1,e=o.wetEffects.length;{if(!(0<e))return;for(i.connect(o.wetEffects[0].input);t<e;t++)o.wetEffects[t-1].output.connect(o.wetEffects[t].input);o.wetEffects[t-1].output.connect(r)}}()},o.dryEffects=[],o.wetEffects=[],o};var HM=HM||{};!function(){var n,o,s,a={IMAGE:"IMAGE",AUDIO:"AUDIO",DATA_URI:"DATA_URI",JSON:"JSON",UNKNOWN:"UNKNOWN",ASSET_GROUP:"ASSET_GROUP",DATA_URI_GROUP:"DATA_URI_GROUP",IMAGE_LOADER:"IMAGE_LOADER",AUDIO_LOADER:"AUDIO_LOADER",AUDIO_BUFFER_LOADER:"AUDIO_BUFFER_LOADER",DATA_URI_LOADER:"DATA_URI_LOADER",JSON_LOADER:"JSON_LOADER",imageLoader:null,audioLoader:null,dataURILoader:null,jsonLoader:null,assetVersion:"",defaultPath:""},r={jpg:"jpg",png:"png",gif:"gif"},l={mp3:"mp3",wav:"wav",ogg:"ogg"},c={txt:"txt",uri:"uri"},h={json:"json"},d=[],u=[],p=!1,f=!1;function g(){p=!1,m()}function m(){0<u.length?p||(p=!0,u[0].load(),u.shift()):n&&n()}a.init=function(t,e){f||(a.defaultPath=t||"",a.assetVersion=e||"",f=!0)},a.load=function(t,e){if(!f)throw new Error("You need to initialize Assetloader before loading a group");n=e.onComplete?e.onComplete:null,1===t.length&&(t[0].weight=100);var i=new HM.AssetLoadCollection(t,e,g);u.push(i),p||m()},a.loadSingle=function(t,e){if(a.assetExist(t))return e.onUpdate&&e.onUpdate(1),void(e.onComplete&&e.onComplete());var i=(e=e||{}).customPath||a.defaultPath;s=t,o=e.onComplete;var n=new Image;n.addEventListener(Event.LOAD,o),n.src=i+t;var r=a.getLoader(s);r.assets.push({asset:n,id:s}),d.push({id:s,loader:r})},a.encode64=function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",n=0;n<t.length;){var r,o,s=255&t.charCodeAt(n++),a=255&t.charCodeAt(n++),l=255&t.charCodeAt(n++),c=s>>2,h=(3&s)<<4|a>>4;isNaN(a)?r=o=64:(r=(15&a)<<2|l>>6,o=isNaN(l)?64:63&l),i+=e.charAt(c)+e.charAt(h)+e.charAt(r)+e.charAt(o)}return i},a.installLoader=function(t){switch(t){case a.IMAGE:a.imageLoader=new HM.ImageLoader(d);break;case a.AUDIO:if(HM.Audio){if(!0!==HM.Audio.initialized)throw new Error("AssetLoader.installLoader AUDIO -> HM.Audio not initialized");!0===HM.Audio.fallback?a.audioLoader=new HM.AudioLoader(d):a.audioLoader=new HM.AudioBufferLoader(d)}else a.audioLoader=new HM.AudioLoader(d);break;case a.DATA_URI:a.dataURILoader=new HM.DataURILoader(d);break;case a.JSON:a.jsonLoader=new HM.JSONLoader(d)}},a.get=function(t){if(!f)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);for(var e=0,i=d.length;e<i;e++)if(t===d[e].id)return d[e].loader.getAsset(t);throw new Error("AssetLoader -> asset with id: "+t+", not found")},a.destroy=function(t){if(!f)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);for(var e=0,i=d.length;e<i;e++)if(t===d[e].id){d[e]=null,d.splice(e,1);break}},a.assetExist=function(t){for(var e=0,i=d.length;e<i;e++)if(t===d[e].id)return!0;return!1},a.getFileExtension=function(t){var e=t.split("."),i=e[e.length-1];return void 0!==r[i]?HM.AssetLoader.IMAGE:void 0!==l[i]?HM.AssetLoader.AUDIO:void 0!==c[i]?HM.AssetLoader.DATA_URI:void 0!==h[i]?HM.AssetLoader.JSON:HM.AssetLoader.UNKNOWN},a.getLoader=function(t){var e=a.getFileExtension(t);switch(e){case a.IMAGE:return a.imageLoader||a.installLoader(e),a.imageLoader;case a.JSON:return a.jsonLoader||a.installLoader(e),a.jsonLoader;case a.DATA_URI:return a.dataURILoader||a.installLoader(e),a.dataURILoader;case a.AUDIO:return a.audioLoader||a.installLoader(e),a.audioLoader;default:throw new Error("AssetLoader -> "+e+" is not a valid filetype >> HM.AssetLoader.getLoader")}},HM.AssetLoader=a}();var HM=HM||{};HM.AssetGroup=function(t,e){var i={},n=e||{};return i.TYPE=HM.AssetLoader.ASSET_GROUP,i.data=t,i.weight=n.weight||0,i.onComplete=n.onComplete||null,i.customPath=n.customPath||null,i.onUpdate=n.onUpdate||null,i};var HM=HM||{};HM.AssetLoadCollection=function(t,e,i){var n,r,o={},s=t,a=t,l=0,c=!1,h=0;function d(){c||(c=!0,n=a[0].data.length,void(r=0)!==a[0].weight&&null!==a[0].weight||(a[0].weight=100/s.length),u())}function u(){var t=a[0].data[r],e=HM.AssetLoader.getLoader(t);a[0].onUpdate&&a[0].onUpdate(r/n),e.path=a[0].customPath||HM.AssetLoader.defaultPath,e.load(t,p,a[0])}function p(){r++,l=Math.ceil(r/n*a[0].weight)/100,function(){a[0].onUpdate&&a[0].onUpdate(r/n);e.onUpdate&&e.onUpdate(l+h)}(),r==n?(h+=l,a[0].onComplete&&a[0].onComplete(),a.shift(),0<a.length?(c=!1,setTimeout(d,100)):(a=s=null,i())):u()}return o.load=function(){d()},o};var HM=HM||{};HM.AbstractLoader=function(e){var n={assets:[],asset:null,url:null,id:null,completeCallback:null,path:null,load:function(t,e){if(HM.AssetLoader.assetExist(t))return e(),!0;n.id=t;var i=n.path+t+(""!==HM.AssetLoader.assetVersion?"?v=":"")+HM.AssetLoader.assetVersion;(n.url=i,n.completeCallback=e,"Opera"===BrowserDetect.BROWSER_NAME||"Firefox"===BrowserDetect.BROWSER_NAME)&&(-1!==n.url.indexOf(".mp3")&&(n.url=n.url.replace(".mp3",".ogg")));return!1},onLoad:function(t){n.assets.push({asset:n.asset,id:n.id}),e.push({id:n.id,loader:n}),n.completeCallback()},getAsset:function(t){for(var e=0,i=n.assets.length;e<i;e++)if(t===n.assets[e].id)return n.assets[e].asset;throw new Error("AbstractLoader -> asset with id: "+t+", not found")},onError:function(t){throw new Error("Error Loading file >> "+n.url)}};return n};var HM=HM||{};HM.ImageLoader=function(t){"use strict";var i=HM.extend(HM.AbstractLoader,[t]);function n(t){!function(){var t=asset.width,e=asset.height;-1<id.indexOf("@2")&&(t/=2,e/=2);asset.width=t,asset.height=e,asset._orgW=t,asset._orgH=e,asset._ratio=e/t}(),i.asset.removeEventListener("load",i.onLoad,!0),i.asset.removeEventListener("error",i.onError,!0),i.onLoad(t)}function r(t){i.asset.removeEventListener("load",i.onLoad,!0),i.asset.removeEventListener("error",i.onError,!0),i.onError(t)}return i.type=HM.AssetLoader.IMAGE_LOADER,i.override("load",function(t,e){i._super.load(t,e)||(i.asset=new Image,i.asset.addEventListener("load",n,!0),i.asset.addEventListener("error",r,!0),i.asset.style.position="absolute",i.asset.src=i.url)}),i.override("getAsset",function(t){var e=i._super.getAsset(t).cloneNode(!0);return e.style.position="absolute",e}),i};var HM=HM||{};HM.AudioLoader=function(t){var i=HM.extend(HM.AbstractLoader,[t]);function n(t){i.asset.removeEventListener("canplaythrough",n,!1),i.asset.removeEventListener("error",r,!1),i.onLoad(t)}function r(t){i.asset.removeEventListener("canplaythrough",n,!1),i.asset.removeEventListener("error",r,!1),i.onError(t)}return i.type=HM.AssetLoader.AUDIO_LOADER,i.override("load",function(t,e){i._super.load(t,e)||(i.asset=new Audio,i.asset.addEventListener("canplaythrough",n,!1),i.asset.addEventListener("error",r,!1),i.asset.src=i.url)}),i};var HM=HM||{};HM.AudioBufferLoader=function(t){var n=HM.extend(HM.AbstractLoader,[t]);function r(t){t.currentTarget.onerror=null,t.currentTarget.onload=null,t.currentTarget=null,HM.Audio.mainBus.decodeAudioData(t.target.response,e,i)}function o(t){n.onError(null)}function e(t){t||trace("bufferDecodeSucess - error decoding file data","AudioBufferLoader"),n.asset=t,n.onLoad(null)}function i(){if(trace("bufferDecodeError","AudioBufferLoader"),"Opera"===BrowserDetect.BROWSER_NAME)throw new Error("AudioBufferLoader bufferDecodeError - mp3 format is not supported by Opera. Please provide another format (ogg etc.)");n.onError(null)}return n.type=HM.AssetLoader.AUDIO_BUFFER_LOADER,n.override("load",function(t,e){if(!n._super.load(t,e)){var i=new XMLHttpRequest;i.open("GET",n.url,!0),i.responseType="arraybuffer",i.onerror=o,i.onload=r,i.send()}}),n};var ContentManager=new Object;function TemplateData(){var o,e,n,i,r,s,a,l,t=new Object;return t.getXML=function(){return o},t.getLevel=function(){return e},t.getPassedVariablesByName=function(t){var e="undefined";if(n){var i=n[t];i&&(e=i)}return e},t.getNextTemplateData=function(){return a},t.getPrevTemplateData=function(){return l},t.getTemplateName=function(){return i},t.getTemplatePath=function(){return r},t.getTemplateFullPath=function(){return s},t.getChildIndex=function(){var t=o;if(!t)return-1;var e=t.parentNode;if(!e)return-1;for(var i=e.children,n=i.length,r=0;r<n;r++)if(i[r]===t)return r},t.setXML=function(t){o=t},t.setLevel=function(t){e=t},t.setPassedVariables=function(t){n=t},t.setNextTemplateData=function(t){a=t},t.setPrevTemplateData=function(t){l=t},t.setTemplateName=function(t){i=t},t.setTemplatePath=function(t){r=t},t.setTemplateFullPath=function(t){s=t},t}ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS=!0,ContentManager.SHOW_TRACES=!1,ContentManager.USE_HISTORY_API=!1,ContentManager.DEFAULT_URL=document.location.protocol+"://"+window.location.host,ContentManager.DEFAULT_SUBFOLDER="",ContentManager._activeTemplates=[],ContentManager._templateRegister=[],ContentManager._templateGroups=[],ContentManager._newPath="",ContentManager._blocked=!1,ContentManager._defaultPath="home",ContentManager._xml=null,ContentManager._prevTemplateObj=null,ContentManager._passedVariables=null,ContentManager.init=function(t,e){ContentManager.trace("init();"),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=9&&(ContentManager.USE_HISTORY_API=!1),ContentManager._xml=t,e&&(ContentManager._defaultPath=e,ContentManager.trace(ContentManager._defaultPath,"_defaultPath")),1==ContentManager.USE_HISTORY_API?window.addEventListener("popstate",ContentManager.onHashChange):window.addEventListener("hashchange",ContentManager.onHashChange),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=7&&ContentManager.autoCheck(),ContentManager.onHashChange()},ContentManager.sortArray=function(t,e){var i=t.slice();if(!e.length)return i.sort();var r=Array.prototype.slice.call(e);return i.sort(function(t,e){for(var i=r.slice(),n=i.shift();t[n]==e[n]&&i.length;)n=i.shift();return t[n]==e[n]?0:t[n]>e[n]?1:-1})},ContentManager.path=function(t){"object"==typeof t&&(t=ContentManager.composeFullPathFromXML(t)),ContentManager.trace("path();"),ContentManager.trace(t,"newPath"),1==ContentManager.USE_HISTORY_API?(t="/"+ContentManager.DEFAULT_SUBFOLDER+t,history.pushState(t,t,t),ContentManager.onHashChange()):window.location.hash="/"+t},ContentManager.nextTemplate=function(t){ContentManager.trace("nextTemplate();"),ContentManager._passedVariables=t,ContentManager._blocked=!1,ContentManager.onHashChange()},ContentManager.addTemplate=function(t,e){ContentManager._templateRegister.push({templateName:t,JSClass:e})},ContentManager.addTransitionGroup=function(t,e){ContentManager._templateGroups.push({name:t,group:e})},ContentManager.getTransitionGroup=function(t,e){var i=null,n=ContentManager._templateGroups.length,r=null,o=null,s=null;for(i=0;i<n;i+=1)if(-1!=(o=(r=ContentManager._templateGroups[i]).group).indexOf(t)&&-1!=o.indexOf(e)){s=r.name;break}return s},ContentManager.composeFullPathFromXML=function(t){var e=t.getAttribute("data-path"),i=new Array;e&&i.unshift(e);for(var n=t.parentNode,r=0;e&&((e=n.getAttribute("data-path"))&&i.unshift(e),n=n.parentNode,!(10<(r+=1))););return i.join("/")},ContentManager.getTransitionIndex=function(t){},ContentManager.isContentSupported=function(t){var e=ContentManager.findContent(ContentManager.extractPath(t).split("/")),i=!1;return e&&(templateName=e.getAttribute("data-template"),templateName&&ContentManager.findTemplateFromName(templateName)&&(i=!0)),i},ContentManager.updateMetaTags=function(){var t=ContentManager._newPath.split("/");if(""==t[0]&&(t[0]="home"),selectedPageData=Assets.DATA_URL.pages[t[0]],selectedPageData){if(selectedPageData.subpages&&1<t.length)for(var e=1;e<t.length;e++)""!=t[e]&&(selectedPageData=selectedPageData.subpages[t[e]]);selectedPageData||(selectedPageData=Assets.DATA_URL.defaults),document.head.querySelector("title").innerHTML=selectedPageData.meta.title,document.head.querySelector('[name="description"]').setAttribute("content",selectedPageData.meta.description),document.head.querySelector('[property="og:title"]').setAttribute("content",selectedPageData.meta.title),document.head.querySelector('[property="og:description"]').setAttribute("content",selectedPageData.meta.description),document.head.querySelector('[property="og:image"]').setAttribute("content",selectedPageData.meta.image),document.head.querySelector('[property="og:url"]').setAttribute("content",Assets.DATA_URL.defaults.baseUrl+selectedPageData.url)}},ContentManager.onHashChange=function(){if(ContentManager.trace("-----------------------------"),0==ContentManager._blocked){var t="";if(null!=history){var e=window.location.href;t=e.substring(ContentManager.DEFAULT_URL.length+ContentManager.DEFAULT_SUBFOLDER.length,e.length)}0==ContentManager.USE_HISTORY_API&&(t=window.location.hash),ContentManager._newPath=ContentManager.extractPath(t);var i,n,r,o,s=ContentManager._newPath.split("/"),a=new Array;for(ContentManager.updateMetaTags(),""==s[0]&&(s[0]=ContentManager._defaultPath),ContentManager.trace(s,"pathArr");0<s.length;)(i=ContentManager.findContent(s))&&(n=i.getAttribute("data-template"))&&(!1===(r=ContentManager.findTemplateLevelFromName(n))&&(r=s.length-1),o=i.getAttribute("data-path"),ContentManager.trace("new candidate"),ContentManager.trace(o,"templatePath"),ContentManager.trace(n,"templateName"),ContentManager.trace(r,"templateLevel"),a.push({xml:i,path:o,templateName:n,level:r})),s.pop();var l,c,h=0,d=(a=ContentManager.sortArray(a,["level"])).length,u="none",p=ContentManager._activeTemplates;for(ContentManager.trace(a.length,"candidates.length"),h=0;h<d&&(null==p[c=(l=a[h]).level]?u="push":p[c].path==l.path&&-1!=p[c].fullPath.indexOf(ContentManager.composeFullPathFromXML(l.xml))||(u="pop"),"none"==u);h+=1);if("none"==u&&a.length<p.length&&l&&(u="pop"),ContentManager.trace(u,"type"),"none"!=u)if(ContentManager._blocked=!0,"pop"==u){var f=p.pop(),g=f.templateData;ContentManager._passedVariables&&(g.setPassedVariables(ContentManager._passedVariables),ContentManager._passedVariables=null);var m=new TemplateData;m.setTemplateName(l.templateName),m.setLevel(l.level),m.setTemplatePath(l.path),g.setNextTemplateData(m),(ContentManager._prevTemplateObj=f).template.templateOut()}else if("push"==u){ContentManager.trace("push candidate"),ContentManager.trace(l.path,"candidate.path"),ContentManager.trace(l.templateName,"candidate.templateName"),ContentManager.trace(l.level,"candidate.level");var y=ContentManager.findTemplateFromName(l.templateName);if(y){(g=new TemplateData).setXML(l.xml),g.setLevel(l.level),g.setTemplatePath(l.path),g.setTemplateName(l.templateName);var _=ContentManager.composeFullPathFromXML(l.xml);g.setTemplateFullPath(_),ContentManager._prevTemplateObj&&(g.setPrevTemplateData(ContentManager._prevTemplateObj.templateData),ContentManager._prevTemplateObj=null),ContentManager._passedVariables&&(g.setPassedVariables(ContentManager._passedVariables),ContentManager._passedVariables=null);var v=new y(g);if(1==ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS){var b=ContentManager.composeFullPathFromXML(l.xml);_gaq.push(["_trackPageview",b])}var w={template:v,path:l.path,templateName:l.templateName,fullPath:_,xml:l.xml,templateData:g};ContentManager._prevTemplateObj=w,p.push(w),v.templateIn()}else ContentManager._blocked=!1,trace("ContentManger.js unable to find template")}}},ContentManager.findContent=function(t){for(var e,i,n,r,o=ContentManager.cloneArray(t),s=o[0],a=ContentManager._xml,l=!1,c=0,h=0;s;){for(n=(r=a.children).length,i=0;i<n;i+=1)if((e=r[i]).getAttribute("data-path")==s){o.shift(),s=o[0],a=e,l=!0,h+=1;break}(!l||!s||10<c)&&(s=null),c+=1}return h!=t.length&&(a=null),a},ContentManager.extractPath=function(t){var e,i,n=(t=t.split("?")[0]).split("#"),r=n[n.length-1].split("/"),o=new Array,s=r.length;for(e=0;e<s;e+=1)null!==(i=r[e])&&""!==i&&o.push(i);return o.join("/")},ContentManager.findTemplateFromName=function(t){var e,i,n,r=ContentManager._templateRegister,o=r.length;for(e=0;e<o;e+=1)if((i=r[e]).templateName==t){n=i.JSClass;break}return n},ContentManager.findTemplateLevelFromName=function(t){var e=!1,i=t.match(/\d+/);return i&&(e=i),e},ContentManager.autoCheck=function(){ContentManager.trace("autoCheck();");var i=window.location.hash,n=.2;setTimeout(function t(){var e=window.location.hash;e!=i&&(i=e,ContentManager.onHashChange());setTimeout(t,1e3*n)},1e3*n)},ContentManager.cloneArray=function(t){var e,i=t.length,n=new Array;for(e=0;e<i;e+=1)n.push(t[e]);return n},ContentManager.trace=function(t,e){ContentManager.SHOW_TRACES&&(e||(e=""),trace(t,"ContentManager.js "+e))};var SmartObjectRenderer={};function SmartObject(t){var e=SmartObject.defaults;if(null==t){var i=document.createElement("div");i.style.position="absolute",i.style.left=null,i.style.top=null}else(i=t).style.position="absolute",i.style.left&&(e._x=parseInt(i.style.left)),i.style.top&&(e._y=parseInt(i.style.top)),i.style.opacity&&(e._opacity=i.style.opacity),i.style[SmartObject.prefix+"Perspective"]&&(e._perspective=i.style[SmartObject.prefix+"Perspective"]),i.style[SmartObject.prefix+"TransformStyle"]&&(e._transformStyle=i.style[SmartObject.prefix+"TransformStyle"]),i.style[SmartObject.prefix+"BackfaceVisibility"]&&(e._backfaceVisibility=i.style[SmartObject.prefix+"BackfaceVisibility"]),i.style.left=null,i.style.top=null;return i.className="smart-object",SmartObject.convert(i,e)}function AssetGroup(t,e){var i=this;return i.data=t,e.onComplete&&(i.onComplete=e.onComplete),null!==e.customPath&&(i.customPath=e.customPath),e.onUpdate&&(i.onUpdate=e.onUpdate),e.dataURIFile&&(i.dataURIFile=e.dataURIFile),e.dataURIFileSizeInBytes&&(i.dataURIFileSizeInBytes=e.dataURIFileSizeInBytes),e.dataURIFilePercentageOfTotal?i.dataURIFilePercentageOfTotal=e.dataURIFilePercentageOfTotal:i.dataURIFilePercentageOfTotal=0,e.stripPath?i.stripPath=e.stripPath:i.stripPath=!1,i}SmartObjectRenderer.turnedOn=!1,SmartObjectRenderer.objectsToMove=null,SmartObjectRenderer.renderOnTweenMaxTicker=function(){SmartObjectRenderer.objectsToMove=new Array,TweenMax.ticker.addEventListener("tick",SmartObjectRenderer.render,!0),SmartObjectRenderer.turnedOn=!0},SmartObjectRenderer.render=function(){for(var t=SmartObjectRenderer.objectsToMove.length,e=0;e<t;e++){var i=SmartObjectRenderer.objectsToMove[e];SmartObject.update(i),i.___firstRun=!1,i.___isSetToMove=!1}SmartObjectRenderer.objectsToMove=[]},SmartObject.defaults={_x:0,_y:0,_z:0,_rotation:0,_rotationX:0,_rotationY:0,_rotationZ:0,_scaleX:1,_scaleY:1,_opacity:1,_skewX:0,_skewY:0,_perspective:null,_transformStyle:"flat",_backfaceVisibility:"hidden",_transformOriginX:50,_transformOriginY:50,_transformOriginZ:50},SmartObject.convert=function(t,e){return t.___isSmartObject=!0,t.___firstRun=!0,t.___hasHadAdvancedStyle=!1,t.___currTranslate=null,t.___isSetToMove=!1,t.___useRounded=!1,t.___use3D=!0,t.___doNotUseTranslate=!1,t._getWidth=SmartObject.getWidth,t._getHeight=SmartObject.getHeight,t._dispatchCustomEvent=SmartObject.dispatchCustomEvent,"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=7&&(t.___compensateX=0,t.___compensateY=0,t._setter=new Array,t.attachEvent("onpropertychange",update)),"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=8?(t.___compensateX=0,t.___compensateY=0,SmartObject.setProperty(t,"_x",e._x,SmartObject.updateIE8),SmartObject.setProperty(t,"_y",e._y,SmartObject.updateIE8),SmartObject.setProperty(t,"_rotation",e._rotation,SmartObject.updateIE8),SmartObject.setProperty(t,"_scaleX",e._scaleX,SmartObject.updateIE8),SmartObject.setProperty(t,"_scaleY",e._scaleY,SmartObject.updateIE8),SmartObject.setProperty(t,"_opacity",e._opacity,SmartObject.updateIE8),SmartObject.setProperty(t,"_transformOriginX",e._transformOriginX,SmartObject.updateIE8),SmartObject.setProperty(t,"_transformOriginY",e._transformOriginY,SmartObject.updateIE8)):(SmartObject.setProperty(t,"_x",e._x,SmartObject.setToUpdate),SmartObject.setProperty(t,"_y",e._y,SmartObject.setToUpdate),SmartObject.setProperty(t,"_z",e._z,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationX",e._rotationX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationY",e._rotationY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotationZ",e._rotationZ,SmartObject.setToUpdate),SmartObject.setProperty(t,"_rotation",e._rotation,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scaleX",e._scaleX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scaleY",e._scaleY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_scale",1,SmartObject.setScale),SmartObject.setProperty(t,"_skewX",e._skewX,SmartObject.setToUpdate),SmartObject.setProperty(t,"_skewY",e._skewY,SmartObject.setToUpdate),SmartObject.setProperty(t,"_opacity",e._opacity,SmartObject.setOpacity),SmartObject.setProperty(t,"_transformOriginX",e._transformOriginX,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_transformOriginY",e._transformOriginY,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_transformOriginZ",e._transformOriginZ,SmartObject.setTransformOrigin),SmartObject.setProperty(t,"_perspective",e._perspective,SmartObject.setPerspective),SmartObject.setProperty(t,"_transformStyle",e._transformStyle,SmartObject.setTransformStyle),SmartObject.setProperty(t,"_backfaceVisibility",e._backfaceVisibility,SmartObject.setBackfaceVisibility)),t.___firstRun=!1,SmartObject.update(t),t},SmartObject.prefix=function(){if("Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<="8")return"";var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(new RegExp("("+e+")","i"))[1];return"moz"==e&&(e="Moz"),e}(),SmartObject.getWidth=function(){var t=this,e=0;if(null==t.parentNode)document.body.appendChild(t),e=t.offsetWidth,document.body.removeChild(t);else if(0==t.offsetWidth){var i=t.parentNode;document.body.appendChild(t),e=t.offsetWidth,i.appendChild(t)}else e=t.offsetWidth;return e},SmartObject.getHeight=function(){var t=this,e=0;if(null==t.parentNode)document.body.appendChild(t),e=t.offsetHeight,document.body.removeChild(t);else if(0==t.offsetHeight){var i=t.parentNode;document.body.appendChild(t),e=t.offsetHeight,i.appendChild(t)}else e=t.offsetHeight;return e},SmartObject.dispatchCustomEvent=function(t){if(document.createEventObject&&"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=8){var e=document.createEventObject();return this.fireEvent("on"+t,e)}return(e=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),!this.dispatchEvent(e)},SmartObject.setProperty=function(t,e,i,n){SmartObject.extend(t,e,n),t[e]=i},SmartObject.extend=function(e,i,n){Object.defineProperty?Object.defineProperty(e,i,{get:function(){return i},set:function(t){n(e,i=t)}}):e.__defineGetter__&&(e.__defineGetter__(i,function(){return i}),e.__defineSetter__(i,function(t){n(e,i=t)}))},SmartObject.setToUpdate=function(t){1==SmartObjectRenderer.turnedOn?0==t.___isSetToMove&&(t.___isSetToMove=!0,SmartObjectRenderer.objectsToMove.push(t)):SmartObject.update(t)},SmartObject.setBackfaceVisibility=function(t,e){t.style[SmartObject.prefix+"BackfaceVisibility"]=e},SmartObject.setPerspective=function(t,e){t.style[SmartObject.prefix+"Perspective"]=e+"px"},SmartObject.setTransformStyle=function(t,e){t.style[SmartObject.prefix+"TransformStyle"]=e},SmartObject.setOpacity=function(t,e){1!=t._opacity?t.style.opacity=t._opacity:t.style.opacity=null},SmartObject.setScale=function(t,e){t._scaleX=e,t._scaleY=e},SmartObject.setTransformOrigin=function(t,e){50!=t._transformOriginX||50!=t._transformOriginY||50!=t._transformOriginZ?1==BrowserDetect.TRANSLATE3D_SUPPORT&&50!=t._transformOriginZ&&1==t.___use3D?t.style[SmartObject.prefix+"TransformOrigin"]=t._transformOriginX+"% "+t._transformOriginY+"% "+t._transformOriginZ+"%":t.style[SmartObject.prefix+"TransformOrigin"]=t._transformOriginX+"% "+t._transformOriginY+"%":t.style[SmartObject.prefix+"TransformOrigin"]=null},SmartObject.update=function(t){if(0==t.___firstRun){var e,i=t._x,n=t._y;1==t.___useRounded&&(i=Math.round(t._x),n=Math.round(t._y)),1==BrowserDetect.TRANSLATE3D_SUPPORT&&1==t.___use3D?(e="translate3d("+i+"px, "+n+"px, "+t._z+"px)",0!=t._rotationX&&(e+=" rotateX("+t._rotationX+"deg)"),0!=t._rotationY&&(e+=" rotateY("+t._rotationY+"deg)"),0!=t._rotationZ&&(e+=" rotateZ("+t._rotationZ+"deg)")):e="translate("+i+"px, "+n+"px)",0!=t._rotation&&(e+=" rotate("+t._rotation+"deg)"),1==t._scaleX&&1==t._scaleY||(e+=" scale("+t._scaleX+", "+t._scaleY+")"),0==t._skewX&&0==t._skewY||(e+=" skew("+t._skewX+"deg, "+t._skewY+"deg)"),1==t.___doNotUseTranslate?(t.style.top=n+"px",t.style.left=i+"px"):e!=t.___currTranslate&&(t.style[SmartObject.prefix+"Transform"]=e,t.___currTranslate=e)}},SmartObject.updateFilters=function(t,e){if(0!=t._blur||0!=t._grayscale||0!=t._sepia||1!=t._contrast||0!=t._brightness||0!=t._invert||1!=t._saturate){var i=t._brightness;"Chrome"==BrowserDetect.BROWSER_NAME&&0==BrowserDetect.TABLET&&0==BrowserDetect.MOBILE&&(i=t._brightness+1),t.style[SmartObject.prefix+"Filter"]="blur("+t._blur+"px) grayscale("+t._grayscale+") sepia("+t._sepia+") contrast("+t._contrast+") brightness("+i+") invert("+t._invert+") saturate("+t._saturate+")"}else t.style[SmartObject.prefix+"Filter"]=""},SmartObject.updateIE8=function(t){if(0==t._rotation&&1==t._scaleX&&1==t._scaleY&&1==t._opacity||(t.___hasHadAdvancedStyle=!0),1==t.___hasHadAdvancedStyle){var e=!1,i=null;if(null==t.parentNode){var n=document.createElement("div");n.appendChild(t),document.body.appendChild(n),e=!0}else i=t.parentNode;var r=t.style.filter;t.style.filter="";var o=t.offsetWidth,s=t.offsetHeight;t.style.filter=r,t.parentNode.removeChild(t);var a=null;var l=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(100*t._opacity)+")",c="";if(0!=t._rotation||1!=t._scaleX||1!=t._scaleY)c="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', "+(d=Matrix.Rotation(FixIE.degreesToRadians(t._rotation)),u=t,p=d.e(1,1)*u._scaleX,f=d.e(1,2)*u._scaleY,g=d.e(2,1)*u._scaleX,m=d.e(2,2)*u._scaleY,a=Matrix.create([[p,f,0],[g,m,0],[0,0,1]]),"M11="+p+", M12="+f+", M21="+g+", M22="+m)+", filterType='nearest neighbor')";var h=c+l;null==t.style.background&&(t.style.background="transparent"),t.style.MsFilter=h,t.style.filter=h,t.style.zoom="1",""!=c&&(FixIE.transformOrigin(t,a,o,s),FixIE.fixBoundaryBug(t,a,o,s));try{t.style.left=t._x+t.___compensateX+"px",t.style.top=t._y+t.___compensateY+"px"}catch(t){}null!=i&&(i.appendChild(t),1==e&&(n.parentNode.removeChild(n),n=null)),0==t._rotation&&1==t._scaleX&&1==t._scaleY&&1==t._opacity&&(t.___compensateX=0,t.___compensateY=0,t.___hasHadAdvancedStyle=!1)}else{i=null;null!=t.parentNode&&(i=t.parentNode,t.parentNode.removeChild(t)),t.style.left=t._x+t.___compensateX+"px",t.style.top=t._y+t.___compensateY+"px",null!=i&&i.appendChild(t)}var d,u,p,f,g,m},DOMUtils=new Object,DOMUtils.getChildIndex=function(t){if(!t)return-1;var e=t.parentNode;if(!e)return-1;for(var i=e.children,n=i.length,r=0;r<n;r++)if(i[r]===t)return r},DOMUtils.getOffset=function(t){for(var e=0,i=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,i+=t.offsetTop-t.scrollTop,t=t.parentNode?t.parentNode:t.offsetParent;return{top:i,left:e}},DOMUtils.getWindowSize=function(){var t={},e=0,i=0;return"number"==typeof window.innerWidth?(e=window.innerWidth,i=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)&&(e=document.documentElement.clientWidth,i=document.documentElement.clientHeight),t.width=e,t.height=i,t},DOMUtils.getScrollPosition=function(){var t={};return void 0!==window.pageYOffset?(t.scrollOffsetX=window.pageXOffset,t.scrollOffsetY=window.pageYOffset):void 0!==document.documentElement.scrollTop&&0<document.documentElement.scrollTop?(t.scrollOffsetX=document.documentElement.scrollLeft,t.scrollOffsetY=document.documentElement.scrollTop):void 0!==document.body.scrollTop&&(t.scrollOffsetX=document.body.scrollLeft,t.scrollOffsetY=document.body.scrollTop),t},DOMUtils.localToGlobal=function(t){for(var e=0,i=0;null!=t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}},DOMUtils.getAbsoluteOffset=function(t){for(var e=0,i=0;isNaN(t.offsetLeft)||(e+=t.offsetLeft),t=t.offsetParent;);for(;isNaN(t.offsetTop)||(i+=t.offsetTop),t=t.offsetParent;);return{x:e,y:i}},DOMUtils.getDocumentSize=function(){var t={},e=document,i=Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight)),n=Math.max(Math.max(e.body.scrollWidth,e.documentElement.scrollWidth),Math.max(e.body.offsetWidth,e.documentElement.offsetWidth),Math.max(e.body.clientWidth,e.documentElement.clientWidth));return t.width=n,t.height=i,t},DOMUtils.getMousePosition=function(t){var e=document.documentElement,i=document.body;return t||(t=window.event),null!=window.pageXOffset?[t.clientX+window.pageXOffset,t.clientY+window.pageYOffset]:[t.clientX+e.scrollLeft+i.scrollLeft,t.clientY+e.scrollTop+i.scrollTop]},DOMUtils.getElementsByAttribute=function(t,e,i,n){var r=[];null==i&&(i=this),null==n&&(n="*");for(var o=i.getElementsByTagName(n),s=0;s<o.length;s+=1)e?o[s].hasAttribute(t)&&o[s].getAttribute(t)==e&&r.push(o[s]):o[s].hasAttribute(t)&&r.push(o[s]);return r},function(o){var t={load:function(t,e,i){var n;null===i&&(i="GET"),(n=o.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==n.readyState&&200==n.status&&(e(n.responseText),n=null)},n.open(i,t,!0),n.send()},loadJSONP:function(t,e){var i="_"+new Date,n=document.createElement("script"),r=document.getElementsByTagName("head")[0]||document.documentElement;o[i]=function(t){r.removeChild(n),e(t)},n.src=t+"&callback="+i,r.appendChild(n)}};o.AJAX=t}(window),function(){var v={};function b(){v._percentageLoaded=0;var t=v.que[0].data,e=v.que[0].onComplete,r=v.que[0].customPath,i=v.que[0].onUpdate,n=v.que[0].dataURIFile,o=v.que[0].dataURIFileSizeInBytes,s=v.que[0].dataURIFilePercentageOfTotal;"Explorer"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=9&&(n=null,s=0);var a,l,c=0,h=t.length,d=0,u=[],p=0;function f(){for(;c<h;c++)l=t[c],v.assetExist(l)||(u.push(t[c]),p++);!function(){if(0<u.length)for(var t=0,e=u.length;t<e;t++){a=new Image,l=u[t],a.addEventListener("load",m,!0),a.addEventListener("error",y,!0),a.style.position="absolute";var i=u[t],n=new RegExp("/");n.test(i)&&v.que[0].stripPath&&(l=w(u[t])),url=null!=r?r+u[t]:v.assetPath+u[t],v.assets.push({asset:a,id:l,isURI:!1}),a.src=url+(""!==v.assetVersion?"?v=":"")+v.assetVersion}else _()}()}if(null!=n){n=n+(""!==v.assetVersion?"?v=":"")+v.assetVersion;var g=new XMLHttpRequest;g.addEventListener("progress",function(t){v._percentageLoaded=Math.ceil(t.loaded/o*s),v._percentageLoaded>s&&(v._percentageLoaded=s),null!=i&&i(v._percentageLoaded)},!1),g.addEventListener(Event.LOAD,function t(e){g.removeEventListener(Event.LOAD,t,!0);for(var i=e.currentTarget.responseText,n=i.split("|"),r=0;r<n.length-1;r++){var o=n[r];if(r%2==0){var s=new Image;s.src=n[r+1];var a=o.toString();v.assets.push({asset:s,id:a,isURI:!0})}}g=i=null,f()},!0),g.open("GET",n,!0),g.overrideMimeType&&g.overrideMimeType("text/plain; charset=x-user-defined"),g.send(null)}else f();function m(t){t.currentTarget.removeEventListener("load",_,!0),t.currentTarget.removeEventListener("error",_,!0),d++,_()}function y(t){t.currentTarget.removeEventListener("load",_,!0),t.currentTarget.removeEventListener("error",_,!0),d++,_()}function _(){v._percentageLoaded=Math.ceil(d/p*(100-s)+s),null!=i&&i(v._percentageLoaded),d==p&&(e&&e(),v.que.shift(),0<v.que.length?setTimeout(b,100):v.busy=!1)}}function w(t){var e;if(t){var i=new RegExp("^.*[/]","g");e=t.replace(i,"")}return e}v.assetVersion="",v.init=function(t,e){v.initialized||(v.assetVersion=e||"",v.assets=[],v.que=[],v.busy=!1,v.assetPath=t,v._percentageLoaded=0,v.initialized=!0)},v.loadGroup=function(t){if(!v.initialized)throw new Error("You need to initialize Assetloader before loading a group");v.busy?v.que.push(t):(v.busy=!0,v.que.push(t),b())},v.getAsset=function(t){if(!v.initialized)throw new Error("You need to initialize Assetloader before attempting to retrive an asset - id: "+t);for(var e,i,n,r=!1,o=0,s=v.assets.length,a=null;o<s;o++)if(t===v.assets[o].id)return r=!0,(a=(e=v.assets[o].asset).cloneNode(!0)).style.position="absolute",-1<t.indexOf("@2")?(i=e.width/2,n=e.height/2,a.width=i,a.height=n):(i=e.width,n=e.height),a.width=i,a.height=n,a._orgW=i,a._orgH=n,a._ratio=n/i,a;if(!0!==r)throw new Error("AssetLoader -> asset with id: "+t+", not found");return a},v.destroy=function(t){if(!v.initialized)throw new Error("You need to initialize Assetloader before attempting to destroy an asset - id: "+t);for(var e=0,i=v.assets.length;e<i;e++)if(t===v.assets[e].id){v.assets[e]=null,v.assets.splice(e,1),!0;break}},v.assetExist=function(t){for(var e=0,i=v.assets.length;e<i;e++)if(t===v.assets[e].id)return!0;return!1},window.AssetLoader=v}();var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var t,T,w,x,A,y,_,C,v,b,p,f,m,e;_gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(n,h,f){var g=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},m=function(t,e,i){f.call(this,t,e,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=m.prototype.render},y=1e-10,_=f._internals,v=_.isSelector,b=_.isArray,t=m.prototype=f.to({},.1,{}),w=[];m.version="1.14.2",t.constructor=m,t.kill()._gc=!1,m.killTweensOf=m.killDelayedCallsTo=f.killTweensOf,m.getTweensOf=f.getTweensOf,m.lagSmoothing=f.lagSmoothing,m.ticker=f.ticker,m.render=f.render,t.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),f.prototype.invalidate.call(this)},t.updateTo=function(t,e){var i,n=this.ratio,r=this.vars.immediateRender||t.immediateRender;for(i in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[i]=t[i];if(this._initted||r)if(e)this._initted=!1;else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&f._onPluginEvent("_onDisable",this),.998<this._time/this._duration){var o=this._time;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(0<this._time||r){this._initted=!1,this._init();for(var s,a=1/(1-n),l=this._firstPT;l;)s=l.s+l.c,l.c*=a,l.s=s-l.c,l=l._next}return this},t.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,r,o,s,a,l,c,h,d=this._dirty?this.totalDuration():this._totalDuration,u=this._time,p=this._totalTime,f=this._cycle,g=this._duration,m=this._rawPrevTime;if(d<=t?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,r="onComplete"),0===g&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||m<0||m===y)&&m!==t&&(i=!0,y<m&&(r="onReverseComplete")),this._rawPrevTime=h=!e||t||m===t?t:y)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===g&&0<m&&m!==y)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||i)&&(0<=m&&(i=!0),this._rawPrevTime=h=!e||t||m===t?t:y)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(s=g+this._repeatDelay,this._cycle=this._totalTime/s>>0,0!==this._cycle&&this._cycle===this._totalTime/s&&this._cycle--,this._time=this._totalTime-this._cycle*s,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(a=this._time/g,(1===(l=this._easeType)||3===l&&.5<=a)&&(a=1-a),3===l&&(a*=2),1===(c=this._easePower)?a*=a:2===c?a*=a*a:3===c?a*=a*a*a:4===c&&(a*=a*a*a*a),this.ratio=1===l?1-a:2===l?a:this._time/g<.5?a/2:1-a/2):this.ratio=this._ease.getRatio(this._time/g)),u!==this._time||i||f!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=u,this._totalTime=p,this._rawPrevTime=m,this._cycle=f,_.lazyTweens.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/g):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==u&&0<=t&&(this._active=!0),0===p&&(2===this._initted&&0<t&&this._init(),this._startAt&&(0<=t?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||w))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,e,i),e||(this._totalTime!==p||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||w)),this._cycle!==f&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||w)),r&&(!this._gc||i)&&(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||w),0===g&&this._rawPrevTime===y&&h!==y&&(this._rawPrevTime=0))}else p!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||w))},m.to=function(t,e,i){return new m(t,e,i)},m.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new m(t,e,i)},m.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new m(t,e,n)},m.staggerTo=m.allTo=function(t,e,i,n,r,o,s){n=n||0;var a,l,c,h,d=i.delay||0,u=[],p=function(){i.onComplete&&i.onComplete.apply(i.onCompleteScope||this,arguments),r.apply(s||this,o||w)};for(b(t)||("string"==typeof t&&(t=f.selector(t)||t),v(t)&&(t=g(t))),t=t||[],n<0&&((t=g(t)).reverse(),n*=-1),a=t.length-1,c=0;c<=a;c++){for(h in l={},i)l[h]=i[h];l.delay=d,c===a&&r&&(l.onComplete=p),u[c]=new m(t[c],e,l),d+=n}return u},m.staggerFrom=m.allFrom=function(t,e,i,n,r,o,s){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,m.staggerTo(t,e,i,n,r,o,s)},m.staggerFromTo=m.allFromTo=function(t,e,i,n,r,o,s,a){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,m.staggerTo(t,e,n,r,o,s,a)},m.delayedCall=function(t,e,i,n,r){return new m(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:r,overwrite:0})},m.set=function(t,e){return new m(t,0,e)},m.isTweening=function(t){return 0<f.getTweensOf(t,!0).length};var o=function(t,e){for(var i=[],n=0,r=t._first;r;)r instanceof f?i[n++]=r:(e&&(i[n++]=r),n=(i=i.concat(o(r,e))).length),r=r._next;return i},d=m.getAllTweens=function(t){return o(n._rootTimeline,t).concat(o(n._rootFramesTimeline,t))};m.killAll=function(t,e,i,n){null==e&&(e=!0),null==i&&(i=!0);var r,o,s,a=d(0!=n),l=a.length,c=e&&i&&n;for(s=0;s<l;s++)o=a[s],(c||o instanceof h||(r=o.target===o.vars.onComplete)&&i||e&&!r)&&(t?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},m.killChildTweensOf=function(t,e){if(null!=t){var i,n,r,o,s,a=_.tweenLookup;if("string"==typeof t&&(t=f.selector(t)||t),v(t)&&(t=g(t)),b(t))for(o=t.length;-1<--o;)m.killChildTweensOf(t[o],e);else{for(r in i=[],a)for(n=a[r].target.parentNode;n;)n===t&&(i=i.concat(a[r].tweens)),n=n.parentNode;for(s=i.length,o=0;o<s;o++)e&&i[o].totalTime(i[o].totalDuration()),i[o]._enabled(!1,!1)}}};var r=function(t,e,i,n){e=!1!==e,i=!1!==i;for(var r,o,s=d(n=!1!==n),a=e&&i&&n,l=s.length;-1<--l;)o=s[l],(a||o instanceof h||(r=o.target===o.vars.onComplete)&&i||e&&!r)&&o.paused(t)};return m.pauseAll=function(t,e,i){r(!0,t,e,i)},m.resumeAll=function(t,e,i){r(!1,t,e,i)},m.globalTimeScale=function(t){var e=n._rootTimeline,i=f.ticker.time;return arguments.length?(t=t||y,e._startTime=i-(i-e._startTime)*e._timeScale/t,e=n._rootFramesTimeline,i=f.ticker.frame,e._startTime=i-(i-e._startTime)*e._timeScale/t,e._timeScale=n._rootTimeline._timeScale=t,t):e._timeScale},t.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},t.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},t.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},t.duration=function(t){return arguments.length?n.prototype.duration.call(this,t):this._duration},t.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},t.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},t.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},t.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},m},!0),_gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(h,d,u){var p=function(t){d.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var e,i,n=this.vars;for(i in n)e=n[i],m(e)&&-1!==e.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(e));m(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},f=1e-10,t=u._internals,g=t.isSelector,m=t.isArray,y=t.lazyTweens,_=t.lazyRender,v=[],s=_gsScope._gsDefine.globals,b=function(t){var e,i={};for(e in t)i[e]=t[e];return i},r=function(t,e,i,n){var r=t._timeline._totalTime;(e||!this._forcingPlayhead)&&(t._timeline.pause(t._startTime),e&&e.apply(n||t._timeline,i||v),this._forcingPlayhead&&t._timeline.seek(r))},w=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},e=p.prototype=new d;return p.version="1.14.2",e.constructor=p,e.kill()._gc=e._forcingPlayhead=!1,e.to=function(t,e,i,n){var r=i.repeat&&s.TweenMax||u;return e?this.add(new r(t,e,i),n):this.set(t,i,n)},e.from=function(t,e,i,n){return this.add((i.repeat&&s.TweenMax||u).from(t,e,i),n)},e.fromTo=function(t,e,i,n,r){var o=n.repeat&&s.TweenMax||u;return e?this.add(o.fromTo(t,e,i,n),r):this.set(t,n,r)},e.staggerTo=function(t,e,i,n,r,o,s,a){var l,c=new p({onComplete:o,onCompleteParams:s,onCompleteScope:a,smoothChildTiming:this.smoothChildTiming});for("string"==typeof t&&(t=u.selector(t)||t),g(t=t||[])&&(t=w(t)),(n=n||0)<0&&((t=w(t)).reverse(),n*=-1),l=0;t.length>l;l++)i.startAt&&(i.startAt=b(i.startAt)),c.to(t[l],e,b(i),l*n);return this.add(c,r)},e.staggerFrom=function(t,e,i,n,r,o,s,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,n,r,o,s,a)},e.staggerFromTo=function(t,e,i,n,r,o,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,n,r,o,s,a,l)},e.call=function(t,e,i,n){return this.add(u.delayedCall(0,t,e,i),n)},e.set=function(t,e,i){return i=this._parseTimeOrLabel(i,0,!0),null==e.immediateRender&&(e.immediateRender=i===this._time&&!this._paused),this.add(new u(t,0,e),i)},p.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var i,n,r=new p(t),o=r._timeline;for(null==e&&(e=!0),o._remove(r,!0),r._startTime=0,r._rawPrevTime=r._time=r._totalTime=o._time,i=o._first;i;)n=i._next,e&&i instanceof u&&i.target===i.vars.onComplete||r.add(i,i._startTime-i._delay),i=n;return o.add(r,0),r},e.add=function(t,e,i,n){var r,o,s,a,l,c;if("number"!=typeof e&&(e=this._parseTimeOrLabel(e,0,!0,t)),!(t instanceof h)){if(t instanceof Array||t&&t.push&&m(t)){for(i=i||"normal",n=n||0,r=e,o=t.length,s=0;s<o;s++)m(a=t[s])&&(a=new p({tweens:a})),this.add(a,r),"string"!=typeof a&&"function"!=typeof a&&("sequence"===i?r=a._startTime+a.totalDuration()/a._timeScale:"start"===i&&(a._startTime-=a.delay())),r+=n;return this._uncache(!0)}if("string"==typeof t)return this.addLabel(t,e);if("function"!=typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=u.delayedCall(0,t)}if(d.prototype.add.call(this,t,e),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(c=(l=this).rawTime()>t._startTime;l._timeline;)c&&l._timeline.smoothChildTiming?l.totalTime(l._totalTime,!0):l._gc&&l._enabled(!0,!1),l=l._timeline;return this},e.remove=function(t){if(t instanceof h)return this._remove(t,!1);if(t instanceof Array||t&&t.push&&m(t)){for(var e=t.length;-1<--e;)this.remove(t[e]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},e._remove=function(t,e){d.prototype._remove.call(this,t,e);var i=this._last;return i?this._time>i._startTime+i._totalDuration/i._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},e.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},e.insert=e.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},e.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},e.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},e.addPause=function(t,e,i,n){return this.call(r,["{self}",e,i,n],this,t)},e.removeLabel=function(t){return delete this._labels[t],this},e.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},e._parseTimeOrLabel=function(t,e,i,n){var r;if(n instanceof h&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&m(n)))for(r=n.length;-1<--r;)n[r]instanceof h&&n[r].timeline===this&&this.remove(n[r]);if("string"==typeof e)return this._parseTimeOrLabel(e,i&&"number"==typeof t&&null==this._labels[e]?t-this.duration():0,i);if(e=e||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(-1===(r=t.indexOf("=")))return null==this._labels[t]?i?this._labels[t]=this.duration()+e:e:this._labels[t]+e;e=parseInt(t.charAt(r-1)+"1",10)*Number(t.substr(r+1)),t=1<r?this._parseTimeOrLabel(t.substr(0,r-1),0,i):this.duration()}return Number(t)+e},e.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},e.stop=function(){return this.paused(!0)},e.gotoAndPlay=function(t,e){return this.play(t,e)},e.gotoAndStop=function(t,e){return this.pause(t,e)},e.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,o,s,a,l=this._dirty?this.totalDuration():this._totalDuration,c=this._time,h=this._startTime,d=this._timeScale,u=this._paused;if(l<=t?(this._totalTime=this._time=l,this._reversed||this._hasPausedChild()||(r=!0,s="onComplete",0===this._duration&&(0===t||this._rawPrevTime<0||this._rawPrevTime===f)&&this._rawPrevTime!==t&&this._first&&(a=!0,this._rawPrevTime>f&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:f,t=l+1e-4):t<1e-7?(this._totalTime=this._time=0,(0!==c||0===this._duration&&this._rawPrevTime!==f&&(0<this._rawPrevTime||t<0&&0<=this._rawPrevTime))&&(s="onReverseComplete",r=this._reversed),t<0?(this._active=!1,0<=this._rawPrevTime&&this._first&&(a=!0),this._rawPrevTime=t):(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:f,t=0,this._initted||(a=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==c&&this._first||i||a){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==c&&0<t&&(this._active=!0),0===c&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||v)),this._time>=c)for(n=this._first;n&&(o=n._next,!this._paused||u);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,!this._paused||u);)(n._active||c>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;this._onUpdate&&(e||(y.length&&_(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||v))),s&&(this._gc||(h===this._startTime||d!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(r&&(y.length&&_(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||v)))}},e._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof p&&t._hasPausedChild())return!0;t=t._next}return!1},e.getChildren=function(t,e,i,n){n=n||-9999999999;for(var r=[],o=this._first,s=0;o;)n>o._startTime||(o instanceof u?!1!==e&&(r[s++]=o):(!1!==i&&(r[s++]=o),!1!==t&&(s=(r=r.concat(o.getChildren(!0,e,i))).length))),o=o._next;return r},e.getTweensOf=function(t,e){var i,n,r=this._gc,o=[],s=0;for(r&&this._enabled(!0,!0),n=(i=u.getTweensOf(t)).length;-1<--n;)(i[n].timeline===this||e&&this._contains(i[n]))&&(o[s++]=i[n]);return r&&this._enabled(!1,!0),o},e.recent=function(){return this._recent},e._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},e.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,o=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in o)o[n]>=i&&(o[n]+=t);return this._uncache(!0)},e._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;-1<--n;)i[n]._kill(t,e)&&(r=!0);return r},e.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;-1<--i;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},e.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return h.prototype.invalidate.call(this)},e._enabled=function(t,e){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return d.prototype._enabled.call(this,t,e)},e.totalTime=function(){this._forcingPlayhead=!0;var t=h.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,t},e.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},e.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this._last,o=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):o=r._startTime,r._startTime<0&&!r._paused&&(n-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),n<(i=r._startTime+r._totalDuration/r._timeScale)&&(n=i),r=e;this._duration=this._totalDuration=n,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},e.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===h._rootFramesTimeline},e.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},p},!0),_gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,s,t){var i=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},A=1e-10,C=[],n=s._internals,E=n.lazyTweens,S=n.lazyRender,a=new t(null,null,1,0),r=i.prototype=new e;return r.constructor=i,r.kill()._gc=!1,i.version="1.14.2",r.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},r.addCallback=function(t,e,i,n){return this.add(s.delayedCall(0,t,i,n),e)},r.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);-1<--n;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},r.tweenTo=function(t,e){var i,n,r,o={ease:a,overwrite:(e=e||{}).delay?2:1,useFrames:this.usesFrames(),immediateRender:!1};for(n in e)o[n]=e[n];return o.time=this._parseTimeOrLabel(t),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,r=new s(this,i,o),o.onStart=function(){r.target.paused(!0),r.vars.time!==r.target.time()&&i===r.duration()&&r.duration(Math.abs(r.vars.time-r.target.time())/r.target._timeScale),e.onStart&&e.onStart.apply(e.onStartScope||r,e.onStartParams||C)},r},r.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},r.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,o,s,a,l,c=this._dirty?this.totalDuration():this._totalDuration,h=this._duration,d=this._time,u=this._totalTime,p=this._startTime,f=this._timeScale,g=this._rawPrevTime,m=this._paused,y=this._cycle;if(c<=t?(this._locked||(this._totalTime=c,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,s="onComplete",0===this._duration&&(0===t||g<0||g===A)&&g!==t&&this._first&&(a=!0,A<g&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:A,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:t=(this._time=h)+1e-4):t<1e-7?(this._locked||(this._totalTime=this._cycle=0),((this._time=0)!==d||0===h&&g!==A&&(0<g||t<0&&0<=g)&&!this._locked)&&(s="onReverseComplete",r=this._reversed),t<0?(this._active=!1,0<=g&&this._first&&(a=!0),this._rawPrevTime=t):(this._rawPrevTime=h||!e||t||this._rawPrevTime===t?t:A,t=0,this._initted||(a=!0))):(0===h&&g<0&&(a=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(l=h+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=h-this._time),this._time>h?t=(this._time=h)+1e-4:this._time<0?this._time=t=0:t=this._time))),this._cycle!==y&&!this._locked){var _=this._yoyo&&0!=(1&y),v=_===(this._yoyo&&0!=(1&this._cycle)),b=this._totalTime,w=this._cycle,x=this._rawPrevTime,T=this._time;if(this._totalTime=y*h,y>this._cycle?_=!_:this._totalTime+=h,this._time=d,this._rawPrevTime=0===h?g-1e-4:g,this._cycle=y,this._locked=!0,d=_?0:h,this.render(d,e,0===h),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||C),v&&(d=_?h+1e-4:-1e-4,this.render(d,!0,!1)),this._locked=!1,this._paused&&!m)return;this._time=T,this._totalTime=b,this._cycle=w,this._rawPrevTime=x}if(this._time!==d&&this._first||i||a){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==u&&0<t&&(this._active=!0),0===u&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||C)),this._time>=d)for(n=this._first;n&&(o=n._next,!this._paused||m);)(n._active||n._startTime<=this._time&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,!this._paused||m);)(n._active||d>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;this._onUpdate&&(e||(E.length&&S(),this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||C))),s&&(this._locked||this._gc||(p===this._startTime||f!==this._timeScale)&&(0===this._time||c>=this.totalDuration())&&(r&&(E.length&&S(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this.vars[s].apply(this.vars[s+"Scope"]||this,this.vars[s+"Params"]||C)))}else u!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||C))},r.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var n,r,o=[],s=this.getChildren(t,e,i),a=0,l=s.length;for(n=0;n<l;n++)(r=s[n]).isActive()&&(o[a++]=r);return o},r.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},r.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;-1<--i;)if(t>e[i].time)return e[i].name;return null},r.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},r.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},r.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},r.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},r.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},r.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},r.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},r.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},i},!0),T=180/Math.PI,w=[],x=[],A=[],y={},_=function(t,e,i,n){this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},C=function(t,e,i,n){var r={a:t},o={},s={},a={c:n},l=(t+e)/2,c=(e+i)/2,h=(i+n)/2,d=(l+c)/2,u=(c+h)/2,p=(u-d)/8;return r.b=l+(t-l)/4,o.b=d+p,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(d+u)/2,s.b=u-p,a.b=h+(n-h)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},v=function(t,e,i,n,r){var o,s,a,l,c,h,d,u,p,f,g,m,y,_=t.length-1,v=0,b=t[0].a;for(o=0;o<_;o++)s=(c=t[v]).a,a=c.d,l=t[v+1].d,r?(g=w[o],y=.25*((m=x[o])+g)*e/(n?.5:A[o]||.5),u=a-((h=a-(a-s)*(n?.5*e:0!==g?y/g:0))+(((d=a+(l-a)*(n?.5*e:0!==m?y/m:0))-h)*(3*g/(g+m)+.5)/4||0))):u=a-((h=a-.5*(a-s)*e)+(d=a+.5*(l-a)*e))/2,h+=u,d+=u,c.c=p=h,c.b=0!==o?b:b=c.a+.6*(c.c-c.a),c.da=a-s,c.ca=p-s,c.ba=b-s,i?(f=C(s,b,p,a),t.splice(v,1,f[0],f[1],f[2],f[3]),v+=4):v++,b=d;(c=t[v]).b=b,c.c=b+.4*(c.d-b),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=b-c.a,i&&(f=C(c.a,b,c.c,c.d),t.splice(v,1,f[0],f[1],f[2],f[3]))},b=function(t,e,i,n){var r,o,s,a,l,c,h=[];if(n)for(o=(t=[n].concat(t)).length;-1<--o;)"string"==typeof(c=t[o][e])&&"="===c.charAt(1)&&(t[o][e]=n[e]+Number(c.charAt(0)+c.substr(2)));if((r=t.length-2)<0)return h[0]=new _(t[0][e],0,0,t[r<-1?0:1][e]),h;for(o=0;o<r;o++)s=t[o][e],a=t[o+1][e],h[o]=new _(s,0,0,a),i&&(l=t[o+2][e],w[o]=(w[o]||0)+(a-s)*(a-s),x[o]=(x[o]||0)+(l-a)*(l-a));return h[o]=new _(t[o][e],0,0,t[o+1][e]),h},p=function(t,e,i,n,r,o){var s,a,l,c,h,d,u,p,f={},g=[],m=o||t[0];for(a in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])g.push(a);if(1<t.length){for(p=t[t.length-1],u=!0,s=g.length;-1<--s;)if(a=g[s],.05<Math.abs(m[a]-p[a])){u=!1;break}u&&(t=t.concat(),o&&t.unshift(o),t.push(t[1]),o=t[t.length-3])}for(w.length=x.length=A.length=0,s=g.length;-1<--s;)a=g[s],y[a]=-1!==r.indexOf(","+a+","),f[a]=b(t,a,y[a],o);for(s=w.length;-1<--s;)w[s]=Math.sqrt(w[s]),x[s]=Math.sqrt(x[s]);if(!n){for(s=g.length;-1<--s;)if(y[a])for(d=(l=f[g[s]]).length-1,c=0;c<d;c++)h=l[c+1].da/x[c]+l[c].da/w[c],A[c]=(A[c]||0)+h*h;for(s=A.length;-1<--s;)A[s]=Math.sqrt(A[s])}for(s=g.length,c=i?4:1;-1<--s;)l=f[a=g[s]],v(l,e,i,n,y[a]),u&&(l.splice(0,c),l.splice(l.length-c,c));return f},f=function(t,e,i){for(var n,r,o,s,a,l,c,h,d,u,p,f=1/i,g=t.length;-1<--g;)for(o=(u=t[g]).a,s=u.d-o,a=u.c-o,l=u.b-o,n=r=0,h=1;h<=i;h++)n=r-(r=((c=f*h)*c*s+3*(d=1-c)*(c*a+d*l))*c),e[p=g*i+h-1]=(e[p]||0)+n*n},m=_gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.3",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,o,s,a,l=e.values||[],c={},h=l[0],d=e.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null,h)this._props.push(n);for(o=this._props.length;-1<--o;)n=this._props[o],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],c[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||c[n]!==l[0][n]&&(a=c);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?p(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):function(t,e,i){var n,r,o,s,a,l,c,h,d,u,p,f={},g="cubic"===(e=e||"soft")?3:2,m="soft"===e,y=[];if(m&&i&&(t=[i].concat(t)),null==t||g+1>t.length)throw"invalid Bezier data";for(d in t[0])y.push(d);for(l=y.length;-1<--l;){for(f[d=y[l]]=a=[],u=0,h=t.length,c=0;c<h;c++)n=null==i?t[c][d]:"string"==typeof(p=t[c][d])&&"="===p.charAt(1)?i[d]+Number(p.charAt(0)+p.substr(2)):Number(p),m&&1<c&&c<h-1&&(a[u++]=(n+a[u-2])/2),a[u++]=n;for(h=u-g+1,c=u=0;c<h;c+=g)n=a[c],r=a[c+1],o=a[c+2],s=2===g?0:a[c+3],a[u++]=p=3===g?new _(n,r,o,s):new _(n,(2*r+n)/3,(2*r+o)/3,o);a.length=u}return f}(l,e.type,c),this._segCount=this._beziers[n].length,this._timeRes){var u=function(t,e){var i,n,r,o,s=[],a=[],l=0,c=0,h=(e=e>>0||6)-1,d=[],u=[];for(i in t)f(t[i],s,e);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),u[o=n%e]=l,o===h&&(c+=l,d[o=n/e>>0]=u,a[o]=c,l=0,u=[]);return{length:c,lengths:a,segments:d}}(this._beziers,this._timeRes);this._length=u.length,this._lengths=u.lengths,this._segments=u.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),o=d.length;-1<--o;){for(s=0;s<3;s++)n=d[o][s],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=d[o][2],this._initialRotations[o]=this._func[n]?this._func[n].call(this._target):this._target[n]}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var e,i,n,r,o,s,a,l,c,h,d=this._segCount,u=this._func,p=this._target,f=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,h=this._curSeg,t*=this._length,n=this._li,t>this._l2&&n<d-1){for(l=d-1;n<l&&t>=(this._l2=c[++n]););this._l1=c[n-1],this._li=n,this._curSeg=h=this._segments[n],this._s2=h[this._s1=this._si=0]}else if(this._l1>t&&0<n){for(;0<n&&(this._l1=c[--n])>=t;);0===n&&this._l1>t?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=h=this._segments[n],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(e=n,t-=this._l1,n=this._si,t>this._s2&&h.length-1>n){for(l=h.length-1;n<l&&t>=(this._s2=h[++n]););this._s1=h[n-1],this._si=n}else if(this._s1>t&&0<n){for(;0<n&&(this._s1=h[--n])>=t;);0===n&&this._s1>t?this._s1=0:n++,this._s2=h[n],this._si=n}s=(n+(t-this._s1)/(this._s2-this._s1))*this._prec}else s=(t-(e=t<0?0:1<=t?d-1:d*t>>0)*(1/d))*d;for(i=1-s,n=this._props.length;-1<--n;)r=this._props[n],a=(s*s*(o=this._beziers[r][e]).da+3*i*(s*o.ca+i*o.ba))*s+o.a,this._round[r]&&(a=Math.round(a)),u[r]?p[r](a):p[r]=a;if(this._autoRotate){var g,m,y,_,v,b,w,x=this._autoRotate;for(n=x.length;-1<--n;)r=x[n][2],b=x[n][3]||0,w=!0===x[n][4]?1:T,o=this._beziers[x[n][0]],g=this._beziers[x[n][1]],o&&g&&(o=o[e],g=g[e],m=o.a+(o.b-o.a)*s,m+=((_=o.b+(o.c-o.b)*s)-m)*s,_+=(o.c+(o.d-o.c)*s-_)*s,y=g.a+(g.b-g.a)*s,y+=((v=g.b+(g.c-g.b)*s)-y)*s,v+=(g.c+(g.d-g.c)*s-v)*s,a=f?Math.atan2(v-y,_-m)*w+b:this._initialRotations[n],u[r]?p[r](a):p[r]=a)}}}),e=m.prototype,m.bezierThrough=p,m.cubicToQuadratic=C,m._autoCSS=!0,m.quadraticToCubic=function(t,e,i){return new _(t,(2*e+t)/3,(2*e+i)/3,i)},m._cssRegister=function(){var t=_gsScope._gsDefine.globals.CSSPlugin;if(t){var e=t._internals,p=e._parseToProxy,f=e._setPluginRatio,g=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,i,n,r,o){e instanceof Array&&(e={values:e}),o=new m;var s,a,l,c=e.values,h=c.length-1,d=[],u={};if(h<0)return r;for(s=0;s<=h;s++)l=p(t,c[s],n,r,o,h!==s),d[s]=l.end;for(a in e)u[a]=e[a];return u.values=d,(r=new g(t,"bezier",0,0,l.pt,2)).data=l,r.plugin=o,r.setRatio=f,0===u.autoRotate&&(u.autoRotate=!0),!u.autoRotate||u.autoRotate instanceof Array||(s=!0===u.autoRotate?0:Number(u.autoRotate),u.autoRotate=null!=l.end.left?[["left","top","rotation",s,!1]]:null!=l.end.x&&[["x","y","rotation",s,!1]]),u.autoRotate&&(n._transform||n._enableTransforms(!1),l.autoRotate=n._target._gsTransform),o._onInitTween(l.proxy,u,n._tween),r}})}},e._roundProps=function(t,e){for(var i=this._overwriteProps,n=i.length;-1<--n;)(t[i[n]]||t.bezier||t.bezierThrough)&&(this._round[i[n]]=e)},e._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;-1<--i;)n[i]===e&&n.splice(i,1);return this._super._kill.call(this,t)},_gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(o,u){var f,T,tt,p,et=function(){o.call(this,"css"),this._overwriteProps.length=0,this.setRatio=et.prototype.setRatio},g={},t=et.prototype=new o("css");(t.constructor=et).version="1.14.2",et.API=2,et.defaultTransformPerspective=0,et.defaultSkewType="compensated",t="px",et.suffixMap={top:t,right:t,bottom:t,left:t,width:t,height:t,fontSize:t,padding:t,margin:t,perspective:t,lineHeight:""};var E,m,y,R,_,C,e,i,n,S=/(?:\d|\-\d|\.\d|\-\.\d)+/g,O=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,v=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,h=/(?![+-]?\d*\.?\d+|e[+-]\d+)[^0-9]/g,M=/(?:\d|\-|\+|=|#|\.)*/g,L=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,s=/alpha\(opacity *=.+?\)/i,k=/^(rgb|hsl)/,a=/([A-Z])/g,l=/-([a-z])/gi,w=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,c=function(t,e){return e.toUpperCase()},x=/(?:Left|Right|Width)/i,it=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,I=/,(?=[^\)]*(?:\(|$))/gi,nt=Math.PI/180,rt=180/Math.PI,A={},P=document,B=P.createElement("div"),H=P.createElement("img"),r=et._internals={_specialProps:g},d=navigator.userAgent,j=(i=d.indexOf("Android"),n=P.createElement("div"),y=-1!==d.indexOf("Safari")&&-1===d.indexOf("Chrome")&&(-1===i||3<Number(d.substr(i+8,1))),_=y&&Number(d.substr(d.indexOf("Version/")+8,1))<6,R=-1!==d.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(d)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(d))&&(C=parseFloat(RegExp.$1)),n.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",!!(e=n.getElementsByTagName("a")[0])&&/^0.55/.test(e.style.opacity)),W=function(t){return L.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},N=function(t){window.console&&console.log(t)},F="",z="",U=function(t,e){var i,n,r=(e=e||B).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],n=5;-1<--n&&void 0===r[i[n]+t];);return 0<=n?(F="-"+(z=3===n?"ms":i[n]).toLowerCase()+"-",z+t):null},Y=P.defaultView?P.defaultView.getComputedStyle:function(){},ot=et.getStyle=function(t,e,i,n,r){var o;return j||"opacity"!==e?(!n&&t.style[e]?o=t.style[e]:(i=i||Y(t))?o=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(a,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):W(t)},X=r.convertToPixels=function(t,e,i,n,r){if("px"===n||!n)return i;if("auto"===n||!i)return 0;var o,s,a,l=x.test(e),c=t,h=B.style,d=i<0;if(d&&(i=-i),"%"===n&&-1!==e.indexOf("border"))o=i/100*(l?t.clientWidth:t.clientHeight);else{if(h.cssText="border:0 solid red;position:"+ot(t,"position")+";line-height:0;","%"!==n&&c.appendChild)h[l?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(s=(c=t.parentNode||P.body)._gsCache,a=u.ticker.frame,s&&l&&s.time===a)return s.width*i/100;h[l?"width":"height"]=i+n}c.appendChild(B),o=parseFloat(B[l?"offsetWidth":"offsetHeight"]),c.removeChild(B),l&&"%"===n&&!1!==et.cacheWidths&&((s=c._gsCache=c._gsCache||{}).time=a,s.width=o/i*100),0!==o||r||(o=X(t,e,i,n,!0))}return d?-o:o},G=r.calculateOffset=function(t,e,i){if("absolute"!==ot(t,"position",i))return 0;var n="left"===e?"Left":"Top",r=ot(t,"margin"+n,i);return t["offset"+n]-(X(t,e,parseFloat(r),r.replace(M,""))||0)},V=function(t,e){var i,n,r={};if(e=e||Y(t,null))if(i=e.length)for(;-1<--i;)r[e[i].replace(l,c)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===r[i]&&(r[i.replace(l,c)]=e[i]);return j||(r.opacity=W(t)),n=Ht(t,e,!1),r.rotation=n.rotation,r.skewX=n.skewX,r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.x=n.x,r.y=n.y,Lt&&(r.z=n.z,r.rotationX=n.rotationX,r.rotationY=n.rotationY,r.scaleZ=n.scaleZ),r.filters&&delete r.filters,r},q=function(t,e,i,n,r){var o,s,a,l={},c=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(o=i[s])||r&&r[s])&&-1===s.indexOf("Origin")&&("number"==typeof o||"string"==typeof o)&&(l[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[s]||""===e[s].replace(h,"")?o:0:G(t,s),void 0!==c[s]&&(a=new ft(c,s,c[s],a)));if(n)for(s in n)"className"!==s&&(l[s]=n[s]);return{difs:l,firstMPT:a}},J={width:["Left","Right"],height:["Top","Bottom"]},K=["marginLeft","marginRight","marginTop","marginBottom"],Q=function(t,e,i){var n=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=J[e],o=r.length;for(i=i||Y(t,null);-1<--o;)n-=parseFloat(ot(t,"padding"+r[o],i,!0))||0,n-=parseFloat(ot(t,"border"+r[o]+"Width",i,!0))||0;return n},Z=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(n.replace(h,"")),e.oy=parseFloat(r.replace(h,""))),n+" "+r+(2<i.length?" "+i[2]:"")},$=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},st=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)},at=function(t,e,i,n){var r,o,s,a;return null==t?a=e:"number"==typeof t?a=t:(r=360,o=t.split("_"),s=Number(o[0].replace(h,""))*(-1===t.indexOf("rad")?1:rt)-("="===t.charAt(1)?0:e),o.length&&(n&&(n[i]=e+s),-1!==t.indexOf("short")&&((s%=r)!==s%180&&(s=s<0?s+r:s-r)),-1!==t.indexOf("_cw")&&s<0?s=(s+3599999999640)%r-(0|s/r)*r:-1!==t.indexOf("ccw")&&0<s&&(s=(s-3599999999640)%r-(0|s/r)*r)),a=e+s),a<1e-6&&-1e-6<a&&(a=0),a},lt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ct=function(t,e,i){return 0|255*(6*(t=t<0?t+1:1<t?t-1:t)<1?e+6*(i-e)*t:t<.5?i:3*t<2?e+6*(i-e)*(2/3-t):e)+.5},ht=et.parseColor=function(t){var e,i,n,r,o,s;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),lt[t]?lt[t]:"#"===t.charAt(0)?(4===t.length&&(t="#"+(e=t.charAt(1))+e+(i=t.charAt(2))+i+(n=t.charAt(3))+n),[(t=parseInt(t.substr(1),16))>>16,255&t>>8,255&t]):("hsl"===t.substr(0,3)?(t=t.match(S),r=Number(t[0])%360/360,o=Number(t[1])/100,e=2*(s=Number(t[2])/100)-(i=s<=.5?s*(o+1):s+o-s*o),3<t.length&&(t[3]=Number(t[3])),t[0]=ct(r+1/3,e,i),t[1]=ct(r,e,i),t[2]=ct(r-1/3,e,i)):((t=t.match(S)||lt.transparent)[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),3<t.length&&(t[3]=Number(t[3]))),t)):lt.black},dt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(t in lt)dt+="|"+t+"\\b";dt=RegExp(dt+")","gi");var ut=function(t,e,o,s){if(null==t)return function(t){return t};var a,l=e?(t.match(dt)||[""])[0]:"",c=t.split(l).join("").match(v)||[],h=t.substr(0,t.indexOf(c[0])),d=")"===t.charAt(t.length-1)?")":"",u=-1!==t.indexOf(" ")?" ":",",p=c.length,f=0<p?c[0].replace(S,""):"";return p?a=e?function(t){var e,i,n,r;if("number"==typeof t)t+=f;else if(s&&I.test(t)){for(r=t.replace(I,"|").split("|"),n=0;r.length>n;n++)r[n]=a(r[n]);return r.join(",")}if(e=(t.match(dt)||[l])[0],n=(i=t.split(e).join("").match(v)||[]).length,p>n--)for(;p>++n;)i[n]=o?i[0|(n-1)/2]:c[n];return h+i.join(u)+u+e+d+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,i,n;if("number"==typeof t)t+=f;else if(s&&I.test(t)){for(i=t.replace(I,"|").split("|"),n=0;i.length>n;n++)i[n]=a(i[n]);return i.join(",")}if(n=(e=t.match(v)||[]).length,p>n--)for(;p>++n;)e[n]=o?e[0|(n-1)/2]:c[n];return h+e.join(u)+d}:function(t){return t}},pt=function(c){return c=c.split(","),function(t,e,i,n,r,o,s){var a,l=(e+"").split(" ");for(s={},a=0;a<4;a++)s[c[a]]=l[a]=l[a]||l[(a-1)/2>>0];return n.parse(t,s,r,o)}},ft=(r._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,n,r,o=this.data,s=o.proxy,a=o.firstMPT;a;)e=s[a.v],a.r?e=Math.round(e):e<1e-6&&-1e-6<e&&(e=0),a.t[a.p]=e,a=a._next;if(o.autoRotate&&(o.autoRotate.rotation=s.rotation),1===t)for(a=o.firstMPT;a;){if((i=a.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,n=1;i.l>n;n++)r+=i["xn"+n]+i["xs"+(n+1)];i.e=r}}else i.e=i.s+i.xs0;a=a._next}},function(t,e,i,n,r){this.t=t,this.p=e,this.v=i,this.r=r,n&&((n._prev=this)._next=n)}),gt=(r._parseToProxy=function(t,e,i,n,r,o){var s,a,l,c,h,d=n,u={},p={},f=i._transform,g=A;for(i._transform=null,A=e,n=h=i.parse(t,e,n,r),A=g,o&&(i._transform=f,d&&(d._prev=null,d._prev&&(d._prev._next=null)));n&&n!==d;){if(n.type<=1&&(p[a=n.p]=n.s+n.c,u[a]=n.s,o||(c=new ft(n,"s",a,c,n.r),n.c=0),1===n.type))for(s=n.l;0<--s;)l="xn"+s,p[a=n.p+"_"+l]=n.data[l],u[a]=n[l],o||(c=new ft(n,l,a,c,n.rxp[l]));n=n._next}return{proxy:u,end:p,firstMPT:c,pt:h}},r.CSSPropTween=function(t,e,i,n,r,o,s,a,l,c,h){this.t=t,this.p=e,this.s=i,this.c=n,this.n=s||e,t instanceof gt||p.push(this.n),this.r=a,this.type=o||0,l&&(this.pr=l,f=!0),this.b=void 0===c?i:c,this.e=void 0===h?i+n:h,r&&((this._next=r)._prev=this)}),mt=et.parseComplex=function(t,e,i,n,r,o,s,a,l,c){s=new gt(t,e,0,0,s,c?2:1,null,!1,a,i=i||o||"",n),n+="";var h,d,u,p,f,g,m,y,_,v,b,w,x=i.split(", ").join(",").split(" "),T=n.split(", ").join(",").split(" "),A=x.length,C=!1!==E;for((-1!==n.indexOf(",")||-1!==i.indexOf(","))&&(x=x.join(" ").replace(I,", ").split(" "),T=T.join(" ").replace(I,", ").split(" "),A=x.length),A!==T.length&&(A=(x=(o||"").split(" ")).length),s.plugin=l,s.setRatio=c,h=0;h<A;h++)if(p=x[h],f=T[h],(y=parseFloat(p))||0===y)s.appendXtra("",y,$(f,y),f.replace(O,""),C&&-1!==f.indexOf("px"),!0);else if(r&&("#"===p.charAt(0)||lt[p]||k.test(p)))w=","===f.charAt(f.length-1)?"),":")",p=ht(p),f=ht(f),(_=6<p.length+f.length)&&!j&&0===f[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(T[h]).join("transparent")):(j||(_=!1),s.appendXtra(_?"rgba(":"rgb(",p[0],f[0]-p[0],",",!0,!0).appendXtra("",p[1],f[1]-p[1],",",!0).appendXtra("",p[2],f[2]-p[2],_?",":w,!0),_&&(p=p.length<4?1:p[3],s.appendXtra("",p,(f.length<4?1:f[3])-p,w,!1)));else if(g=p.match(S)){if(!(m=f.match(O))||m.length!==g.length)return s;for(d=u=0;g.length>d;d++)b=g[d],v=p.indexOf(b,u),s.appendXtra(p.substr(u,v-u),Number(b),$(m[d],b),"",C&&"px"===p.substr(v+b.length,2),0===d),u=v+b.length;s["xs"+s.l]+=p.substr(u)}else s["xs"+s.l]+=s.l?" "+p:p;if(-1!==n.indexOf("=")&&s.data){for(w=s.xs0+s.data.s,h=1;s.l>h;h++)w+=s["xs"+h]+s.data["xn"+h];s.e=w+s["xs"+h]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},yt=9;for((t=gt.prototype).l=t.pr=0;0<--yt;)t["xn"+yt]=0,t["xs"+yt]="";t.xs0="",t._next=t._prev=t.xfirst=t.data=t.plugin=t.setRatio=t.rxp=null,t.appendXtra=function(t,e,i,n,r,o){var s=this,a=s.l;return s["xs"+a]+=o&&a?" "+t:t||"",i||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=n||"",0<a?(s.data["xn"+a]=e+i,s.rxp["xn"+a]=r,s["xn"+a]=e,s.plugin||(s.xfirst=new gt(s,"xn"+a,e,i,s.xfirst||s,0,s.n,r,s.pr),s.xfirst.xs0=0)):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=r)):s["xs"+a]+=e+(n||""),s};var _t=function(t,e){e=e||{},this.p=e.prefix&&U(t)||t,g[t]=g[this.p]=this,this.format=e.formatter||ut(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},vt=r._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var n,r=t.split(","),o=e.defaultValue;for(i=i||[o],n=0;r.length>n;n++)e.prefix=0===n&&e.prefix,e.defaultValue=i[n]||o,new _t(r[n],e)},bt=function(t){if(!g[t]){var l=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";vt(t,{parser:function(t,e,i,n,r,o,s){var a=(_gsScope.GreenSockGlobals||_gsScope).com.greensock.plugins[l];return a?(a._cssRegister(),g[i].parse(t,e,i,n,r,o,s)):(N("Error: "+l+" js file not loaded."),r)}})}};(t=_t.prototype).parseComplex=function(t,e,i,n,r,o){var s,a,l,c,h,d=this.keyword;if(this.multi&&(I.test(i)||I.test(e)?(a=e.replace(I,"|").split("|"),l=i.replace(I,"|").split("|")):d&&(a=[e],l=[i])),l){for(c=l.length>a.length?l.length:a.length,s=0;s<c;s++)e=a[s]=a[s]||this.dflt,i=l[s]=l[s]||this.dflt,d&&(e.indexOf(d)!==(h=i.indexOf(d))&&((i=-1===h?l:a)[s]+=" "+d));e=a.join(", "),i=l.join(", ")}return mt(t,this.p,e,i,this.clrs,this.dflt,n,this.pr,r,o)},t.parse=function(t,e,i,n,r,o){return this.parseComplex(t.style,this.format(ot(t,this.p,tt,!1,this.dflt)),this.format(e),r,o)},et.registerSpecialProp=function(t,a,l){vt(t,{parser:function(t,e,i,n,r,o){var s=new gt(t,i,0,0,r,2,i,!1,l);return s.plugin=o,s.setRatio=a(t,e,n._tween,i),s},priority:l})};var wt,xt,Tt,At,Ct,Et="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),St=U("transform"),Ot=F+"transform",Mt=U("transformOrigin"),Lt=null!==U("perspective"),kt=r.Transform=function(){this.skewY=0},Dt=window.SVGElement,It=function(t,e,i){var n,r=P.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(n in i)r.setAttributeNS(null,n.replace(o,"$1-$2").toLowerCase(),i[n]);return e.appendChild(r),r},Rt=document.documentElement,Pt=(Ct=C||/Android/i.test(d)&&!window.chrome,P.createElementNS&&!Ct&&(xt=It("svg",Rt),At=(Tt=It("rect",xt,{width:100,height:50,x:100})).getBoundingClientRect().left,Tt.style[Mt]="50% 50%",Tt.style[St]="scale(0.5,0.5)",Ct=At===Tt.getBoundingClientRect().left,Rt.removeChild(xt)),Ct),Bt=function(t,e,i){var n=t.getBBox();e=Z(e).split(" "),i.xOrigin=(-1!==e[0].indexOf("%")?parseFloat(e[0])/100*n.width:parseFloat(e[0]))+n.x,i.yOrigin=(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*n.height:parseFloat(e[1]))+n.y},Ht=r.getTransform=function(t,e,i,n){if(t._gsTransform&&i&&!n)return t._gsTransform;var r,o,s,a,l,c,h,d,u,p,f,g,m,y=i&&t._gsTransform||new kt,_=y.scaleX<0,v=2e-5,b=1e5,w=179.99,x=w*nt,T=Lt&&(parseFloat(ot(t,Mt,e,!1,"0 0 0").split(" ")[2])||y.zOrigin)||0,A=parseFloat(et.defaultTransformPerspective)||0;if(St?r=ot(t,Ot,e,!0):t.currentStyle&&(r=(r=t.currentStyle.filter.match(it))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),y.x||0,y.y||0].join(","):""),r&&"none"!==r&&"matrix(1, 0, 0, 1, 0, 0)"!==r){for(s=(o=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[]).length;-1<--s;)a=Number(o[s]),o[s]=(l=a-(a|=0))?(0|l*b+(l<0?-.5:.5))/b+a:a;if(16===o.length){var C=o[8],E=o[9],S=o[10],O=o[12],M=o[13],L=o[14];if(y.zOrigin&&(O=C*(L=-y.zOrigin)-o[12],M=E*L-o[13],L=S*L+y.zOrigin-o[14]),!i||n||null==y.rotationX){var k,D,I,R,P,B,H,j=o[0],W=o[1],N=o[2],F=o[3],z=o[4],U=o[5],Y=o[6],X=o[7],G=o[11],V=Math.atan2(Y,S),q=V<-x||x<V;y.rotationX=V*rt,V&&(k=z*(R=Math.cos(-V))+C*(P=Math.sin(-V)),D=U*R+E*P,I=Y*R+S*P,C=z*-P+C*R,E=U*-P+E*R,S=Y*-P+S*R,G=X*-P+G*R,z=k,U=D,Y=I),V=Math.atan2(C,j),y.rotationY=V*rt,V&&(B=V<-x||x<V,D=W*(R=Math.cos(-V))-E*(P=Math.sin(-V)),I=N*R-S*P,E=W*P+E*R,S=N*P+S*R,G=F*P+G*R,j=k=j*R-C*P,W=D,N=I),V=Math.atan2(W,U),y.rotation=V*rt,V&&(H=V<-x||x<V,j=j*(R=Math.cos(-V))+z*(P=Math.sin(-V)),D=W*R+U*P,U=W*-P+U*R,Y=N*-P+Y*R,W=D),H&&q?y.rotation=y.rotationX=0:H&&B?y.rotation=y.rotationY=0:B&&q&&(y.rotationY=y.rotationX=0),y.scaleX=(0|Math.sqrt(j*j+W*W)*b+.5)/b,y.scaleY=(0|Math.sqrt(U*U+E*E)*b+.5)/b,y.scaleZ=(0|Math.sqrt(Y*Y+S*S)*b+.5)/b,y.skewX=0,y.perspective=G?1/(G<0?-G:G):0,y.x=O,y.y=M,y.z=L}}else if(!(Lt&&!n&&o.length&&y.x===o[4]&&y.y===o[5]&&(y.rotationX||y.rotationY)||void 0!==y.x&&"none"===ot(t,"display",e))){var J=6<=o.length,K=J?o[0]:1,Q=o[1]||0,Z=o[2]||0,$=J?o[3]:1;y.x=o[4]||0,y.y=o[5]||0,c=Math.sqrt(K*K+Q*Q),h=Math.sqrt($*$+Z*Z),d=K||Q?Math.atan2(Q,K)*rt:y.rotation||0,u=Z||$?Math.atan2(Z,$)*rt+d:y.skewX||0,p=c-Math.abs(y.scaleX||0),f=h-Math.abs(y.scaleY||0),90<Math.abs(u)&&Math.abs(u)<270&&(_?(c*=-1,u+=d<=0?180:-180,d+=d<=0?180:-180):(h*=-1,u+=u<=0?180:-180)),g=(d-y.rotation)%180,m=(u-y.skewX)%180,(void 0===y.skewX||v<p||p<-v||v<f||f<-v||-w<g&&g<w&&!1|g*b||-w<m&&m<w&&!1|m*b)&&(y.scaleX=c,y.scaleY=h,y.rotation=d,y.skewX=u),Lt&&(y.rotationX=y.rotationY=y.z=0,y.perspective=A,y.scaleZ=1)}for(s in y.zOrigin=T,y)v>y[s]&&y[s]>-v&&(y[s]=0)}else y={x:0,y:0,z:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,perspective:A,rotation:0,rotationX:0,rotationY:0,zOrigin:0};return i&&(t._gsTransform=y),y.svg=Dt&&t instanceof Dt&&t.parentNode instanceof Dt,y.svg&&(Bt(t,ot(t,Mt,tt,!1,"50% 50%")+"",y),wt=et.useSVGTransformAttr||Pt),y.xPercent=y.yPercent=0,y},jt=function(t){var e,i,n=this.data,r=-n.rotation*nt,o=r+n.skewX*nt,s=1e5,a=(0|Math.cos(r)*n.scaleX*s)/s,l=(0|Math.sin(r)*n.scaleX*s)/s,c=(0|Math.sin(o)*-n.scaleY*s)/s,h=(0|Math.cos(o)*n.scaleY*s)/s,d=this.t.style,u=this.t.currentStyle;if(u){i=l,l=-c,c=-i,e=u.filter,d.filter="";var p,f,g=this.t.offsetWidth,m=this.t.offsetHeight,y="absolute"!==u.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+c+", M22="+h,v=n.x+g*n.xPercent/100,b=n.y+m*n.yPercent/100;if(null!=n.ox&&(v+=(p=(n.oxp?.01*g*n.ox:n.ox)-g/2)-(p*a+(f=(n.oyp?.01*m*n.oy:n.oy)-m/2)*l),b+=f-(p*c+f*h)),y?_+=", Dx="+((p=g/2)-(p*a+(f=m/2)*l)+v)+", Dy="+(f-(p*c+f*h)+b)+")":_+=", sizingMethod='auto expand')",d.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(D,_):_+" "+e,(0===t||1===t)&&1===a&&0===l&&0===c&&1===h&&(y&&-1===_.indexOf("Dx=0, Dy=0")||L.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&d.removeAttribute("filter")),!y){var w,x,T,A=C<8?1:-1;for(p=n.ieOffsetX||0,f=n.ieOffsetY||0,n.ieOffsetX=Math.round((g-((a<0?-a:a)*g+(l<0?-l:l)*m))/2+v),n.ieOffsetY=Math.round((m-((h<0?-h:h)*m+(c<0?-c:c)*g))/2+b),yt=0;yt<4;yt++)T=(i=-1!==(w=u[x=K[yt]]).indexOf("px")?parseFloat(w):X(this.t,x,parseFloat(w),w.replace(M,""))||0)!==n[x]?yt<2?-n.ieOffsetX:-n.ieOffsetY:yt<2?p-n.ieOffsetX:f-n.ieOffsetY,d[x]=(n[x]=Math.round(i-T*(0===yt||2===yt?1:A)))+"px"}}},Wt=r.set3DTransformRatio=function(t){var e,i,n,r,o,s,a,l,c,h,d,u,p,f,g,m,y,_,v,b,w,x,T,A=this.data,C=this.t.style,E=A.rotation*nt,S=A.scaleX,O=A.scaleY,M=A.scaleZ,L=A.x,k=A.y,D=A.z,I=A.perspective;if(1!==t&&0!==t||"auto"!==A.force3D||A.rotationY||A.rotationX||1!==M||I||D){if(R){S<1e-4&&-1e-4<S&&(S=M=2e-5),O<1e-4&&-1e-4<O&&(O=M=2e-5),!I||A.z||A.rotationX||A.rotationY||(I=0)}if(E||A.skewX)e=_=Math.cos(E),o=v=Math.sin(E),A.skewX&&(E-=A.skewX*nt,_=Math.cos(E),v=Math.sin(E),"simple"===A.skewType&&(b=Math.tan(A.skewX*nt),_*=b=Math.sqrt(1+b*b),v*=b)),i=-v,s=_;else{if(!(A.rotationY||A.rotationX||1!==M||I||A.svg))return void(C[St]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) translate3d(":"translate3d(")+L+"px,"+k+"px,"+D+"px)"+(1!==S||1!==O?" scale("+S+","+O+")":""));e=s=1,i=o=0}d=1,n=r=a=l=c=h=u=p=f=0,g=I?-1/I:0,m=A.zOrigin,y=1e5,(E=A.rotationY*nt)&&(_=Math.cos(E),c=d*-(v=Math.sin(E)),p=g*-v,n=e*v,a=o*v,d*=_,g*=_,e*=_,o*=_),(E=A.rotationX*nt)&&(b=i*(_=Math.cos(E))+n*(v=Math.sin(E)),w=s*_+a*v,x=h*_+d*v,T=f*_+g*v,n=i*-v+n*_,a=s*-v+a*_,d=h*-v+d*_,g=f*-v+g*_,i=b,s=w,h=x,f=T),1!==M&&(n*=M,a*=M,d*=M,g*=M),1!==O&&(i*=O,s*=O,h*=O,f*=O),1!==S&&(e*=S,o*=S,c*=S,p*=S),m&&(r=n*(u-=m),l=a*u,u=d*u+m),A.svg&&(r+=A.xOrigin-(A.xOrigin*e+A.yOrigin*i),l+=A.yOrigin-(A.xOrigin*o+A.yOrigin*s)),r=(b=(r+=L)-(r|=0))?(0|b*y+(b<0?-.5:.5))/y+r:r,l=(b=(l+=k)-(l|=0))?(0|b*y+(b<0?-.5:.5))/y+l:l,u=(b=(u+=D)-(u|=0))?(0|b*y+(b<0?-.5:.5))/y+u:u,C[St]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix3d(":"matrix3d(")+[(0|e*y)/y,(0|o*y)/y,(0|c*y)/y,(0|p*y)/y,(0|i*y)/y,(0|s*y)/y,(0|h*y)/y,(0|f*y)/y,(0|n*y)/y,(0|a*y)/y,(0|d*y)/y,(0|g*y)/y,r,l,u,I?1+-u/I:1].join(",")+")"}else Nt.call(this,t)},Nt=r.set2DTransformRatio=function(t){var e,i,n,r,o,s,a,l,c,h,d=this.data,u=this.t,p=u.style,f=d.x,g=d.y;return!(d.rotationX||d.rotationY||d.z||!0===d.force3D||"auto"===d.force3D&&1!==t&&0!==t)||d.svg&&wt||!Lt?(r=d.scaleX,o=d.scaleY,void(d.rotation||d.skewX||d.svg?(i=(e=d.rotation*nt)-d.skewX*nt,n=1e5,s=Math.cos(e)*r,a=Math.sin(e)*r,l=Math.sin(i)*-o,c=Math.cos(i)*o,d.svg&&((f+=d.xOrigin-(d.xOrigin*s+d.yOrigin*l))<1e-6&&-1e-6<f&&(f=0),(g+=d.yOrigin-(d.xOrigin*a+d.yOrigin*c))<1e-6&&-1e-6<g&&(g=0)),h=(0|s*n)/n+","+(0|a*n)/n+","+(0|l*n)/n+","+(0|c*n)/n+","+f+","+g+")",d.svg&&wt?u.setAttribute("transform","matrix("+h):p[St]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+h):p[St]=(d.xPercent||d.yPercent?"translate("+d.xPercent+"%,"+d.yPercent+"%) matrix(":"matrix(")+r+",0,0,"+o+","+f+","+g+")")):void(this.setRatio=Wt).call(this,t)};vt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent",{parser:function(t,e,i,n,r,o,s){if(n._transform)return r;var a,l,c,h,d,u,p,f=n._transform=Ht(t,tt,!0,s.parseTransform),g=t.style,m=Et.length,y=s,_={};if("string"==typeof y.transform&&St)(c=B.style)[St]=y.transform,c.display="block",c.position="absolute",P.body.appendChild(B),a=Ht(B,null,!1),P.body.removeChild(B);else if("object"==typeof y){if(a={scaleX:st(null!=y.scaleX?y.scaleX:y.scale,f.scaleX),scaleY:st(null!=y.scaleY?y.scaleY:y.scale,f.scaleY),scaleZ:st(y.scaleZ,f.scaleZ),x:st(y.x,f.x),y:st(y.y,f.y),z:st(y.z,f.z),xPercent:st(y.xPercent,f.xPercent),yPercent:st(y.yPercent,f.yPercent),perspective:st(y.transformPerspective,f.perspective)},null!=(p=y.directionalRotation))if("object"==typeof p)for(c in p)y[c]=p[c];else y.rotation=p;"string"==typeof y.x&&-1!==y.x.indexOf("%")&&(a.x=0,a.xPercent=st(y.x,f.xPercent)),"string"==typeof y.y&&-1!==y.y.indexOf("%")&&(a.y=0,a.yPercent=st(y.y,f.yPercent)),a.rotation=at("rotation"in y?y.rotation:"shortRotation"in y?y.shortRotation+"_short":"rotationZ"in y?y.rotationZ:f.rotation,f.rotation,"rotation",_),Lt&&(a.rotationX=at("rotationX"in y?y.rotationX:"shortRotationX"in y?y.shortRotationX+"_short":f.rotationX||0,f.rotationX,"rotationX",_),a.rotationY=at("rotationY"in y?y.rotationY:"shortRotationY"in y?y.shortRotationY+"_short":f.rotationY||0,f.rotationY,"rotationY",_)),a.skewX=null==y.skewX?f.skewX:at(y.skewX,f.skewX),a.skewY=null==y.skewY?f.skewY:at(y.skewY,f.skewY),(l=a.skewY-f.skewY)&&(a.skewX+=l,a.rotation+=l)}for(Lt&&null!=y.force3D&&(f.force3D=y.force3D,u=!0),f.skewType=y.skewType||f.skewType||et.defaultSkewType,(d=f.force3D||f.z||f.rotationX||f.rotationY||a.z||a.rotationX||a.rotationY||a.perspective)||null==y.scale||(a.scaleZ=1);-1<--m;)(1e-6<(h=a[i=Et[m]]-f[i])||h<-1e-6||null!=y[i]||null!=A[i])&&(u=!0,r=new gt(f,i,f[i],h,r),i in _&&(r.e=_[i]),r.xs0=0,r.plugin=o,n._overwriteProps.push(r.n));return(h=y.transformOrigin)&&f.svg&&(Bt(t,h,a),(r=new gt(f,"xOrigin",f.xOrigin,a.xOrigin-f.xOrigin,r,-1,"transformOrigin")).b=f.xOrigin,r.e=r.xs0=a.xOrigin,(r=new gt(f,"yOrigin",f.yOrigin,a.yOrigin-f.yOrigin,r,-1,"transformOrigin")).b=f.yOrigin,r.e=r.xs0=a.yOrigin,h="0px 0px"),(h||Lt&&d&&f.zOrigin)&&(St?(u=!0,i=Mt,h=(h||ot(t,i,tt,!1,"50% 50%"))+"",(r=new gt(g,i,0,0,r,-1,"transformOrigin")).b=g[i],r.plugin=o,Lt?(c=f.zOrigin,h=h.split(" "),f.zOrigin=(2<h.length&&(0===c||"0px"!==h[2])?parseFloat(h[2]):c)||0,r.xs0=r.e=h[0]+" "+(h[1]||"50%")+" 0px",(r=new gt(f,"zOrigin",0,0,r,-1,r.n)).b=c,r.xs0=r.e=f.zOrigin):r.xs0=r.e=h):Z(h+"",f)),u&&(n._transformType=f.svg&&wt||!d&&3!==this._transformType?2:3),r},prefix:!0}),vt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),vt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,r){e=this.format(e);var o,s,a,l,c,h,d,u,p,f,g,m,y,_,v,b,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],x=t.style;for(p=parseFloat(t.offsetWidth),f=parseFloat(t.offsetHeight),o=e.split(" "),s=0;w.length>s;s++)this.p.indexOf("border")&&(w[s]=U(w[s])),-1!==(c=l=ot(t,w[s],tt,!1,"0px")).indexOf(" ")&&(c=(l=c.split(" "))[0],l=l[1]),h=a=o[s],d=parseFloat(c),m=c.substr((d+"").length),(y="="===h.charAt(1))?(u=parseInt(h.charAt(0)+"1",10),h=h.substr(2),u*=parseFloat(h),g=h.substr((u+"").length-(u<0?1:0))||""):(u=parseFloat(h),g=h.substr((u+"").length)),""===g&&(g=T[i]||m),g!==m&&(_=X(t,"borderLeft",d,m),v=X(t,"borderTop",d,m),"%"===g?(c=_/p*100+"%",l=v/f*100+"%"):"em"===g?(c=_/(b=X(t,"borderLeft",1,"em"))+"em",l=v/b+"em"):(c=_+"px",l=v+"px"),y&&(h=parseFloat(c)+u+g,a=parseFloat(l)+u+g)),r=mt(x,w[s],c+" "+l,h+" "+a,!1,"0px",r);return r},prefix:!0,formatter:ut("0px 0px 0px 0px",!1,!0)}),vt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,n,r,o){var s,a,l,c,h,d,u="background-position",p=tt||Y(t,null),f=this.format((p?C?p.getPropertyValue(u+"-x")+" "+p.getPropertyValue(u+"-y"):p.getPropertyValue(u):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==f.indexOf("%")!=(-1!==g.indexOf("%"))&&((d=ot(t,"backgroundImage").replace(w,""))&&"none"!==d)){for(s=f.split(" "),a=g.split(" "),H.setAttribute("src",d),l=2;-1<--l;)(c=-1!==(f=s[l]).indexOf("%"))!==(-1!==a[l].indexOf("%"))&&(h=0===l?t.offsetWidth-H.width:t.offsetHeight-H.height,s[l]=c?parseFloat(f)/100*h+"px":parseFloat(f)/h*100+"%");f=s.join(" ")}return this.parseComplex(t.style,f,g,r,o)},formatter:Z}),vt("backgroundSize",{defaultValue:"0 0",formatter:Z}),vt("perspective",{defaultValue:"0px",prefix:!0}),vt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),vt("transformStyle",{prefix:!0}),vt("backfaceVisibility",{prefix:!0}),vt("userSelect",{prefix:!0}),vt("margin",{parser:pt("marginTop,marginRight,marginBottom,marginLeft")}),vt("padding",{parser:pt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),vt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,n,r,o){var s,a,l;return C<9?(a=t.currentStyle,l=C<8?" ":",",s="rect("+a.clipTop+l+a.clipRight+l+a.clipBottom+l+a.clipLeft+")",e=this.format(e).split(",").join(l)):(s=this.format(ot(t,this.p,tt,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,s,e,r,o)}}),vt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),vt("autoRound,strictUnits",{parser:function(t,e,i,n,r){return r}}),vt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,n,r,o){return this.parseComplex(t.style,this.format(ot(t,"borderTopWidth",tt,!1,"0px")+" "+ot(t,"borderTopStyle",tt,!1,"solid")+" "+ot(t,"borderTopColor",tt,!1,"#000")),this.format(e),r,o)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(dt)||["#000"])[0]}}),vt("borderWidth",{parser:pt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),vt("float,cssFloat,styleFloat",{parser:function(t,e,i,n,r){var o=t.style,s="cssFloat"in o?"cssFloat":"styleFloat";return new gt(o,s,0,0,r,-1,i,!1,0,o[s],e)}});var Ft=function(t){var e,i=this.t,n=i.filter||ot(this.data,"filter")||"",r=0|this.s+this.c*t;100===r&&(-1===n.indexOf("atrix(")&&-1===n.indexOf("radient(")&&-1===n.indexOf("oader(")?(i.removeAttribute("filter"),e=!ot(this.data,"filter")):(i.filter=n.replace(s,""),e=!0)),e||(this.xn1&&(i.filter=n=n||"alpha(opacity="+r+")"),-1===n.indexOf("pacity")?0===r&&this.xn1||(i.filter=n+" alpha(opacity="+r+")"):i.filter=n.replace(L,"opacity="+r))};vt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,n,r,o){var s=parseFloat(ot(t,"opacity",tt,!1,"1")),a=t.style,l="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+s),l&&1===s&&"hidden"===ot(t,"visibility",tt)&&0!==e&&(s=0),j?r=new gt(a,"opacity",s,e-s,r):((r=new gt(a,"opacity",100*s,100*(e-s),r)).xn1=l?1:0,a.zoom=1,r.type=2,r.b="alpha(opacity="+r.s+")",r.e="alpha(opacity="+(r.s+r.c)+")",r.data=t,r.plugin=o,r.setRatio=Ft),l&&((r=new gt(a,"visibility",0,0,r,-1,null,!1,0,0!==s?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(r.n),n._overwriteProps.push(i)),r}});var zt=function(t,e){e&&(t.removeProperty?("ms"===e.substr(0,2)&&(e="M"+e.substr(1)),t.removeProperty(e.replace(a,"-$1").toLowerCase())):t.removeAttribute(e))},Ut=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:zt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};vt("className",{parser:function(t,e,i,n,r,o,s){var a,l,c,h,d,u=t.getAttribute("class")||"",p=t.style.cssText;if((r=n._classNamePT=new gt(t,i,0,0,r,2)).setRatio=Ut,r.pr=-11,f=!0,r.b=u,l=V(t,tt),c=t._gsClassPT){for(h={},d=c.data;d;)h[d.p]=1,d=d._next;c.setRatio(1)}return(t._gsClassPT=r).e="="!==e.charAt(1)?e:u.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.setAttribute("class",r.e),a=q(t,l,V(t),s,h),t.setAttribute("class",u),r.data=a.firstMPT,t.style.cssText=p,r=r.xfirst=n.parse(t,a.difs,r,o)),r}});var Yt=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,n,r,o=this.t.style,s=g.transform.parse;if("all"===this.e)r=!(o.cssText="");else for(n=(e=this.e.split(" ").join("").split(",")).length;-1<--n;)i=e[n],g[i]&&(g[i].parse===s?r=!0:i="transformOrigin"===i?Mt:g[i].p),zt(o,i);r&&(zt(o,St),this.t._gsTransform&&delete this.t._gsTransform)}};for(vt("clearProps",{parser:function(t,e,i,n,r){return(r=new gt(t,i,0,0,r,2)).setRatio=Yt,r.e=e,r.pr=-10,r.data=n._tween,f=!0,r}}),t="bezier,throwProps,physicsProps,physics2D".split(","),yt=t.length;yt--;)bt(t[yt]);(t=et.prototype)._firstPT=null,t._onInitTween=function(t,e,i){if(!t.nodeType)return!1;this._target=t,this._tween=i,this._vars=e,E=e.autoRound,f=!1,T=e.suffixMap||et.suffixMap,tt=Y(t,""),p=this._overwriteProps;var n,r,o,s,a,l,c,h,d,u=t.style;if(m&&""===u.zIndex&&(("auto"===(n=ot(t,"zIndex",tt))||""===n)&&this._addLazySet(u,"zIndex",0)),"string"==typeof e&&(s=u.cssText,n=V(t,tt),u.cssText=s+";"+e,n=q(t,n,V(t)).difs,!j&&b.test(e)&&(n.opacity=parseFloat(RegExp.$1)),e=n,u.cssText=s),this._firstPT=r=this.parse(t,e,null),this._transformType){for(d=3===this._transformType,St?y&&(m=!0,""===u.zIndex&&(("auto"===(c=ot(t,"zIndex",tt))||""===c)&&this._addLazySet(u,"zIndex",0)),_&&this._addLazySet(u,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(d?"visible":"hidden"))):u.zoom=1,o=r;o&&o._next;)o=o._next;h=new gt(t,"transform",0,0,null,2),this._linkCSSP(h,null,o),h.setRatio=d&&Lt?Wt:St?Nt:jt,h.data=this._transform||Ht(t,tt,!0),p.pop()}if(f){for(;r;){for(l=r._next,o=s;o&&o.pr>r.pr;)o=o._next;(r._prev=o?o._prev:a)?r._prev._next=r:s=r,(r._next=o)?o._prev=r:a=r,r=l}this._firstPT=s}return!0},t.parse=function(t,e,i,n){var r,o,s,a,l,c,h,d,u,p,f=t.style;for(r in e)c=e[r],(o=g[r])?i=o.parse(t,c,r,this,i,n,e):(l=ot(t,r,tt)+"",u="string"==typeof c,"color"===r||"fill"===r||"stroke"===r||-1!==r.indexOf("Color")||u&&k.test(c)?(u||(c=(3<(c=ht(c)).length?"rgba(":"rgb(")+c.join(",")+")"),i=mt(f,r,l,c,!0,"transparent",i,0,n)):!u||-1===c.indexOf(" ")&&-1===c.indexOf(",")?(h=(s=parseFloat(l))||0===s?l.substr((s+"").length):"",(""===l||"auto"===l)&&("width"===r||"height"===r?(s=Q(t,r,tt),h="px"):"left"===r||"top"===r?(s=G(t,r,tt),h="px"):(s="opacity"!==r?0:1,h="")),(p=u&&"="===c.charAt(1))?(a=parseInt(c.charAt(0)+"1",10),c=c.substr(2),a*=parseFloat(c),d=c.replace(M,"")):(a=parseFloat(c),d=u&&c.substr((a+"").length)||""),""===d&&(d=r in T?T[r]:h),c=a||0===a?(p?a+s:a)+d:e[r],h!==d&&""!==d&&(a||0===a)&&s&&(s=X(t,r,s,h),"%"===d?(s/=X(t,r,100,"%")/100,!0!==e.strictUnits&&(l=s+"%")):"em"===d?s/=X(t,r,1,"em"):"px"!==d&&(a=X(t,r,a,d),d="px"),p&&(a||0===a)&&(c=a+s+d)),p&&(a+=s),!s&&0!==s||!a&&0!==a?void 0!==f[r]&&(c||"NaN"!=c+""&&null!=c)?(i=new gt(f,r,a||s||0,0,i,-1,r,!1,0,l,c)).xs0="none"!==c||"display"!==r&&-1===r.indexOf("Style")?c:l:N("invalid "+r+" tween value: "+e[r]):(i=new gt(f,r,s,a-s,i,0,r,!1!==E&&("px"===d||"zIndex"===r),0,l,c)).xs0=d):i=mt(f,r,l,c,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},t.setRatio=function(t){var e,i,n,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=Math.round(e):e<1e-6&&-1e-6<e&&(e=0),r.type)if(1===r.type)if(2===(n=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===n)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,n=1;r.l>n;n++)i+=r["xn"+n]+r["xs"+(n+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},t._enableTransforms=function(t){this._transform=this._transform||Ht(this._target,tt,!0),this._transformType=this._transform.svg&&wt||!t&&3!==this._transformType?2:3};var Xt=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};t._addLazySet=function(t,e,i){var n=this._firstPT=new gt(t,e,0,0,this._firstPT,2);n.e=i,n.setRatio=Xt,n.data=this},t._linkCSSP=function(t,e,i,n){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,n=!0),i?i._next=t:n||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},t._kill=function(t){var e,i,n,r=t;if(t.autoAlpha||t.alpha){for(i in r={},t)r[i]=t[i];r.opacity=1,r.autoAlpha&&(r.visibility=1)}return t.className&&(e=this._classNamePT)&&((n=e.xfirst)&&n._prev?this._linkCSSP(n._prev,e._next,n._prev._prev):n===this._firstPT&&(this._firstPT=e._next),e._next&&this._linkCSSP(e._next,e._next._next,n._prev),this._classNamePT=null),o.prototype._kill.call(this,r)};var Gt=function(t,e,i){var n,r,o,s;if(t.slice)for(r=t.length;-1<--r;)Gt(t[r],e,i);else for(r=(n=t.childNodes).length;-1<--r;)s=(o=n[r]).type,o.style&&(e.push(V(o)),i&&i.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||Gt(o,e,i)};return et.cascadeTo=function(t,e,i){var n,r,o,s=u.to(t,e,i),a=[s],l=[],c=[],h=[],d=u._internals.reservedProps;for(t=s._targets||s.target,Gt(t,l,h),s.render(e,!0),Gt(t,c),s.render(0,!0),s._enabled(!0),n=h.length;-1<--n;)if((r=q(h[n],l[n],c[n])).firstMPT){for(o in r=r.difs,i)d[o]&&(r[o]=i[o]);a.push(u.to(h[n],e,r))}return a},o.activate([et]),et},!0),(t=_gsScope._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}).prototype)._onInitAllProps=function(){for(var t,e,i,n=this._tween,r=n.vars.roundProps instanceof Array?n.vars.roundProps:n.vars.roundProps.split(","),o=r.length,s={},a=n._propLookup.roundProps;-1<--o;)s[r[o]]=1;for(o=r.length;-1<--o;)for(t=r[o],e=n._firstPT;e;)i=e._next,e.pg?e.t._roundProps(s,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:n._firstPT===e&&(n._firstPT=i),e._next=e._prev=null,n._propLookup[t]=a),e=i;return!1},t._add=function(t,e,i,n){this._addTween(t,e,i,i+n,e,!0),this._overwriteProps.push(e)},_gsScope._gsDefine.plugin({propName:"attr",API:2,version:"0.3.3",init:function(t,e){var i,n,r;if("function"!=typeof t.setAttribute)return!1;for(i in this._target=t,this._proxy={},this._start={},this._end={},e)this._start[i]=this._proxy[i]=n=t.getAttribute(i),r=this._addTween(this._proxy,i,parseFloat(n),e[i],i),this._end[i]=r?r.s+r.c:e[i],this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,n=i.length,r=1===t?this._end:t?this._proxy:this._start;-1<--n;)e=i[n],this._target.setAttribute(e,r[e]+"")}}),_gsScope._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,n,r,o,s,a=!0===e.useRadians?2*Math.PI:360;for(i in e)"useRadians"!==i&&(n=(s=(e[i]+"").split("_"))[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),o=(this.finals[i]="string"==typeof n&&"="===n.charAt(1)?r+parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)):Number(n)||0)-r,s.length&&(-1!==(n=s.join("_")).indexOf("short")&&((o%=a)!==o%(a/2)&&(o=o<0?o+a:o-a)),-1!==n.indexOf("_cw")&&o<0?o=(o+9999999999*a)%a-(0|o/a)*a:-1!==n.indexOf("ccw")&&0<o&&(o=(o-9999999999*a)%a-(0|o/a)*a)),(1e-6<o||o<-1e-6)&&(this._addTween(t,i,r,r+o,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,_gsScope._gsDefine("easing.Back",["easing.Ease"],function(m){var e,i,t,n=_gsScope.GreenSockGlobals||_gsScope,r=n.com.greensock,o=2*Math.PI,s=Math.PI/2,a=r._class,l=function(t,e){var i=a("easing."+t,function(){},!0),n=i.prototype=new m;return n.constructor=i,n.getRatio=e,i},c=m.register||function(){},h=function(t,e,i,n){var r=a("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return c(r,t),r},y=function(t,e,i){this.t=t,this.v=e,i&&(((this.next=i).prev=this).c=i.v-e,this.gap=i.t-t)},d=function(t,e){var i=a("easing."+t,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),n=i.prototype=new m;return n.constructor=i,n.getRatio=e,n.config=function(t){return new i(t)},i},u=h("Back",d("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),d("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),d("BackInOut",function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),p=a("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:1<t&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),f=p.prototype=new m;return f.constructor=p,f.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},p.ease=new p(.7,.7),f.config=p.config=function(t,e,i){return new p(t,e,i)},(f=(e=a("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0)).prototype=new m).constructor=e,f.getRatio=function(t){return t<0?t=0:1<=t&&(t=.999999999),(this._p2*t>>0)*this._p1},f.config=e.config=function(t){return new e(t)},(f=(i=a("easing.RoughEase",function(t){for(var e,i,n,r,o,s,a=(t=t||{}).taper||"none",l=[],c=0,h=0|(t.points||20),d=h,u=!1!==t.randomize,p=!0===t.clamp,f=t.template instanceof m?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;-1<--d;)e=u?Math.random():1/h*d,i=f?f.getRatio(e):e,"none"===a?n=g:"out"===a?n=(r=1-e)*r*g:"in"===a?n=e*e*g:n=.5*(r=e<.5?2*e:2*(1-e))*r*g,u?i+=Math.random()*n-.5*n:d%2?i+=.5*n:i-=.5*n,p&&(1<i?i=1:i<0&&(i=0)),l[c++]={x:e,y:i};for(l.sort(function(t,e){return t.x-e.x}),s=new y(1,1,null),d=h;-1<--d;)o=l[d],s=new y(o.x,o.y,s);this._prev=new y(0,0,0!==s.t?s:s.next)},!0)).prototype=new m).constructor=i,f.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return(this._prev=e).v+(t-e.t)/e.gap*e.c},f.config=function(t){return new i(t)},i.ease=new i,h("Bounce",l("BounceOut",function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=t<.5;return t=(t=e?1-2*t:2*t-1)<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),h("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),h("Elastic",(t=function(t,e,i){var n=a("easing."+t,function(t,e){this._p1=t||1,this._p2=e||i,this._p3=this._p2/o*(Math.asin(1/this._p1)||0)},!0),r=n.prototype=new m;return r.constructor=n,r.getRatio=e,r.config=function(t,e){return new n(t,e)},n})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*o/this._p2)+1},.3),t("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2)},.3),t("ElasticInOut",function(t){return(t*=2)<1?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*o/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*o/this._p2)+1},.45)),h("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),h("Sine",l("SineOut",function(t){return Math.sin(t*s)}),l("SineIn",function(t){return 1-Math.cos(t*s)}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),a("easing.EaseLookup",{find:function(t){return m.map[t]}},!0),c(n.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),u},!0)}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()(),function(u,t){"use strict";var e,i,p=u.GreenSockGlobals=u.GreenSockGlobals||u;if(!p.TweenLite){var n,r,o,f,g,m=function(t){var e,i=t.split("."),n=p;for(e=0;i.length>e;e++)n[i[e]]=n=n[i[e]]||{};return n},d=m("com.greensock"),y=1e-10,l=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},_=function(){},v=(e=Object.prototype.toString,i=e.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&e.call(t)===i)}),b={},w=function(a,l,c,h){this.sc=b[a]?b[a].sc:[],(b[a]=this).gsClass=null,this.func=c;var d=[];this.check=function(t){for(var e,i,n,r,o=l.length,s=o;-1<--o;)(e=b[l[o]]||new w(l[o],[])).gsClass?(d[o]=e.gsClass,s--):t&&e.sc.push(this);if(0===s&&c)for(n=(i=("com.greensock."+a).split(".")).pop(),r=m(i.join("."))[n]=this.gsClass=c.apply(c,d),h&&(p[n]=r,"function"==typeof define&&define.amd?define((u.GreenSockAMDPath?u.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return r}):"TweenMax"===a&&"undefined"!=typeof module&&module.exports&&(module.exports=r)),o=0;this.sc.length>o;o++)this.sc[o].check()},this.check(!0)},s=u._gsDefine=function(t,e,i,n){return new w(t,e,i,n)},x=d._class=function(t,e,i){return e=e||function(){},s(t,[],function(){return e},i),e};s.globals=p;var a=[0,0,1,1],T=[],h=x("easing.Ease",function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?a.concat(e):a},!0),A=h.map={},c=h.register=function(t,e,i,n){for(var r,o,s,a,l=e.split(","),c=l.length,h=(i||"easeIn,easeOut,easeInOut").split(",");-1<--c;)for(o=l[c],r=n?x("easing."+o,null,!0):d.easing[o]||{},s=h.length;-1<--s;)a=h[s],A[o+"."+a]=A[a+o]=r[a]=t.getRatio?t:t[a]||new t};for((o=h.prototype)._calcEnd=!1,o.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},r=(n=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--r;)o=n[r]+",Power"+r,c(new h(null,null,1,r),o,"easeOut",!0),c(new h(null,null,2,r),o,"easeIn"+(0===r?",easeNone":"")),c(new h(null,null,3,r),o,"easeInOut");A.linear=d.easing.Linear.easeIn,A.swing=d.easing.Quad.easeInOut;var C=x("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(o=C.prototype).addEventListener=function(t,e,i,n,r){r=r||0;var o,s,a=this._listeners[t],l=0;for(null==a&&(this._listeners[t]=a=[]),s=a.length;-1<--s;)(o=a[s]).c===e&&o.s===i?a.splice(s,1):0===l&&r>o.pr&&(l=s+1);a.splice(l,0,{c:e,s:i,up:n,pr:r}),this!==f||g||f.wake()},o.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;-1<--i;)if(n[i].c===e)return void n.splice(i,1)},o.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;-1<--e;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var E=u.requestAnimationFrame,S=u.cancelAnimationFrame,O=Date.now||function(){return(new Date).getTime()},M=O();for(r=(n=["ms","moz","webkit","o"]).length;-1<--r&&!E;)E=u[n[r]+"RequestAnimationFrame"],S=u[n[r]+"CancelAnimationFrame"]||u[n[r]+"CancelRequestAnimationFrame"];x("Ticker",function(t,e){var r,o,s,a,l,c=this,h=O(),i=!1!==e&&E,d=500,u=33,p=function(t){var e,i,n=O()-M;d<n&&(h+=n-u),M+=n,c.time=(M-h)/1e3,e=c.time-l,(!r||0<e||!0===t)&&(c.frame++,l+=e+(a<=e?.004:a-e),i=!0),!0!==t&&(s=o(p)),i&&c.dispatchEvent("tick")};C.call(c),c.time=c.frame=0,c.tick=function(){p(!0)},c.lagSmoothing=function(t,e){d=t||1e10,u=Math.min(e,d,0)},c.sleep=function(){null!=s&&(i&&S?S(s):clearTimeout(s),o=_,s=null,c===f&&(g=!1))},c.wake=function(){null!==s?c.sleep():10<c.frame&&(M=O()-d+5),o=0===r?_:i&&E?E:function(t){return setTimeout(t,0|1e3*(l-c.time)+1)},c===f&&(g=!0),p(2)},c.fps=function(t){return arguments.length?(a=1/((r=t)||60),l=this.time+a,void c.wake()):r},c.useRAF=function(t){return arguments.length?(c.sleep(),i=t,void c.fps(r)):i},c.fps(t),setTimeout(function(){i&&(!s||c.frame<5)&&c.useRAF(!1)},1500)}),(o=d.Ticker.prototype=new d.events.EventDispatcher).constructor=d.Ticker;var L=x("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,Y){g||f.wake();var i=this.vars.useFrames?U:Y;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});f=L.ticker=new d.Ticker,(o=L.prototype)._dirty=o._gc=o._initted=o._paused=!1,o._totalTime=o._time=0,o._rawPrevTime=-1,o._next=o._last=o._onUpdate=o._timeline=o.timeline=null,o._paused=!1;var k=function(){g&&2e3<O()-M&&f.wake(),setTimeout(k,2e3)};k(),o.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},o.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},o.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},o.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},o.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},o.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},o.render=function(){},o.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},o.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime())>=i&&i+this.totalDuration()/this._timeScale>t},o._enabled=function(t,e){return g||f.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},o._kill=function(){return this._enabled(!1,!1)},o.kill=function(t,e){return this._kill(t,e),this},o._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},o._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();-1<--e;)"{self}"===t[e]&&(i[e]=this);return i},o.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=v(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},o.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},o.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},o.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},o.totalTime=function(t,e,i){if(g||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(n<t&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==t||0===this._duration)&&(this.render(t,e,!1),P.length&&X())}return this},o.progress=o.totalProgress=function(t,e){return arguments.length?this.totalTime(this.duration()*t,e):this._time/this.duration()},o.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},o.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},o.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||y,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},o.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},o.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){g||t||f.wake();var e=this._timeline,i=e.rawTime(),n=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=this.isActive(),!t&&0!==n&&this._initted&&this.duration()&&this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var D=x("core.SimpleTimeline",function(t){L.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(o=D.prototype=new L).constructor=D,o.kill()._gc=!1,o._first=o._last=o._recent=null,o._sortChildren=!1,o.add=o.insert=function(t,e){var i,n;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(n=t._startTime;i&&i._startTime>n;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._recent=t,this._timeline&&this._uncache(!0),this},o._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},o.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},o.rawTime=function(){return g||f.wake(),this._totalTime};var I=x("TweenLite",function(t,e,i){if(L.call(this,e,i),this.render=I.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:I.selector(t)||t;var n,r,o,s=t.jquery||t.length&&t!==u&&t[0]&&(t[0]===u||t[0].nodeType&&t[0].style&&!t.nodeType),a=this.vars.overwrite;if(this._overwrite=a=null==a?z[I.defaultOverwrite]:"number"==typeof a?a>>0:z[a],(s||t instanceof Array||t.push&&v(t))&&"number"!=typeof t[0])for(this._targets=o=l(t),this._propLookup=[],this._siblings=[],n=0;o.length>n;n++)(r=o[n])?"string"!=typeof r?r.length&&r!==u&&r[0]&&(r[0]===u||r[0].nodeType&&r[0].style&&!r.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(l(r))):(this._siblings[n]=G(r,this,!1),1===a&&1<this._siblings[n].length&&q(r,this,null,1,this._siblings[n])):"string"==typeof(r=o[n--]=I.selector(r))&&o.splice(n+1,1):o.splice(n--,1);else this._propLookup={},this._siblings=G(t,this,!1),1===a&&1<this._siblings.length&&q(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-y,this.render(-this._delay))},!0),R=function(t){return t&&t.length&&t!==u&&t[0]&&(t[0]===u||t[0].nodeType&&t[0].style&&!t.nodeType)};(o=I.prototype=new L).constructor=I,o.kill()._gc=!1,o.ratio=0,o._firstPT=o._targets=o._overwrittenProps=o._startAt=null,o._notifyPluginsOfEnabled=o._lazy=!1,I.version="1.14.2",I.defaultEase=o._ease=new h(null,null,1,1),I.defaultOverwrite="auto",I.ticker=f,I.autoSleep=!0,I.lagSmoothing=function(t,e){f.lagSmoothing(t,e)},I.selector=u.$||u.jQuery||function(t){var e=u.$||u.jQuery;return e?(I.selector=e)(t):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var P=[],B={},H=I._internals={isArray:v,isSelector:R,lazyTweens:P},j=I._plugins={},W=H.tweenLookup={},N=0,F=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},U=L._rootFramesTimeline=new D,Y=L._rootTimeline=new D,X=H.lazyRender=function(){var t,e=P.length;for(B={};-1<--e;)(t=P[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);P.length=0};Y._startTime=f.time,U._startTime=f.frame,Y._active=U._active=!0,setTimeout(X,1),L._updateRoot=I.render=function(){var t,e,i;if(P.length&&X(),Y.render((f.time-Y._startTime)*Y._timeScale,!1,!1),U.render((f.frame-U._startTime)*U._timeScale,!1,!1),P.length&&X(),!(f.frame%120)){for(i in W){for(t=(e=W[i].tweens).length;-1<--t;)e[t]._gc&&e.splice(t,1);0===e.length&&delete W[i]}if((!(i=Y._first)||i._paused)&&I.autoSleep&&!U._first&&1===f._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||f.sleep()}}},f.addEventListener("tick",L._updateRoot);var G=function(t,e,i){var n,r,o=t._gsTweenID;if(W[o||(t._gsTweenID=o="t"+N++)]||(W[o]={target:t,tweens:[]}),e&&((n=W[o].tweens)[r=n.length]=e,i))for(;-1<--r;)n[r]===e&&n.splice(r,1);return W[o].tweens},V=function(t,e,i,n){var r,o,s=t.vars.onOverwrite;return s&&(r=s(t,e,i,n)),(s=I.onOverwrite)&&(o=s(t,e,i,n)),!1!==r&&!1!==o},q=function(t,e,i,n,r){var o,s,a,l;if(1===n||4<=n){for(l=r.length,o=0;o<l;o++)if((a=r[o])!==e)a._gc||V(a,e)&&a._enabled(!1,!1)&&(s=!0);else if(5===n)break;return s}var c,h=e._startTime+y,d=[],u=0,p=0===e._duration;for(o=r.length;-1<--o;)(a=r[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(c=c||J(e,0,p),0===J(a,c,p)&&(d[u++]=a)):h>=a._startTime&&a._startTime+a.totalDuration()/a._timeScale>h&&((p||!a._initted)&&h-a._startTime<=2e-10||(d[u++]=a)));for(o=u;-1<--o;)if(a=d[o],2===n&&a._kill(i,t,e)&&(s=!0),2!==n||!a._firstPT&&a._initted){if(2!==n&&!V(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},J=function(t,e,i){for(var n=t._timeline,r=n._timeScale,o=t._startTime;n._timeline;){if(o+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return e<(o/=r)?o-e:i&&o===e||!t._initted&&o-e<2*y?y:(o+=t.totalDuration()/t._timeScale/r)>e+y?0:o-e-y};o._init=function(){var t,e,i,n,r,o=this.vars,s=this._overwrittenProps,a=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){for(n in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={},o.startAt)r[n]=o.startAt[n];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&!1!==o.lazy,r.startAt=r.delay=null,this._startAt=I.to(this.target,0,r),l)if(0<this._time)this._startAt=null;else if(0!==a)return}else if(o.runBackwards&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(n in 0!==this._time&&(l=!1),i={},o)F[n]&&"autoCSS"!==n||(i[n]=o[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==o.lazy,i.immediateRender=l,this._startAt=I.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof h?c:"function"==typeof c?new h(c,o.easeParams):A[c]||I.defaultEase:I.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;-1<--t;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],s?s[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,s);if(e&&I._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=o.onUpdate,this._initted=!0},o._initProps=function(t,e,i,n){var r,o,s,a,l,c;if(null==t)return!1;for(r in B[t._gsTweenID]&&X(),this.vars.css||t.style&&t!==u&&t.nodeType&&j.css&&!1!==this.vars.autoCSS&&function(t,e){var i,n={};for(i in t)F[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!j[i]||j[i]&&j[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n}(this.vars,t),this.vars){if(c=this.vars[r],F[r])c&&(c instanceof Array||c.push&&v(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[r]=c=this._swapSelfInParams(c,this));else if(j[r]&&(a=new j[r])._onInitTween(t,this.vars[r],this)){for(this._firstPT=l={_next:this._firstPT,t:a,p:"setRatio",s:0,c:1,f:!0,n:r,pg:!0,pr:a._priority},o=a._overwriteProps.length;-1<--o;)e[a._overwriteProps[o]]=this._firstPT;(a._priority||a._onInitAllProps)&&(s=!0),(a._onDisable||a._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=e[r]=l={_next:this._firstPT,t:t,p:r,f:"function"==typeof t[r],n:r,pg:!1,pr:0},l.s=l.f?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),l.c="string"==typeof c&&"="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*Number(c.substr(2)):Number(c)-l.s||0;l&&l._next&&(l._next._prev=l)}return n&&this._kill(n,t)?this._initProps(t,e,i,n):1<this._overwrite&&this._firstPT&&1<i.length&&q(t,this,e,this._overwrite,i)?(this._kill(e,t),this._initProps(t,e,i,n)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(B[t._gsTweenID]=!0),s)},o.render=function(t,e,i){var n,r,o,s,a=this._time,l=this._duration,c=this._rawPrevTime;if(l<=t)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete"),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(0===t||c<0||c===y)&&c!==t&&(i=!0,y<c&&(r="onReverseComplete")),this._rawPrevTime=s=!e||t||c===t?t:y);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&0<c&&c!==y)&&(r="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(0<=c&&(i=!0),this._rawPrevTime=s=!e||t||c===t?t:y)),this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var h=t/l,d=this._easeType,u=this._easePower;(1===d||3===d&&.5<=h)&&(h=1-h),3===d&&(h*=2),1===u?h*=h:2===u?h*=h*h:3===u?h*=h*h*h:4===u&&(h*=h*h*h*h),this.ratio=1===d?1-h:2===d?h:t/l<.5?h/2:1-h/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=c,P.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&0<=t&&(this._active=!0),0===a&&(this._startAt&&(0<=t?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||T))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,e,i),e||(this._time!==a||n)&&this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||T)),r&&(!this._gc||i)&&(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,e,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||T),0===l&&this._rawPrevTime===y&&s!==y&&(this._rawPrevTime=0))}},o._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);var n,r,o,s,a,l,c,h,d;if(e="string"!=typeof e?e||this._targets||this.target:I.selector(e)||e,(v(e)||R(e))&&"number"!=typeof e[0])for(n=e.length;-1<--n;)this._kill(t,e[n])&&(l=!0);else{if(this._targets){for(n=this._targets.length;-1<--n;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(c=t||a,h=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(I.onOverwrite||this.vars.onOverwrite)){for(o in c)a[o]&&(d||(d=[]),d.push(o));if(!V(this,i,e,d))return!1}for(o in c)(s=a[o])&&(s.pg&&s.t._kill(c)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),h&&(r[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},o.invalidate=function(){return this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],L.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-y,this.render(-this._delay)),this},o._enabled=function(t,e){if(g||f.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;-1<--i;)this._siblings[i]=G(n[i],this,!0);else this._siblings=G(this.target,this,!0)}return L.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(t?"_onEnable":"_onDisable",this)},I.to=function(t,e,i){return new I(t,e,i)},I.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new I(t,e,i)},I.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new I(t,e,n)},I.delayedCall=function(t,e,i,n,r){return new I(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:n,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:n,immediateRender:!1,useFrames:r,overwrite:0})},I.set=function(t,e){return new I(t,0,e)},I.getTweensOf=function(t,e){if(null==t)return[];var i,n,r,o;if(t="string"!=typeof t?t:I.selector(t)||t,(v(t)||R(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];-1<--i;)n=n.concat(I.getTweensOf(t[i],e));for(i=n.length;-1<--i;)for(o=n[i],r=i;-1<--r;)o===n[r]&&n.splice(i,1)}else for(i=(n=G(t).concat()).length;-1<--i;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n},I.killTweensOf=I.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=I.getTweensOf(t,e),r=n.length;-1<--r;)n[r]._kill(i,t)};var K=x("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=K.prototype},!0);if(o=K.prototype,K.version="1.10.1",K.API=2,o._firstPT=null,o._addTween=function(t,e,i,n,r,o){var s,a;return null!=n&&(s="number"==typeof n||"="!==n.charAt(1)?Number(n)-i:parseInt(n.charAt(0)+"1",10)*Number(n.substr(2)))?(this._firstPT=a={_next:this._firstPT,t:t,p:e,s:i,c:s,f:"function"==typeof t[e],n:r||e,r:o},a._next&&(a._next._prev=a),a):void 0},o.setRatio=function(t){for(var e,i=this._firstPT;i;)e=i.c*t+i.s,i.r?e=Math.round(e):e<1e-6&&-1e-6<e&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},o._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;-1<--e;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},o._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},I._onPluginEvent=function(t,e){var i,n,r,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:o)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:o=a,a=s}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},K.activate=function(t){for(var e=t.length;-1<--e;)t[e].API===K.API&&(j[(new t[e])._propName]=t[e]);return!0},s.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},s=x("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){K.call(this,i,n),this._overwriteProps=r||[]},!0===t.global),a=s.prototype=new K(i);for(e in(a.constructor=s).API=t.API,o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,K.activate([s]),s},n=u._gsQueue){for(r=0;n.length>r;r++)n[r]();for(o in b)b[o].func||u.console.log("GSAP encountered missing dependency: com.greensock."+o)}g=!1}}("undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window);var _gsScope="undefined"!=typeof module&&module.exports&&"undefined"!=typeof global?global:this||window;(_gsScope._gsQueue||(_gsScope._gsQueue=[])).push(function(){"use strict";var s=document.documentElement,a=window,o=function(t,e){var i="x"===e?"Width":"Height",n="scroll"+i,r="client"+i,o=document.body;return t===a||t===s||t===o?Math.max(s[n],o[n])-(a["inner"+i]||Math.max(s[r],o[r])):t[n]-t["offset"+i]},t=_gsScope._gsDefine.plugin({propName:"scrollTo",API:2,version:"1.7.4",init:function(t,e,i){return this._wdw=t===a,this._target=t,this._tween=i,"object"!=typeof e&&(e={y:e}),this.vars=e,this._autoKill=!1!==e.autoKill,this.x=this.xPrev=this.getX(),this.y=this.yPrev=this.getY(),null!=e.x?(this._addTween(this,"x",this.x,"max"===e.x?o(t,"x"):e.x,"scrollTo_x",!0),this._overwriteProps.push("scrollTo_x")):this.skipX=!0,null!=e.y?(this._addTween(this,"y",this.y,"max"===e.y?o(t,"y"):e.y,"scrollTo_y",!0),this._overwriteProps.push("scrollTo_y")):this.skipY=!0,!0},set:function(t){this._super.setRatio.call(this,t);var e=this._wdw||!this.skipX?this.getX():this.xPrev,i=this._wdw||!this.skipY?this.getY():this.yPrev,n=i-this.yPrev,r=e-this.xPrev;this._autoKill&&(!this.skipX&&(7<r||r<-7)&&e<o(this._target,"x")&&(this.skipX=!0),!this.skipY&&(7<n||n<-7)&&i<o(this._target,"y")&&(this.skipY=!0),this.skipX&&this.skipY&&(this._tween.kill(),this.vars.onAutoKill&&this.vars.onAutoKill.apply(this.vars.onAutoKillScope||this._tween,this.vars.onAutoKillParams||[]))),this._wdw?a.scrollTo(this.skipX?e:this.x,this.skipY?i:this.y):(this.skipY||(this._target.scrollTop=this.y),this.skipX||(this._target.scrollLeft=this.x)),this.xPrev=this.x,this.yPrev=this.y}}),e=t.prototype;t.max=o,e.getX=function(){return this._wdw?null!=a.pageXOffset?a.pageXOffset:null!=s.scrollLeft?s.scrollLeft:document.body.scrollLeft:this._target.scrollLeft},e.getY=function(){return this._wdw?null!=a.pageYOffset?a.pageYOffset:null!=s.scrollTop?s.scrollTop:document.body.scrollTop:this._target.scrollTop},e._kill=function(t){return t.scrollTo_x&&(this.skipX=!0),t.scrollTo_y&&(this.skipY=!0),this._super._kill.call(this,t)}}),_gsScope._gsDefine&&_gsScope._gsQueue.pop()();var dat=dat||{};function colorFade(t,e,i,n,o,s){var a,l,c,h,d,u,p,f,m=t;o=o||20,s=s||20,clearInterval(m.timer),l=colorConv(n),c=l[0],h=l[1],d=l[2],m.r||(a=colorConv(i),r=a[0],g=a[1],b=a[2],m.r=r,m.g=g,m.b=b),u=Math.round(Math.abs(m.r-c)/o),p=Math.round(Math.abs(m.g-h)/o),f=Math.round(Math.abs(m.b-d)/o),0==u&&(u=1),0==p&&(p=1),0==f&&(f=1),m.step=1,m.timer=setInterval(function(){animateColor(t,e,o,c,h,d,u,p,f)},s)}function animateColor(t,e,i,n,r,o,s,a,l){var c,h=t;if(h.step<=i){var d=h.r,u=h.g,p=h.b;n<=d?d-=s:d=parseInt(d)+parseInt(s),r<=u?u-=a:u=parseInt(u)+parseInt(a),o<=p?p-=l:p=parseInt(p)+parseInt(l),c="rgb("+d+","+u+","+p+")","background"==e?h.style.backgroundColor=c:"border"==e?h.style.borderColor=c:h.style.color=c,h.r=d,h.g=u,h.b=p,h.step=h.step+1}else clearInterval(h.timer),c="rgb("+n+","+r+","+o+")","background"==e?h.style.backgroundColor=c:"border"==e?h.style.borderColor=c:h.style.color=c}function colorConv(t){return[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)]}function MainMenu(u){var i,p,f,g,m=new SmartObject;m.style.position="absolute",m.style.top=0,m.style.left=0,m.style.right=0,m.style.bottom=0,m.style.display="none";var y,_,v,b,o=[],s=Assets.FULLSCREEN_TRANSITIONS||new FullScreenStackTransition;function w(t,e,i){var n=document.createElement("div");return n.style.position="relative",n.style.clear="both",n.style.display="block",n._menuTitle=i?"Stories":e.getAttribute("data-menuTitle"),n._template=e.getAttribute("data-template"),n._path=e.getAttribute("data-path"),n._index=t,n.innerHTML=i?"Stories":e.getAttribute("data-menuTitle"),n.style.whiteSpace="noWrap",n.style.color="#B9BFBB",5===t&&(n.style.marginTop="25px"),n.style.left=0,n.style.cursor="pointer",n._storeData=e,o.push(n),BrowserDetect.MOBILE||BrowserDetect.TABLET?n.addEventListener("touchstart",i?r:l):(n.addEventListener(MouseAndTouchEvent.MOUSE_DOWN,i?r:l),n.addEventListener(MouseEvent.MOUSE_OVER,function(t){this!=y&&TweenMax.to(this,0,{css:{color:"#FFF"},ease:Linear.easeNone})}),n.addEventListener(MouseEvent.MOUSE_OUT,function(t){this!=y&&TweenMax.to(this,0,{css:{color:"#B9BFBB"},ease:Linear.easeNone})})),n}function r(){window.open("https://medium.com/@hellomondaycom","_blank")}function x(t){var e=JSON.parse(t)[0],i=e.text,n=e.user.screen_name;n=String(n);var r=e.created_at,o=r.split(" ");r=o[1]+" "+o[2]+", "+o[5],i=function(t,e,i){var n=new SmartObject;n.style.position="relative";var r=document.createElement("span");if(r.style.display="block",r.style.width="100%",r.style.marginBottom="6px",r.style.color="#B9BFBB",-1<t.indexOf("https://")||-1<t.indexOf("http://")||-1<t.indexOf("@"))for(var o=t.split(" "),s=0;s<o.length;s++)if(-1<o[s].indexOf("https://")){var a=document.createElement("a");a.style.textDecoration="none",a.style.color="#fff",a.setAttribute("href",o[s]),a.setAttribute("target","_blank"),a.innerHTML=o[s]+" ",a.className="cultureLink",r.appendChild(a)}else if(-1<o[s].indexOf("http://")){var a=document.createElement("a");a.style.textDecoration="none",a.style.color="#fff",a.setAttribute("href",o[s]),a.setAttribute("target","_blank"),a.innerHTML=o[s]+" ",a.className="cultureLink",r.appendChild(a)}else if(-1<o[s].indexOf("@")){var l=document.createElement("span");l.style.color="#fff",l.innerHTML=o[s]+" ",r.appendChild(l)}else r.innerHTML+=o[s]+" ";else r.innerHTML=t;return n._text=r,n.appendChild(r),n}(i),g.appendChild(i)}function n(t,e){if(s._isAnimating)return!1;if(!e){var i=m._isOpen?"Close":"Open";_gaq.push(["_trackEvent","Menu",i])}if("HomeTemplate"===ContentManager._activeTemplates[0].templateName&&ContentManager._activeTemplates[0].template.hideActiveCat&&ContentManager._activeTemplates[0].template.hideActiveCat(),m._isOpen){n=m,r=ContentManager._prevTemplateObj.template;parseInt(r.style.top)&&(m.style.top=-parseInt(r.style.top)+"px",Assets.LAYER_ALL.scrollTop=-parseInt(r.style.top),r.style.top="0px"),Assets.SCROLL_DISABLER.enable_scroll(),s.move(n,r,{direction:"left",onComplete:function(){r.enableParallax&&r.enableParallax(),r.showBackArrow&&r.showBackArrow(),m.style.top="0px",m._isOpen=!1,a(e)}})}else{m._isOpen=!0,document.body.style.overflow="hidden",Assets.SCROLL_DISABLER.disable_scroll();var n=ContentManager._prevTemplateObj.template,r=m;Assets.LAYER_ALL&&Assets.LAYER_ALL.scrollTop&&(n.style.top=-Assets.LAYER_ALL.scrollTop+"px",Assets.LAYER_ALL.scrollTop=0),n.disableParallax&&n.disableParallax(),n.hideBackArrow&&n.hideBackArrow(),s.move(n,r,{direction:"right",onComplete:function(){a(e)}}),m.style.display="block",m.style.top="0px"}}function a(t){t&&t()}function l(t){if(s._isAnimating)return!1;var e=t.currentTarget;trace(e._storeData),ContentManager._newPath!==e._path&&TweenMax.to(y,.2,{css:{color:"#B9BFBB"},ease:Linear.easeNone}),e.style.color="#fff",y=e,ContentManager._newPath===e._path?(Assets.SCROLL_DISABLER.enable_scroll(),n(0,function(){m._isOpen=!1,m.style.top="0px"})):(Assets.SCROLL_DISABLER.enable_scroll(),m._isOpen=!1,m.style.top="0px",Assets.CLICKED_MENU_LINK=!0,ContentManager.path(e._storeData)),i.onClick(null,!0)}function t(t){b=window.innerWidth/640,window.innerHeight<window.innerWidth&&(b=window.innerHeight/640),m._isOpen?(m.style.display="block",TweenMax.set(ContentManager._prevTemplateObj.template,{x:Math.ceil(window.innerWidth+2),y:0,z:0})):m.style.display="none",_.style.width=window.innerWidth+"px",_.style.height=window.innerHeight+"px",p.style.width=window.innerWidth-40+"px",p.style.height=window.innerHeight-40+"px",v&&v.resize(),p.style.width=window.innerWidth-40+"px"}return m._isOpen=!1,m.slideInMenuIcon=function(){TweenMax.to(i,Assets.TRANSITIONS_MANAGER._options.speed,{_x:40,ease:Expo.easeInOut,overwrite:"all"})},m.getIndexOfTemplateFromPath=function(t){for(var e=0,i=o.length;e<i;e++){var n=o[e];if(n._path===t){var r=n;break}}return r},m.setColor=function(t,e,i){return!1},m.highlightMenuItemFromPath=function(t){var e=m.getIndexOfTemplateFromPath(t);e&&(e!==y&&(y.style.color="#B9BFBB"),e.style.color="#fff",y=e)},function(t){(_=new SmartObject).style.width=window.innerWidth+"px",_.style.height=window.innerHeight+"px",_._x=0,_.style.backgroundColor="#525453",m.appendChild(_),(p=new SmartObject).style.position="absolute",p.style.width=window.innerWidth-40+"px",p.style.height=window.innerHeight-40+"px",p._x=20,p._y=20,p.style.backgroundColor="#5D5F5E";var n=new SmartObject;n.style.position="absolute",n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",m.appendChild(p),m.appendChild(n),(v=new SmartObject).style.position="absolute",v.style.zIndex=9999,v.style.width="50%",v.style.height="100%",v.style.left="20px";var r=new SmartObject;r.style.position="absolute",r.style.left="52%",r.style.right=0,r.style.width="auto",r.style.margin="0px 40px 0px 0px",r.style.display="block";var e=function(){var t=u.children.length;(f=document.createElement("div")).style.position="relative",f.style.display="block";for(var e,i,n=0,r=0;r<t;r++){var o=u.children[r];(e=o.getAttribute("data-menuTitle"))&&("Culture"!==e&&(i=w(n,o),f.appendChild(i)),0==n&&((y=i).style.color="#fff"),"Culture"===e&&(i=w(n,o,!0),f.appendChild(i)),n++)}return f}();r.appendChild(e);var i=new SmartObject;i.style.position="absolute",i.style.width="100%",i.style.height="100%",i.style.left="-20px";var o=new SmartObject;o.style.position="absolute",o.innerHTML=Assets.DATA_STATIC.querySelector("#nav-title").innerHTML,o.style.fontSize="14px",o.style.left="52%",o.style.top="30px",o.style.color="#B9BFBB";var s=new SmartObject;s.style.width="45px",s.style.height="1px",s.style.position="absolute",s.style.top="8px",s.style.right="-49px",s.style.backgroundColor=o.style.color,o.appendChild(s);var a=new HMLogo,l=Assets.DATA_STATIC.querySelector("#email").innerHTML,c=document.createElement("a");c.style.position="absolute",c.style.fontFamily="TheinhardtRegular",c.href="mailto:"+l,c.innerHTML=l,c.style.left="20px",c.style.bottom="20px",c.style.color="#B9BFBB",c.style.textDecoration="none",BrowserDetect.DESKTOP&&(c.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(c,.2,{css:{color:"#FFF"},ease:Linear.easeNone})}),c.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(c,.2,{css:{color:"#B9BFBB"},ease:Linear.easeNone})}));var h=new SmartObject;h.style.position="absolute",h.innerHTML="&copy; Copyright "+(new Date).getFullYear(),h.style.fontFamily="TheinhardtRegular",h.style.left="52%",h.style.bottom="20px",h.style.color="#B9BFBB",i.appendChild(o),i.appendChild(a),i.appendChild(c),i.appendChild(h),i.appendChild(r);var d=new SmartObject;d.style.position="absolute",d.style.display="block",d.style.width="100%",d.style.height="auto",d.style.top=0,d.style.left=0,d.style.right=0,d.style.bottom=0,d.style.margin="20px 0px 20px 20px",d.appendChild(i),function(){AJAX.load("/social/gettweets.php",x,"GET"),(g=new SmartObject).style.position="absolute",g.style.width="370px",g.style.fontSize="14px",g.style.lineHeight="16px",g.className="nav-twitter",g.style.left="52%";var t=document.createElement("span");t.style.display="block",t.style.marginBottom="7px",t.innerHTML=Assets.DATA_STATIC.querySelector("#nav-twitter").innerHTML,t.style.color="#B9BFBB",g.appendChild(t)}(),i.appendChild(g),v.appendChild(d),v.resize=function(t){if(b=window.innerWidth/640,window.innerHeight<window.innerWidth&&(b=window.innerHeight/640),v.style.width=window.innerWidth/2-20+"px",window.innerWidth<900||window.innerHeight,a.resize(),n.style.width=window.innerWidth+"px",n.style.height=window.innerHeight+"px",window.innerWidth<900||BrowserDetect.MOBILE){r.style.left="20px",h.style.opacity=0,o.style.opacity=0,r.style.top=null,r.style.bottom=(window.innerHeight<500?100:150)*b+"px";var e=(window.innerWidth>window.innerHeight||window.innerHeight<500?30:48)*b,i=(window.innerWidth>window.innerHeight||window.innerHeight<500?34:52)*b;(45<e||48<i)&&(e=45,i=48),f.style.fontSize=e+"px",f.style.lineHeight=i+"px"}else r.style.left="52%",h.style.opacity=1,o.style.opacity=1,f.style.fontSize="30px",f.style.lineHeight="34px",r.style.top=a._y-parseInt(f.style.fontSize)/2+9+"px";450<window.innerWidth&&BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&(r.style.left="70%",r.style.top=a._y-parseInt(f.style.fontSize)/2+4+"px"),v.style.width="50%",g.style.bottom="90px",window.innerWidth<900||BrowserDetect.MOBILE||window.innerHeight<700?g.style.display="none":g.style.display="block",r.style.height=function(t){var e={w:t.offsetWidth,h:t.offsetHeight};if(!t._sizeW&&!t._sizeH){var i=t.cloneNode(!0);i.style.display="block",i.style.visibility="hidden",document.body.appendChild(i),t._sizeW=i.offsetWidth,t._sizeH=i.offsetHeight,e={w:i.offsetWidth,h:i.offsetHeight},document.body.removeChild(i)}return e}(r.firstChild)+"px"},n.appendChild(v)}(),(i=new MainMenuButton(n,s)).style.position="fixed",i.style.zIndex=5,i._x=-80,i._y=40,i.style.top=0,i.style.left=0,i.style["-webkit-backface-visibility"]="hidden",Assets.LAYER_TOP.appendChild(i),t(),m._resize=t,window.addEventListener("resize",t),m}function AbstractButton(t,e){var i=new SmartObject;return i.bg=document.createElement("div"),i.callback=t||function(){},i.hitArea=new SmartObject,i.addEvents=function(){i.hitArea.style.backgroundColor="#FFFFFF",i.hitArea._opacity=.01,i.hitArea.style.width=i.bg.style.width,i.hitArea.style.height=i.bg.style.height,i.hitArea.style.cursor="pointer",i.hitArea.style.pointerEvents="all",i.appendChild(i.hitArea),BrowserDetect.MOBILE||BrowserDetect.TABLET?i.hitArea.addEventListener("touchstart",i.onClick):(i.hitArea.addEventListener(MouseEvent.MOUSE_OVER,i.mouseOver),i.hitArea.addEventListener(MouseEvent.MOUSE_OUT,i.mouseOut),i.hitArea.addEventListener(MouseEvent.MOUSE_DOWN,i.onClick))},i.removeEvents=function(){i.hitArea.style.cursor="default",i.hitArea.style.pointerEvents="none",BrowserDetect.MOBILE||BrowserDetect.TABLET?i.hitArea.removeEventListener("touchstart",i.onClick):(i.hitArea.removeEventListener(MouseEvent.MOUSE_OVER,i.mouseOver),i.hitArea.removeEventListener(MouseEvent.MOUSE_OUT,i.mouseOut),i.hitArea.removeEventListener(MouseEvent.MOUSE_DOWN,i.onClick)),i&&i.hitArea&&i.hitArea.parentNode&&i.hitArea.parentNode.removeChild(i.hitArea)},i.onClick=function(){i.callback&&i.callback()},i.mouseOver=function(){},i.mouseOut=function(){},i.changeBackgroundColor=function(t){i.bg.style.backgroundColor=t},i.kill=function(){i.bg=null,i.callback=null,i.hitArea=null,i=null},i.bg.style.width="46px",i.bg.style.height="46px",i.bg.style.borderRadius="23px",i.bg.style.position="absolute",i.changeBackgroundColor(e||"#FFFFFF"),i.appendChild(i.bg),i}function MainMenuButton(t,i){var n=HM.extend(AbstractButton,[t]),r=[],o=!1,e=!1;function s(){TweenMax.to(r[0],.3,{_y:18,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(r[2],.3,{_y:26,overwrite:!0,ease:Quad.easeOut,onComplete:a})}function a(){e=!1}function l(t){a();var e=0===t?Quad.easeOut:Quad.easeInOut;TweenMax.to(r[0],.3,{delay:t||.3,_y:18,overwrite:!0,ease:e}),TweenMax.to(r[2],.3,{delay:t||.3,_y:26,overwrite:!0,ease:e})}return n.override("onClick",function(t,e){if(i._isAnimating&&!0!==e)return!1;o?(o=!1,TweenMax.to(r[0],.3,{_y:9,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(r[1],.3,{delay:.2,_rotation:0,overwrite:!0,ease:Quad.easeOut})):(o=!0,TweenMax.to(r[0],.3,{_y:9,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(r[1],.3,{delay:.2,_rotation:180,overwrite:!0,ease:Quad.easeOut})),TweenMax.to(r[2],.3,{_y:35,overwrite:!0,ease:Quad.easeOut,onComplete:s}),e||n._super.onClick()}),n.override("mouseOver",function(){e||(TweenMax.to(r[0],.3,{_y:16,overwrite:!0,ease:Quad.easeOut}),TweenMax.to(r[2],.3,{_y:28,overwrite:!0,ease:Quad.easeOut,onComplete:l}))}),n.override("mouseOut",function(){e||s()}),function(){for(var t,e=0;e<3;e++)(t=new SmartObject(AssetLoader.getAsset("assets/images/ui/navigationline@2.png")))._x=13,t._y=18+4*e,t.width=20,t.height=3,t.style.pointerEvents="none",n.appendChild(t),r.push(t);n.addEvents()}(),n}function ArrowButton(i,t,e,n,r){var o,s,a,l,c=HM.extend(AbstractButton,[t,e]),h=r._options,d=!1,u=!1,p="Safari"===BrowserDetect.BROWSER_NAME?9:10;function f(){u||(TweenLite.to(s,h.speed,{_rotation:135,_x:-1,ease:Expo.easeInOut}),TweenLite.to(a,h.speed,{_rotation:-135,_x:p,ease:Expo.easeInOut,onComplete:g}))}function g(){d=!1,s._rotation=-45,a._rotation=45,u&&c.mouseOver()}return c.override("onClick",function(t,e){if(r._isAnimating&&!0!==e)return!1;d=!0,c.callback(t,i),TweenLite.to(s,h.speed,{_rotation:135,_x:-1,ease:h.ease||Expo.easeInOut,overwrite:!0}),TweenLite.to(a,h.speed,{_rotation:-135,_x:p,ease:h.ease||Expo.easeInOut,onComplete:g,overwrite:!0})}),c.override("mouseOver",function(){u=!0,d||(TweenLite.to(s,.25,{_rotation:-25,_x:-2,ease:Quad.easeInOut}),TweenLite.to(a,.25,{_rotation:25,_x:11,ease:Quad.easeInOut}))}),c.override("mouseOut",function(){u=!1,d||(TweenLite.to(s,.25,{_rotation:-45,_x:-1,ease:Quad.easeInOut}),TweenLite.to(a,.25,{_rotation:45,_x:p,ease:Quad.easeInOut}))}),c.style.zIndex=999,function(){switch((s=new SmartObject).style.backgroundColor=e?"#FFFFFF":"#555657",s.style.width="15px",s.style.height="1px",s._rotation=-45,s._x=-1,s._y=4,(a=new SmartObject).style.backgroundColor=e?"#FFFFFF":"#555657",a.style.width="15px",a.style.height="1px",a._x=p,a._y=4,a._rotation=45,(l=new SmartObject).style.width="24px",l.style.height="11px",l._x=11,l._y=17,l.style.pointerEvents="none",i){case"down":l._rotation=180,l._x=11,l._y=18;break;case"left":l._rotation=-90,l._x=10,l._y=18;break;case"right":l._rotation=90}c.appendChild(l),l.appendChild(s),l.appendChild(a)}(),n&&(setTimeout(f,500),o=setInterval(f,4e3),c.idleTimer=o),c.addEvents(),c}function OffsiteButton(t,e){var i=HM.extend(AbstractButton,[t,e]),n=SmartObject(AssetLoader.getAsset("assets/images/ui/offsite_icon_outline@2.png")),r=SmartObject(AssetLoader.getAsset("assets/images/ui/offsite_icon_arrow@2.png"));return i.override("mouseOver",function(){TweenLite.to(r,.3,{_x:21,_y:8})}),i.override("mouseOut",function(){TweenLite.to(r,.3,{_x:19,_y:10,_rotation:0})}),i.bg.style.width="36px",i.bg.style.height="36px",i.bg.style.borderRadius="18px",n.___useRounded=!0,n.style.pointerEvents="none",n._x=9,n._y=10,n.width=18.5,n.height=16,i.appendChild(n),r.style.pointerEvents="none",r._x=19,r._y=10,r.width=8,r.height=8,i.appendChild(r),i}function HMLogo(){var i=new SmartObject(AssetLoader.getAsset("assets/images/frontpage/hellomonday-logo@2.png"));return i.addEvents=function(){i.style.cursor="pointer",i.style.pointerEvents="all",BrowserDetect.MOBILE||BrowserDetect.TABLET?i.addEventListener("touchstart",i.onClick):i.addEventListener(MouseEvent.MOUSE_DOWN,i.onClick)},i.removeEvents=function(){BrowserDetect.MOBILE||BrowserDetect.TABLET?i.removeEventListener("touchstart",i.onClick):i.removeEventListener(MouseEvent.MOUSE_DOWN,i.onClick)},i.onclick=function(t){ContentManager.path("home")},i.resize=function(){var t=window.innerWidth/640;if(window.innerHeight<window.innerWidth&&(t=window.innerHeight/640),window.innerWidth<900||window.innerHeight<600){var e=.7*(window.innerWidth/2-20);1==BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&window.innerWidth<720?e=i.orgW/2.2*t:1==BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight&&(e=i.orgW/1.6*t),e>=i.orgW/2&&!0!==BrowserDetect.MOBILE?(i.style.width=null,i.style.height=null):(i.style.width=e+"px",i.style.height="auto")}else i.style.width=null,i.style.height=null},i.style.zIndex=999,i._x=20,i._y=158,i.orgW=i.naturalWidth||i.width,i.orgH=i.naturalHeight||i.height,i.ratio=i.orgH/i.orgW,i.addEvents(),i}function Cat(n,e){var t,r,i,o=new SmartObject,s=!1,a=!1;function l(t){t===r.frames-1&&e(o)}return o.play=function(){t.play(),s&&(HM.Audio.play(i),a=!0)},o.pause=function(){t.pause(),s&&a&&HM.Audio.pause(i)},o.unloadAssets=function(){for(var t=CatAnimationData.getAssetsForType(n),e=0,i=t.length;e<i;e++)AssetLoader.destroy(t[e]);r=null},r=CatAnimationData.getDataForType(n),(t=new AnimationSequence(r.images,r.fps,l)).style.pointerEvents="none",o.appendChild(t),r.audio&&""!==r.audio&&(s=!0,i=HM.Audio.createAudioObject(r.audio)),o}function PageTransitionsManager(){var r,t={},o=Assets.FULLSCREEN_TRANSITIONS||new FullScreenStackTransition,a=[],s=!1,l=[];function c(){if(!s){var t=a.shift();if(!t)return!1;r=t,s=!0;var e=0;if(Assets.LAYER_ALL.scrollTop){var i=Assets.LAYER_ALL.scrollTop;r.oldTemplate.style.top=-i+"px",e=l[r.oldTemplate._path]=i,Assets.LAYER_ALL.scrollTop=0}if(l[r.newTemplate._path]&&!Assets.RESET_SCROLL_TO_ZERO){var n=l[r.newTemplate._path];r.oldTemplate.style.top=-e+n+"px",Assets.LAYER_ALL.scrollTop=n,l[r.newTemplate._path]=null}r.oldTemplate.disableParallax&&r.oldTemplate.disableParallax(),Assets.RESET_SCROLL_TO_ZERO&&(Assets.RESET_SCROLL_TO_ZERO=!1),r.oldTemplate.pause&&requestAnimFrame(r.oldTemplate.pause),r.newTemplate.style.opacity=1,r.oldTemplate.style.position,r.newTemplate.style.position,r.oldTemplate.style.position="absolute",r.newTemplate.style.position="absolute",Assets.SCROLL_DISABLER.disable_scroll(),requestAnimFrame(function(){o.move(r.oldTemplate,r.newTemplate,{direction:"left",onComplete:h})}),setTimeout(function(){requestAnimFrame(function(){Assets.SCROLL_DISABLER.enable_scroll()})},1e3*Assets.PAGE_TRANSTION_SPEED*.6)}}function h(){r.onCompleteCallback&&r.onCompleteCallback(),r.newTemplate.loadRest&&r.newTemplate.loadRest(),r.newTemplate.buildTemplate&&requestAnimFrame(r.newTemplate.buildTemplate),r.newTemplate.unpause&&requestAnimFrame(r.newTemplate.unpause),r=null,s=!1,c()}return t._options=o._options,Array.prototype.pushUnique=function(t){return-1==this.indexOf(t)&&(this.push(t),!0)},t.go=function(t,e,i){var n;Assets.FIRST_PAGE_TRANSITION=!1,Assets.CLICKED_MENU_LINK?(i&&i(),i=null,n=Assets.MAIN_MENU):(n=t)._path=e.getAttribute("data-path"),BrowserDetect.DESKTOP&&(Assets.DELAY_CASE_IMAGES=!0),ContentManager.nextTemplate();var r=ContentManager._prevTemplateObj.template;r._path=ContentManager._newPath,r.style.opacity=0;var o=parseInt(n.style.zIndex)||0;n.style.zIndex=o+1,r.style.zIndex=o+2,TweenMax.set(r,{x:Math.ceil(window.innerWidth+2),y:0,z:0});var s={oldTemplate:n,newTemplate:r,onCompleteCallback:i};a.push(s),c(),Assets.CLICKED_MENU_LINK=!1},t}function Preloader(){var e,i,n,r,o,s,a,l,t,c=new SmartObject,h=new FullScreenStackTransition,d=!1;function u(t){TweenMax.to(a,.2,{opacity:.5,ease:Linear.easeNone})}function p(t){TweenMax.to(a,.2,{opacity:1,ease:Linear.easeNone})}function f(t){i=Math.round((Assets.getWindowWidth()-40)/4),e.style.width=Math.round(Assets.getWindowWidth()-40)+"px",e.style.height=Math.round(Assets.getWindowHeight()-40)+"px",n.resize(),Assets.getWindowWidth()<1100?(r._x=20,o._x=20,o._y=292):(r._x=i+20,o._x=i+20,o._y=125),Assets.getWindowWidth()<640?(e.style.paddingBottom="50px",l.style.left="auto",l.style.right="20px"):(l.style.left=i+20+"px",l.style.right="auto",e.style.paddingBottom="0px"),c.style.width=window.innerWidth+"px",c.style.height=window.innerHeight+"px"}return c.update=function(t){if(d)return!1;100<=(t=t||100)&&(d=!0),s.innerHTML=t+"%"},c.kill=function(){if(!c)return!1;if(window.removeEventListener("resize",f),BrowserDetect.DESKTOP&&(a.removeEventListener(MouseEvent.MOUSE_OVER,u),a.removeEventListener(MouseEvent.MOUSE_OUT,p)),c.parentNode){var t=ContentManager._prevTemplateObj.template,e=c;e.style.zIndex=0,Assets.MAIN_MENU.slideInMenuIcon(),requestAnimFrame(function(){h.move(e,t,{speed:Assets.PAGE_TRANSTION_SPEED,direction:"left",onComplete:function(){h.kill(),c.parentNode.removeChild(c),c=null,document.body.style.background=document.documentElement.style.background="#AFB6B0"}})})}},document.body.appendChild(c),c.style.position="absolute",c.style.background="#565759",c.style.zIndex=99999,c.style.top=0,c.style.left=0,(e=new SmartObject).style.overflow="hidden",e.style.backgroundColor="#5e5f61",e.style.height=Assets.getWindowHeight()-20+"px",e._x=20,e._y=20,c.appendChild(e),i=(Assets.getWindowWidth()-40)/4,n=new HMLogo,e.appendChild(n),function(){(r=new SmartObject(document.createElement("span"))).innerHTML=Assets.DATA_STATIC.querySelector("#please-wait").innerHTML,r.style.fontSize="14px",r.style.display="block",r.style.color="#fff",r._x=i+20,r._y=30;var t=document.createElement("div");t.style.position="relative",t.style.width="43px",t.style.height="1px",t.style.backgroundColor="#fff",t.style.top=("Firefox"===BrowserDetect.BROWSER_NAME?-10:-8)+"px",t.style.left="87px",r.appendChild(t),e.appendChild(r)}(),(o=new SmartObject(document.createElement("span"))).innerHTML=Assets.DATA_STATIC.querySelector("#loading").innerHTML,o.style.fontSize="28px",o.style.lineHeight="30px",o.style.display="block",o.style.color="#fff",o._x=i+20,o._y=125,(s=new SmartObject(document.createElement("span"))).innerHTML="0%",s.style.fontSize="28px",s.style.lineHeight="30px",s.style.display="block",s.style.color="#b8c2b9",o.appendChild(s),e.appendChild(o),t=Assets.DATA_STATIC.querySelector("#email").innerHTML,(a=document.createElement("a")).style.position="absolute",a.href="mailto:"+t,a.innerHTML=t,a.style.textDecoration="none",a.style.fontFamily="TheinhardtRegular",a.style.fontSize="12px",a.style.color="#afb4b0",a.style.left="20px",a.style.bottom="20px",BrowserDetect.DESKTOP&&(a.addEventListener(MouseEvent.MOUSE_OVER,u),a.addEventListener(MouseEvent.MOUSE_OUT,p)),e.appendChild(a),(l=document.createElement("span")).style.position="absolute",l.innerHTML="&copy; Copyright "+(new Date).getFullYear(),l.style.fontFamily="TheinhardtRegular",l.style.fontSize="12px",l.style.color="#afb4b0",l.style.left="20px",l.style.bottom="20px",e.appendChild(l),f(),window.addEventListener("resize",f),c}function CaseSlideshow(s,a){var l,i,n,c=new SmartObject,e=!1,r=-1,h=[];function d(t){e||o(this._dir)}function u(t){e||o("up")}function o(t){e=!0,"up"==t?--r<0&&(r=l-1):l-1<++r&&(r=0),HM.AssetLoader.loadSingle(h[r].path,{onComplete:p})}function p(){(n=SmartObject(HM.AssetLoader.get(h[r].path)))._sizePerc=h[r].sizePerc,n.style.width="100%",n.style.height="auto",n.style.zIndex=0,i?(i.style.zIndex=1,TweenMax.to(i,.4,{_opacity:0,onComplete:t,ease:Linear.easeNone})):(n._opacity=0,TweenMax.to(n,.4,{_opacity:1,onComplete:t,ease:Linear.easeNone})),c.appendChild(n)}function t(){i&&c.removeChild(i),i=n,n=null,e=!1}return c.loadFirstSlide=function(){o("down")},c.resize=function(t,e){c.style.width=t+"px",i&&0!==i._getHeight()&&(c.style.height=i._getHeight()+"px"),c._slideshowBtnUp&&(t<690?(c._slideshowBtnUp._x=t-12-46,c._slideshowBtnDown._x=t-12-46):(c._slideshowBtnUp._x=t-42-46,c._slideshowBtnDown._x=t-42-46),i&&(c._slideshowBtnUp._y=i._getHeight()/2-52,c._slideshowBtnDown._y=i._getHeight()/2+6))},c.kill=function(){c._slideshowBtnUp.removeEvents(),c._slideshowBtnDown.removeEvents(),c._slideshowBtnUp=null,c._slideshowBtnDown=null,c.removeEventListener("click",u);for(var t=0,e=h.length;t<e;t++)HM.AssetLoader.destroy(h[t]);i&&(TweenMax.killTweensOf(i),i.parentNode&&c.removeChild(i)),n&&(TweenMax.killTweensOf(n),n.parentNode&&c.removeChild(n))},function(){c.style.overflow="hidden",c.style.top=0,c.style.left=0,c.style.width=Assets.getWindowWidth()+"px",c.style.clear="both",c.style.cssFloat="left",c.style.backgroundColor="#"+s.getAttribute("data-backgroundColor");var t=s.getAttribute("data-arrowColor");!function(t,e){var i=Assets.getWindowWidth(),n=new ArrowButton("left",d,"#"+e,null,{_options:{speed:.3,ease:Linear.easeNone}});n.style.zIndex=4,Assets.getWindowWidth()<690?n._x=i-12-46:n._x=i-42-46,n._y=a/2-52,n._dir="up",(n._slideshow=t).appendChild(n);var r=new ArrowButton("right",d,"#"+e,null,{_options:{speed:.3,ease:Linear.easeNone}});r.style.zIndex=4,Assets.getWindowWidth()<690?r._x=i-12-46:r._x=i-42-46,r._y=a/2+6,r._slideshow=t,r._dir="down",t.appendChild(r),t._slideshowBtnUp=n,t._slideshowBtnDown=r,t.addEventListener("click",u)}(c,t);var e=s.children;l=e.length;for(var i=0;i<l;i++){var n,r=1<window.devicePixelRatio;if(n=1==BrowserDetect.MOBILE?1==r?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==r?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/",h.push({path:n+e[i].getAttribute("data-image"),sizePerc:e[i].getAttribute("data-imageSizePerc")/100}),0==i){var o=e[i].getAttribute("data-height")/e[i].getAttribute("data-width");c.style.height=Math.round(Assets.getWindowWidth()*o)+"px"}}}(),c}function CalicoLogoGenerator(t,e,i){var n,r,o,s,a,l=window.innerWidth,c=window.innerHeight,h=!1,d=document.createElement("div");function u(){_(h),a.render()}function p(){switch(s.getFileType()){case"svg":a.saveAsSvg();break;case"jpg":a.saveAsJpg();break;case"png":a.saveAsPng();break;default:console.log("NO FILE TYPE SELECTED")}}function f(t){a.setColor(t),h="#fff"==t}function g(t){}function m(t){a.setNewText(t)}function y(){l=window.innerWidth,c=l*e,n.width=l,n.height=c,a.setPos(.5*l,.5*c),s.setSize(l,c),s.style.top=c-2+"px",s.style.left=1200<l?(window.innerWidth-1200)/2+"px":0,_()}function _(t){color=1==t?"#AAA":"#f4f4f4",r.fillStyle=color,r.fillRect(0,0,l,c)}return d.style.position="absolute",d.style.zIndex=10,d.init=function(){l=window.innerWidth,c=l*e,function(){(n=document.createElement("canvas")).style.position="absolute",n.width=l,n.height=c,r=n.getContext("2d"),d.appendChild(n);var t=document.createElement("canvas");t.id="fabricLogo",t.width=l,t.height=c,d.appendChild(t)}(),a=new CircleAlpabet(r),(s=new UILogoGen(l,c)).onDownload(p),s.onNewText(m),s.onColorChange(f),s.onTypePlaceChange(g),s.style.top=c-2+"px",i.appendChild(s),window.addEventListener("resize",y),y()},d.startRender=function(){o=setInterval(u,1e3/60)},d.stopRender=function(){clearInterval(o)},d}function CircleAlpabet(t){var m,a="#403c3c",n=8,r=8+n,c=-162,e={},o=t,l=0,h=0,y=[],s=[],d=18,u=0,p="BOTTOM",_=!1,i=new Circle(o,n,d,360/3.5,a);i.rotation=360/3.5*.5,y.push(i),s.push(i),d+=r;var v=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],b=["0","1","2","3","4","5","6","7","8","9"];e.activate=function(){window.addEventListener("mousedown",T),window.addEventListener("mouseup",A),function(){_LogoCanvas=new fabric.Canvas("fabricLogo");var s=[];_LogoCanvas.selection=!1,fabric.loadSVGFromURL("assets/images/projects/calico-logogenerator/CalicoLogo.svg",function(t,e){var i=new fabric.Group(s);i.hasControls=i.hasBorders=i.selectable=!1;var n="BOTTOM"==p?7:c,r="BOTTOM"==p?123:12,o=_?1:0;i.set({left:l+n,top:h+r,fill:a,opacity:o,width:75,height:75}),m=i,_LogoCanvas.add(i),_LogoCanvas.renderAll()},function(t,e){e.set("id",t.getAttribute("id")),s.push(e)})}()},e.deactivate=function(){window.removeEventListener("mousedown",T),window.removeEventListener("mouseup",A)},e.render=function(){for(var t=s.length,e=0;e<t;e++)s[e].render()},e.setLogoPosition=function(t){p=t},e.setColor=function(t){a=t;for(var e=y.length,i=0;i<e;i++)y[i].color=t;m&&(m.set({fill:t}),_LogoCanvas.renderAll())},e.setLogoPlacemenet=function(t){p=t,x()},e.setPos=function(t,e){l=t,h=e;for(var i=y.length,n=0;n<i;n++)y[n].setPos(l,h);x()},e.saveAsSvg=function(){if(f()){var t=g(),e=new Blob([t.toSVG()],{type:"text/plain;charset=utf-8"});saveAs(e,"calico_logo_"+w+".svg"),t.dispose(),x()}},e.saveAsJpg=function(){if(f()){var t=g();t.backgroundColor="#FFFFFF",t.renderAll();for(var e=t.toDataURL("image/jpg"),i=atob(e.substr(e.indexOf(",")+1)),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);saveAs(new Blob([r],{type:"image/jpg"}),"calico_logo_"+w+".jpg"),t.dispose(),x()}},e.saveAsPng=function(){if(f()){for(var t=g(),e=t.toDataURL("image/png"),i=atob(e.substr(e.indexOf(",")+1)),n=i.length,r=new Uint8Array(n);n--;)r[n]=i.charCodeAt(n);saveAs(new Blob([r],{type:"image/png"}),"calico_logo_"+w+".png"),t.dispose(),x()}};var w="";function f(){try{new Blob}catch(t){return console.log("Downloading of the logo is not supported in your browser. Go get the newest version or try another browser."),alert("Downloading of the logo is not supported in your browser. Go get the newest version or try another browser."),!1}return!(0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor"))||(alert("Safari is not one of the supported browsers for downloading of the Logo. Please Try either Google Chrome or Firefox"),!1)}function g(){TweenMax.killAll(!0),document.createElement("canvas").id="fabricRender";var t=d,e=d,i=2*d,n=2*d,r=y.length;4==r&&("BOTTOM"==p&&(n+=123-.5*d),"LEFT"==p&&(i+=m.getWidth()+162-.5*d,t+=m.getWidth()+162-.5*d));var o=new fabric.Canvas("fabricRender");o.setDimensions({width:i,height:n});for(var s=0;s<r;s++)y[s].renderFabric(o,t,e);if(4==r){var a="BOTTOM"==p?7:c,l="BOTTOM"==p?123:12;m.set({left:a+t,top:l+e}),o.add(m)}return o}function x(){if(m){var t="BOTTOM"==p?7:c,e="BOTTOM"==p?123:12;m.set({left:l+t,top:h+e}),_LogoCanvas.renderAll()}}function T(t){var e=l-t.pageX,i=h-t.pageY;Math.sqrt(e*e+i*i)<d&&window.addEventListener("mousemove",C)}function A(){window.removeEventListener("mousemove",C);for(var t=y.length,e=0;e<t;e++)TweenMax.to(y[e],1,{offsetX:0,offsetY:0,ease:Expo.easeOut})}function C(t){var e=l-t.pageX,i=h-t.pageY;e<-l?e=-l:l<e&&(e=l),i<-h?i=-h:h<i&&(i=h);Math.sqrt(e*e+i*i);for(var n=l,r=(Math.atan2(e,i),Math.PI,y.length),o=0;o<r;o++){var s=-y[o].radius/n;TweenMax.to(y[o],1,{offsetX:e*s,offsetY:i*s,ease:Expo.easeOut})}}function E(t){var e=360,i=new Circle(o,n,d,e,a);i.setPos(l,h),e=360/b.length,i.rotation=360*Math.random(),u=e*t+.5*e,y.push(i),s.push(i),TweenMax.to(i,1.5,{rotation:u,gap:e,ease:Quart.easeInOut}),d+=r}function S(t){var e=360,i=new Circle(o,n,d,e,a);i.setPos(l,h),e=360/v.length,i.rotation=360*Math.random(),u=e*t+.5*e-2*e,y.push(i),s.push(i),TweenMax.to(i,1.5,{rotation:u,gap:e,ease:Quart.easeInOut}),d+=r}function O(){1<y.length&&(y.pop().kill(function(t){var e=s.indexOf(t);-1!=e&&s.splice(e,1)}),d-=r)}return e.setNewText=function(t){if((t=t.toLowerCase())!=w){var e,i,n,r,o,s,a,l,c;if(t.length,_=!1,m&&(m.set({opacity:0}),_LogoCanvas.renderAll()),t.length>w.length)for(var h=t.length,d=e=w.length;d<h;d++){var u=t.charAt(d),p=v.indexOf(u);if(-1==p){if(-1==(p=b.indexOf(u)))continue;E(p)}else S(p)}else if(t.length<w.length){e=t.length;for(h=w.length-e,d=0;d<h;d++)O()}for(d=0;d<e;d++)if(w.charAt(d)!=t.charAt(d)){var f=d+1,g=v.indexOf(t.charAt(d));if(-1==g){if(-1==(g=b.indexOf(t.charAt(d))))continue;s=g,void 0,a=y[f],l=360/b.length,c=l*s+.5*l,TweenMax.to(a,3,{rotation:c,gap:l,ease:Quart.easeOut})}else i=g,void 0,n=y[f],r=360/v.length,o=r*i+.5*r-2*r,TweenMax.to(n,3,{rotation:o,gap:r,ease:Quart.easeOut})}w=t}},e.activate(),e}function Circle(t,u,r,e,i){var p={},n=t;p.x=0,p.y=0,p.radius=r,p.rotation=0,p.gap=e,p.offsetX=0,p.offsetY=0,p.rotationOffset=0,p.alpha=1,p.color=i;var o=u/p.radius*u*0;function f(t,e,i,n,r,o){o=0==o?o:1;var s=t+i*Math.cos(n*Math.PI/180),a=e+i*Math.sin(n*Math.PI/180),l=t+i*Math.cos(r*Math.PI/180),c=e+i*Math.sin(r*Math.PI/180);return[i,i,0,0,o,l-s,c-a].join(" ")}return p.render=function(){var t=360-this.gap+this.rotation+this.rotationOffset-o,e=this.rotation+this.rotationOffset+o;t-e<0&&(t+=-1*(t-e));var i=t/180*Math.PI;n.strokeStyle=p.color,n.beginPath(),n.arc(this.x+this.offsetX,this.y+this.offsetY,this.radius,e/180*Math.PI,i,!1),n.lineWidth=u,n.stroke()},p.setPos=function(t,e){this.x=t,this.y=e},p.kill=function(t){var e=this.radius;TweenMax.to(this,.9+.6*Math.random(),{gap:359,radius:e,rotation:360*Math.random(),onComplete:t,onCompleteParams:[this],ease:Quad.easeInOut})},p.renderFabric=function(t,e,i){var n=360-this.gap+this.rotation;e=e||0,i=i||0,t.add(function(t,e,i,n,r){var o="",s=Math.PI/180,a=i-.5*u,l=t+a*Math.cos(n*s),c=e+a*Math.sin(n*s);if(180<r-n){var h=f(t,e,a,n,n+180),d=f(t,e,a,n+180,r);o="M"+l+" "+c,o+=" a"+h+" a"+d,l=t+(a=i+.5*u)*Math.cos(r*s),c=e+a*Math.sin(r*s),o+="L"+l+" "+c,h=f(t,e,a,r,r+180,0),d=f(t,e,a,r+180,n,0),o+=" a"+h+" a"+d,l=t+(a=i-.5*u)*Math.cos(n*s),c=e+a*Math.sin(n*s),o+="L"+l+" "+c,o+="z"}else o="M"+l+" "+c,o+=" a"+f(t,e,i,n,r),console.log("Angles under 180deg needs to be implemented, if needed.");return new fabric.Path(o,{width:2*i,height:2*i,fill:p.color})}(e,i,r,this.rotation+.01,n+.01))},p}function UILogoGen(t,e){var n=180,i=document.createElement("div");i.style.position="absolute",i.style.zIndex=12;var r,o,s,a,l=t||0;function c(){var t=l;1200<t&&(t=1200);var e=t-170,i=n/3;a.style.left="85px",a.style.top=i+"px",a.style.width=e+"px",a.style.height=i+"px",r.style.width=t+"px",r.style.height=n+"px",r.style.backgroundColor="#e1e1e1",o.style.width=t-85+"px",o.style.height=2*i+"px"}return(r=document.createElement("div")).style.position="absolute",r.style.backgroundColor="#D5D5D5",(o=document.createElement("div")).style.position="absolute",o.style.marginTop="60px",o.style.backgroundColor="#D5D5D5",r.appendChild(o),i.appendChild(r),(s=document.createElement("span")).innerHTML="Calico Logo Generator",s.style.position="absolute",s.style.fontSize="16px",s.style.fontFamily="TheinhardtRegular",s.style.whiteSpace="nowrap",s.style.color="#9a9898",s.style.top="20px",s.style.left="20px",i.appendChild(s),a=new LogoInputField("Type your word here"),i.appendChild(a),c(),i.setSize=function(t,e){l=t,e,c()},i.onNewText=function(t){a.onChange(t)},i.onDownload=function(t){},i.onColorChange=function(t){},i.onTypePlaceChange=function(t){},i.getHeight=function(){return n},i.getFileType=function(){},i}function LogoInputField(){var t=new TextInput("Write here");return t.restrict="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t.maxChars=26,t.size=20,t.style.width="916px",t.style.height="60px",t.style.fontSize="22px",t.style.fontFamily="TheinhardtRegular",t.style.pointerEvents="all",t.style.backgroundColor="#fff",t}function TextField(t,e){var i="",n=document.createElement("div");return n.style.position="absolute",n.style.color="#BBBBBB",n.style.width=t+"px",n.style.height=e+"px",n.style.fontFamily="mark_otbold",n.style.textAlign="center",n.style.fontSize="12px",n.getText=function(){return i},n.setText=function(t){i=t,n.innerHTML=i},n}function TextInput(o){var e,s=document.createElement("input");s.style.position="absolute",s.value=o;var i="";function t(){s.value==o&&(s.value=""),document.addEventListener("keyup",a)}function n(){""==s.value&&(s.value=o),document.removeEventListener("keyup",a)}function r(t){return s.value==o&&(s.value=""),e=t,(-1==s.maxChars||s.value.length<s.maxChars)&&function(t){if(!s.restrict.length)return!0;var e="number"==typeof t.which?t.which:t.keyCode,i=String.fromCharCode(e);return 8===e||0===e||-1!==s.restrict.indexOf(i)}(e);var e}function a(t){!function(){if(s.value==o)return;var t,e=s.value,i=e.length,n="",r=null;for(t=0;t<i;t+=1)r=e.charAt(t),-1!==s.restrict.indexOf(r)&&(n+=r);n!=s.value&&(s.value=n)}(),e&&i!=s.value&&(i=s.value,e(s.value))}return s.maxChars=-1,s.restrict="",s.style.border="none",s.style.fontFamily="mark_otlight",s.style.fontSize="25px",s.style.margin=0,s.style.padding="0 0 0 17px",s.style.boxSizing="border-box",s.style.color="#7c7c7c",s.style.resize="none",s.style.outline="0px !important",s.style.webkitAppearance="none",s.style.lineHeight="20px",s.style.letterSpacing="0.5px",s.style.marginBottom="-3px",s.onkeypress=r,s.onfocus=t,s.onblur=n,s.onChange=function(t){e=t},s}dat.gui=dat.gui||{},dat.utils=dat.utils||{},dat.controllers=dat.controllers||{},dat.dom=dat.dom||{},dat.color=dat.color||{},dat.utils.css={load:function(t,e){var i=(e=e||document).createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.getElementsByTagName("head")[0].appendChild(i)},inject:function(t,e){e=e||document;var i=document.createElement("style");i.type="text/css",i.innerHTML=t,e.getElementsByTagName("head")[0].appendChild(i)}},dat.utils.common=function(){var o=Array.prototype.forEach,n=Array.prototype.slice;return{BREAK:{},extend:function(i){return this.each(n.call(arguments,1),function(t){for(var e in t)this.isUndefined(t[e])||(i[e]=t[e])},this),i},defaults:function(i){return this.each(n.call(arguments,1),function(t){for(var e in t)this.isUndefined(i[e])&&(i[e]=t[e])},this),i},compose:function(){var i=n.call(arguments);return function(){for(var t=n.call(arguments),e=i.length-1;0<=e;e--)t=[i[e].apply(this,t)];return t[0]}},each:function(t,e,i){if(o&&t.forEach===o)t.forEach(e,i);else if(t.length===t.length+0)for(var n=0,r=t.length;n<r&&!(n in t&&e.call(i,t[n],n)===this.BREAK);n++);else for(n in t)if(e.call(i,t[n],n)===this.BREAK)break},defer:function(t){setTimeout(t,0)},toArray:function(t){return t.toArray?t.toArray():n.call(t)},isUndefined:function(t){return void 0===t},isNull:function(t){return null===t},isNaN:function(t){return t!=t},isArray:Array.isArray||function(t){return t.constructor===Array},isObject:function(t){return t===Object(t)},isNumber:function(t){return t===t+0},isString:function(t){return t===t+""},isBoolean:function(t){return!1===t||!0===t},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)}}}(),dat.controllers.Controller=function(t){var e=function(t,e){this.initialValue=t[e],this.domElement=document.createElement("div"),this.object=t,this.property=e,this.__onFinishChange=this.__onChange=void 0};return dat.utils.common.extend(e.prototype,{onChange:function(t){return this.__onChange=t,this},onFinishChange:function(t){return this.__onFinishChange=t,this},setValue:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),e}(),dat.dom.dom=function(s){function e(t){return"0"===t||s.isUndefined(t)?0:(t=t.match(i),s.isNull(t)?0:parseFloat(t[1]))}var a={};s.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(t,e){s.each(t,function(t){a[t]=e})});var i=/(\d+(\.\d+)?)px/,r={makeSelectable:function(t,e){void 0!==t&&void 0!==t.style&&(t.onselectstart=e?function(){return!1}:function(){},t.style.MozUserSelect=e?"auto":"none",t.style.KhtmlUserSelect=e?"auto":"none",t.unselectable=e?"on":"off")},makeFullscreen:function(t,e,i){s.isUndefined(e)&&(e=!0),s.isUndefined(i)&&(i=!0),t.style.position="absolute",e&&(t.style.left=0,t.style.right=0),i&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,e,i,n){i=i||{};var r=a[e];if(!r)throw Error("Event type "+e+" not supported.");var o=document.createEvent(r);switch(r){case"MouseEvents":o.initMouseEvent(e,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,i.x||i.clientX||0,i.y||i.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":r=o.initKeyboardEvent||o.initKeyEvent,s.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),r(e,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:o.initEvent(e,i.bubbles||!1,i.cancelable||!0)}s.defaults(o,n),t.dispatchEvent(o)},bind:function(t,e,i,n){return t.addEventListener?t.addEventListener(e,i,n||!1):t.attachEvent&&t.attachEvent("on"+e,i),r},unbind:function(t,e,i,n){return t.removeEventListener?t.removeEventListener(e,i,n||!1):t.detachEvent&&t.detachEvent("on"+e,i),r},addClass:function(t,e){if(void 0===t.className)t.className=e;else if(t.className!==e){var i=t.className.split(/ +/);-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return r},removeClass:function(t,e){if(e){if(void 0!==t.className)if(t.className===e)t.removeAttribute("class");else{var i=t.className.split(/ +/),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))}}else t.className=void 0;return r},hasClass:function(t,e){return RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(t.className)||!1},getWidth:function(t){return e((t=getComputedStyle(t))["border-left-width"])+e(t["border-right-width"])+e(t["padding-left"])+e(t["padding-right"])+e(t.width)},getHeight:function(t){return e((t=getComputedStyle(t))["border-top-width"])+e(t["border-bottom-width"])+e(t["padding-top"])+e(t["padding-bottom"])+e(t.height)},getOffset:function(t){var e={left:0,top:0};if(t.offsetParent)for(;e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;);return e},isActive:function(t){return t===document.activeElement&&(t.type||t.href)}};return r}(dat.utils.common),dat.controllers.OptionController=function(t,o,s){var a=function(t,e,i){a.superclass.call(this,t,e);var n=this;if(this.__select=document.createElement("select"),s.isArray(i)){var r={};s.each(i,function(t){r[t]=t}),i=r}s.each(i,function(t,e){var i=document.createElement("option");i.innerHTML=e,i.setAttribute("value",t),n.__select.appendChild(i)}),this.updateDisplay(),o.bind(this.__select,"change",function(){n.setValue(this.options[this.selectedIndex].value)}),this.domElement.appendChild(this.__select)};return a.superclass=t,s.extend(a.prototype,t.prototype,{setValue:function(t){return t=a.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),a.superclass.prototype.updateDisplay.call(this)}}),a}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.NumberController=function(t,n){var r=function(t,e,i){r.superclass.call(this,t,e),i=i||{},this.__min=i.min,this.__max=i.max,this.__step=i.step,n.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__impliedStep=this.__step,t=-1<(t=(t=this.__impliedStep).toString()).indexOf(".")?t.length-t.indexOf(".")-1:0,this.__precision=t};return r.superclass=t,n.extend(r.prototype,t.prototype,{setValue:function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&0!=t%this.__step&&(t=Math.round(t/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,t)},min:function(t){return this.__min=t,this},max:function(t){return this.__max=t,this},step:function(t){return this.__step=t,this}}),r}(dat.controllers.Controller,dat.utils.common),dat.controllers.NumberControllerBox=function(t,l,c){var h=function(t,e,i){function n(){var t=parseFloat(a.__input.value);c.isNaN(t)||a.setValue(t)}function r(t){var e=s-t.clientY;a.setValue(a.getValue()+e*a.__impliedStep),s=t.clientY}function o(){l.unbind(window,"mousemove",r),l.unbind(window,"mouseup",o)}this.__truncationSuspended=!1,h.superclass.call(this,t,e,i);var s,a=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),l.bind(this.__input,"change",n),l.bind(this.__input,"blur",function(){n(),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}),l.bind(this.__input,"mousedown",function(t){l.bind(window,"mousemove",r),l.bind(window,"mouseup",o),s=t.clientY}),l.bind(this.__input,"keydown",function(t){13===t.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return h.superclass=t,c.extend(h.prototype,t.prototype,{updateDisplay:function(){var t,e=this.__input;if(this.__truncationSuspended)t=this.getValue();else{t=this.getValue();var i=Math.pow(10,this.__precision);t=Math.round(t*i)/i}return e.value=t,h.superclass.prototype.updateDisplay.call(this)}}),h}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common),dat.controllers.NumberControllerSlider=function(t,c,e,i,n){var a=function(t,e,i,n,r){function o(t){t.preventDefault();var e,i,n,r,o,s=c.getOffset(l.__background),a=c.getWidth(l.__background);return l.setValue((e=t.clientX,i=s.left,n=s.left+a,r=l.__min,o=l.__max,r+(e-i)/(n-i)*(o-r))),!1}function s(){c.unbind(window,"mousemove",o),c.unbind(window,"mouseup",s),l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}a.superclass.call(this,t,e,{min:i,max:n,step:r});var l=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),c.bind(this.__background,"mousedown",function(t){c.bind(window,"mousemove",o),c.bind(window,"mouseup",s),o(t)}),c.addClass(this.__background,"slider"),c.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return a.superclass=t,a.useDefaultStyles=function(){e.inject("/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}")},i.extend(a.prototype,t.prototype,{updateDisplay:function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",a.superclass.prototype.updateDisplay.call(this)}}),a}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common),dat.controllers.FunctionController=function(t,r,e){var o=function(t,e,i){o.superclass.call(this,t,e);var n=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,r.bind(this.__button,"click",function(t){return t.preventDefault(),n.fire(),!1}),r.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return o.superclass=t,e.extend(o.prototype,t.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.BooleanController=function(t,n,e){var r=function(t,e){r.superclass.call(this,t,e);var i=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),n.bind(this.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=t,e.extend(r.prototype,t.prototype,{setValue:function(t){return t=r.superclass.prototype.setValue.call(this,t),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(t=t.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(dat.utils.common),dat.color.interpret=function(t,n){var r,o,e=[{litmus:n.isString,conversions:{THREE_CHAR_HEX:{read:function(t){return null!==(t=t.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i))&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:t},SIX_CHAR_HEX:{read:function(t){return null!==(t=t.match(/^#([A-F0-9]{6})$/i))&&{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:t},CSS_RGB:{read:function(t){return null!==(t=t.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(t){return null!==(t=t.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/))&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:n.isNumber,conversions:{HEX:{read:function(t){return{space:"HEX",hex:t,conversionName:"HEX"}},write:function(t){return t.hex}}}},{litmus:n.isArray,conversions:{RGB_ARRAY:{read:function(t){return 3==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2]}},write:function(t){return[t.r,t.g,t.b]}},RGBA_ARRAY:{read:function(t){return 4==t.length&&{space:"RGB",r:t[0],g:t[1],b:t[2],a:t[3]}},write:function(t){return[t.r,t.g,t.b,t.a]}}}},{litmus:n.isObject,conversions:{RGBA_OBJ:{read:function(t){return!!(n.isNumber(t.r)&&n.isNumber(t.g)&&n.isNumber(t.b)&&n.isNumber(t.a))&&{space:"RGB",r:t.r,g:t.g,b:t.b,a:t.a}},write:function(t){return{r:t.r,g:t.g,b:t.b,a:t.a}}},RGB_OBJ:{read:function(t){return!!(n.isNumber(t.r)&&n.isNumber(t.g)&&n.isNumber(t.b))&&{space:"RGB",r:t.r,g:t.g,b:t.b}},write:function(t){return{r:t.r,g:t.g,b:t.b}}},HSVA_OBJ:{read:function(t){return!!(n.isNumber(t.h)&&n.isNumber(t.s)&&n.isNumber(t.v)&&n.isNumber(t.a))&&{space:"HSV",h:t.h,s:t.s,v:t.v,a:t.a}},write:function(t){return{h:t.h,s:t.s,v:t.v,a:t.a}}},HSV_OBJ:{read:function(t){return!!(n.isNumber(t.h)&&n.isNumber(t.s)&&n.isNumber(t.v))&&{space:"HSV",h:t.h,s:t.s,v:t.v}},write:function(t){return{h:t.h,s:t.s,v:t.v}}}}}];return function(){o=!1;var i=1<arguments.length?n.toArray(arguments):arguments[0];return n.each(e,function(t){if(t.litmus(i))return n.each(t.conversions,function(t,e){if(r=t.read(i),!1===o&&!1!==r)return(o=r).conversionName=e,r.conversion=t,n.BREAK}),n.BREAK}),o}}(dat.color.toString,dat.utils.common),dat.GUI=dat.gui.GUI=function(t,e,i,o,s,a,l,c,h,n,d,r,u,p,f){function g(t,e,i,n){if(void 0===e[i])throw Error("Object "+e+' has no property "'+i+'"');n.color?e=new d(e,i):(e=[e,i].concat(n.factoryArgs),e=o.apply(t,e)),n.before instanceof s&&(n.before=n.before.__li),y(t,e),p.addClass(e.domElement,"c"),i=document.createElement("span"),p.addClass(i,"property-name"),i.innerHTML=e.property;var r=document.createElement("div");return r.appendChild(i),r.appendChild(e.domElement),n=m(t,r,n.before),p.addClass(n,M.CLASS_CONTROLLER_ROW),p.addClass(n,typeof e.getValue()),function(e,i,n){if(n.__li=i,n.__gui=e,f.extend(n,{options:function(t){return 1<arguments.length?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[f.toArray(arguments)]})):f.isArray(t)||f.isObject(t)?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(t){return n.__li.firstElementChild.firstElementChild.innerHTML=t,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof h){var r=new c(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});f.each(["updateDisplay","onChange","onFinishChange"],function(t){var e=n[t],i=r[t];n[t]=r[t]=function(){var t=Array.prototype.slice.call(arguments);return e.apply(n,t),i.apply(r,t)}}),p.addClass(i,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof c){var t=function(t){return f.isNumber(n.__min)&&f.isNumber(n.__max)?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=f.compose(t,n.min),n.max=f.compose(t,n.max)}else n instanceof a?(p.bind(i,"click",function(){p.fakeEvent(n.__checkbox,"click")}),p.bind(n.__checkbox,"click",function(t){t.stopPropagation()})):n instanceof l?(p.bind(i,"click",function(){p.fakeEvent(n.__button,"click")}),p.bind(i,"mouseover",function(){p.addClass(n.__button,"hover")}),p.bind(i,"mouseout",function(){p.removeClass(n.__button,"hover")})):n instanceof d&&(p.addClass(i,"color"),n.updateDisplay=f.compose(function(t){return i.style.borderLeftColor=n.__color.toString(),t},n.updateDisplay),n.updateDisplay());n.setValue=f.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&w(e.getRoot(),!0),t},n.setValue)}(t,n,e),t.__controllers.push(e),e}function m(t,e,i){var n=document.createElement("li");return e&&n.appendChild(e),i?t.__ul.insertBefore(n,params.before):t.__ul.appendChild(n),t.onResize(),n}function y(t,e){var i=t.getRoot(),n=i.__rememberedObjects.indexOf(e.object);if(-1!=n){var r=i.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(r={},i.__rememberedObjectIndecesToControllers[n]=r),r[e.property]=e,i.load&&i.load.remembered){if((i=i.load.remembered)[t.preset])i=i[t.preset];else{if(!i[T])return;i=i[T]}i[n]&&void 0!==i[n][e.property]&&(n=i[n][e.property],e.initialValue=n,e.setValue(n))}}}function _(t,e){t.domElement.style.width=e+"px",t.__save_row&&t.autoPlace&&(t.__save_row.style.width=e+"px"),t.__closeButton&&(t.__closeButton.style.width=e+"px")}function v(n,r){var o={};return f.each(n.__rememberedObjects,function(t,e){var i={};f.each(n.__rememberedObjectIndecesToControllers[e],function(t,e){i[e]=r?t.initialValue:t.getValue()}),o[e]=i}),o}function b(t,e,i){var n=document.createElement("option");n.innerHTML=e,n.value=e,t.__preset_select.appendChild(n),i&&(t.__preset_select.selectedIndex=t.__preset_select.length-1)}function w(t,e){var i=t.__preset_select[t.__preset_select.selectedIndex];i.innerHTML=e?i.value+"*":i.value}t.inject(".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n");var x,T="Default";try{x="localStorage"in window&&null!==window.localStorage}catch(t){x=!1}var A,C,E=!0,S=!1,O=[],M=function(e){function i(){localStorage.setItem(document.location.href+".gui",JSON.stringify(n.getSaveObject()))}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),p.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=f.defaults(e,{autoPlace:!0,width:M.DEFAULT_WIDTH}),e=f.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),f.isUndefined(e.load)?e.load={preset:T}:e.preset&&(e.load.preset=e.preset),f.isUndefined(e.parent)&&e.hideable&&O.push(this),e.resizable=f.isUndefined(e.parent)&&e.resizable,e.autoPlace&&f.isUndefined(e.scrollable)&&(e.scrollable=!0);var t,r=x&&"true"===localStorage.getItem(document.location.href+".isLocal");if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:e.load.preset},set:function(t){for(n.parent?n.getRoot().preset=t:e.load.preset=t,t=0;t<this.__preset_select.length;t++)this.__preset_select[t].value==this.preset&&(this.__preset_select.selectedIndex=t);n.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,_(n,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,s&&(s.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?p.addClass(n.__ul,M.CLASS_CLOSED):p.removeClass(n.__ul,M.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?M.TEXT_OPEN:M.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return r},set:function(t){x&&((r=t)?p.bind(window,"unload",i):p.unbind(window,"unload",i),localStorage.setItem(document.location.href+".isLocal",t))}}}),f.isUndefined(e.parent)){if(e.closed=!1,p.addClass(this.domElement,M.CLASS_MAIN),p.makeSelectable(this.domElement,!1),x&&r){n.useLocalStorage=!0;var o=localStorage.getItem(document.location.href+".gui");o&&(e.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=M.TEXT_CLOSED,p.addClass(this.__closeButton,M.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),p.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===e.closed&&(e.closed=!0);var s=document.createTextNode(e.name);p.addClass(s,"controller-name"),o=m(n,s),p.addClass(this.__ul,M.CLASS_CLOSED),p.addClass(o,"title"),p.bind(o,"click",function(t){return t.preventDefault(),n.closed=!n.closed,!1}),e.closed||(this.closed=!1)}e.autoPlace&&(f.isUndefined(e.parent)&&(E&&(C=document.createElement("div"),p.addClass(C,"dg"),p.addClass(C,M.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(C),E=!1),C.appendChild(this.domElement),p.addClass(this.domElement,M.CLASS_AUTO_PLACE)),this.parent||_(n,e.width)),p.bind(window,"resize",function(){n.onResize()}),p.bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),p.bind(this.__ul,"transitionend",function(){n.onResize()}),p.bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),e.resizable&&function(e){function t(t){return t.preventDefault(),r=t.clientX,p.addClass(e.__closeButton,M.CLASS_DRAG),p.bind(window,"mousemove",i),p.bind(window,"mouseup",n),!1}function i(t){return t.preventDefault(),e.width+=r-t.clientX,e.onResize(),r=t.clientX,!1}function n(){p.removeClass(e.__closeButton,M.CLASS_DRAG),p.unbind(window,"mousemove",i),p.unbind(window,"mouseup",n)}var r;e.__resize_handle=document.createElement("div"),f.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),p.bind(e.__resize_handle,"mousedown",t),p.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}(this),n.getRoot(),e.parent||((t=n.getRoot()).width+=1,f.defer(function(){t.width-=1}))};return M.toggleHide=function(){S=!S,f.each(O,function(t){t.domElement.style.zIndex=S?-999:999,t.domElement.style.opacity=S?0:1})},M.CLASS_AUTO_PLACE="a",M.CLASS_AUTO_PLACE_CONTAINER="ac",M.CLASS_MAIN="main",M.CLASS_CONTROLLER_ROW="cr",M.CLASS_TOO_TALL="taller-than-window",M.CLASS_CLOSED="closed",M.CLASS_CLOSE_BUTTON="close-button",M.CLASS_DRAG="drag",M.DEFAULT_WIDTH=245,M.TEXT_CLOSED="Close Controls",M.TEXT_OPEN="Open Controls",p.bind(window,"keydown",function(t){"text"===document.activeElement.type||72!==t.which&&72!=t.keyCode||M.toggleHide()},!1),f.extend(M.prototype,{add:function(t,e){return g(this,t,e,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(t,e){return g(this,t,e,{color:!0})},remove:function(t){this.__ul.removeChild(t.__li),this.__controllers.slice(this.__controllers.indexOf(t),1);var e=this;f.defer(function(){e.onResize()})},destroy:function(){this.autoPlace&&C.removeChild(this.domElement)},addFolder:function(t){if(void 0!==this.__folders[t])throw Error('You already have a folder in this GUI by the name "'+t+'"');var e={name:t,parent:this};return e.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[t]&&(e.closed=this.load.folders[t].closed,e.load=this.load.folders[t]),e=new M(e),this.__folders[t]=e,t=m(this,e.domElement),p.addClass(t,"folder"),e},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=p.getOffset(e.__ul).top,i=0;f.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(i+=p.getHeight(t))}),window.innerHeight-t-20<i?(p.addClass(e.domElement,M.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(p.removeClass(e.domElement,M.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&f.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(f.isUndefined(A)&&((A=new u).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'),this.parent)throw Error("You can only call remember on a top level GUI.");var e=this;f.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&function(i){var t=i.__save_row=document.createElement("li");p.addClass(i.domElement,"has-save"),i.__ul.insertBefore(t,i.__ul.firstChild),p.addClass(t,"save-row");var e=document.createElement("span");e.innerHTML="&nbsp;",p.addClass(e,"button gears");var n=document.createElement("span");n.innerHTML="Save",p.addClass(n,"button"),p.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",p.addClass(r,"button"),p.addClass(r,"save-as");var o=document.createElement("span");o.innerHTML="Revert",p.addClass(o,"button"),p.addClass(o,"revert");var s=i.__preset_select=document.createElement("select");if(i.load&&i.load.remembered?f.each(i.load.remembered,function(t,e){b(i,e,e==i.preset)}):b(i,T,!1),p.bind(s,"change",function(){for(var t=0;t<i.__preset_select.length;t++)i.__preset_select[t].innerHTML=i.__preset_select[t].value;i.preset=this.value}),t.appendChild(s),t.appendChild(e),t.appendChild(n),t.appendChild(r),t.appendChild(o),x){t=document.getElementById("dg-save-locally");var a=document.getElementById("dg-local-explain");t.style.display="block",t=document.getElementById("dg-local-storage"),"true"===localStorage.getItem(document.location.href+".isLocal")&&t.setAttribute("checked","checked");var l=function(){a.style.display=i.useLocalStorage?"block":"none"};l(),p.bind(t,"change",function(){i.useLocalStorage=!i.useLocalStorage,l()})}var c=document.getElementById("dg-new-constructor");p.bind(c,"keydown",function(t){!t.metaKey||67!==t.which&&67!=t.keyCode||A.hide()}),p.bind(e,"click",function(){c.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),A.show(),c.focus(),c.select()}),p.bind(n,"click",function(){i.save()}),p.bind(r,"click",function(){var t=prompt("Enter a new preset name.");t&&i.saveAs(t)}),p.bind(o,"click",function(){i.revert()})}(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&_(this,this.width)},getRoot:function(){for(var t=this;t.parent;)t=t.parent;return t},getSaveObject:function(){var i=this.load;return i.closed=this.closed,0<this.__rememberedObjects.length&&(i.preset=this.preset,i.remembered||(i.remembered={}),i.remembered[this.preset]=v(this)),i.folders={},f.each(this.__folders,function(t,e){i.folders[e]=t.getSaveObject()}),i},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=v(this),w(this,!1)},saveAs:function(t){this.load.remembered||(this.load.remembered={},this.load.remembered[T]=v(this,!0)),this.load.remembered[t]=v(this),this.preset=t,b(this,t,!0)},revert:function(e){f.each(this.__controllers,function(t){this.getRoot().load.remembered?y(e||this.getRoot(),t):t.setValue(t.initialValue)},this),f.each(this.__folders,function(t){t.revert(t)}),e||w(this.getRoot(),!1)},listen:function(t){var e=0==this.__listening.length;this.__listening.push(t),e&&function t(e){0!=e.length&&r(function(){t(e)}),f.each(e,function(t){t.updateDisplay()})}(this.__listening)}}),M}(dat.utils.css,0,0,dat.controllers.factory=function(o,s,a,l,c,h,d){return function(t,e,i,n){var r=t[e];return d.isArray(i)||d.isObject(i)?new o(t,e,i):d.isNumber(r)?d.isNumber(i)&&d.isNumber(n)?new a(t,e,i,n):new s(t,e,{min:i,max:n}):d.isString(r)?new l(t,e):d.isFunction(r)?new c(t,e,""):d.isBoolean(r)?new h(t,e):void 0}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(t,r,e){var o=function(t,e){function i(){n.setValue(n.__input.value)}o.superclass.call(this,t,e);var n=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),r.bind(this.__input,"keyup",i),r.bind(this.__input,"change",i),r.bind(this.__input,"blur",function(){n.__onFinishChange&&n.__onFinishChange.call(n,n.getValue())}),r.bind(this.__input,"keydown",function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=t,e.extend(o.prototype,t.prototype,{updateDisplay:function(){return r.isActive(this.__input)||(this.__input.value=this.getValue()),o.superclass.prototype.updateDisplay.call(this)}}),o}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,dat.controllers.ColorController=function(t,d,u,p,f){function g(e,i,n,r){e.style.background="",f.each(o,function(t){e.style.cssText+="background: "+t+"linear-gradient("+i+", "+n+" 0%, "+r+" 100%); "})}var m=function(t,e){function i(t){s(t),d.bind(window,"mousemove",s),d.bind(window,"mouseup",n)}function n(){d.unbind(window,"mousemove",s),d.unbind(window,"mouseup",n)}function r(){var t=p(this.value);!1!==t?(l.__color.__state=t,l.setValue(l.__color.toOriginal())):this.value=l.__color.toString()}function o(){d.unbind(window,"mousemove",a),d.unbind(window,"mouseup",o)}function s(t){t.preventDefault();var e=d.getWidth(l.__saturation_field),i=d.getOffset(l.__saturation_field),n=(t.clientX-i.left+document.body.scrollLeft)/e;return 1<(t=1-(t.clientY-i.top+document.body.scrollTop)/e)?t=1:t<0&&(t=0),1<n?n=1:n<0&&(n=0),l.__color.v=t,l.__color.s=n,l.setValue(l.__color.toOriginal()),!1}function a(t){t.preventDefault();var e=d.getHeight(l.__hue_field),i=d.getOffset(l.__hue_field);return 1<(t=1-(t.clientY-i.top+document.body.scrollTop)/e)?t=1:t<0&&(t=0),l.__color.h=360*t,l.setValue(l.__color.toOriginal()),!1}m.superclass.call(this,t,e),this.__color=new u(this.getValue()),this.__temp=new u(0);var l=this;this.domElement=document.createElement("div"),d.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",d.bind(this.__input,"keydown",function(t){13===t.keyCode&&r.call(this)}),d.bind(this.__input,"blur",r),d.bind(this.__selector,"mousedown",function(t){d.addClass(this,"drag").bind(window,"mouseup",function(t){d.removeClass(l.__selector,"drag")})});var c,h=document.createElement("div");f.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),f.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),f.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),f.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),f.extend(h.style,{width:"100%",height:"100%",background:"none"}),g(h,"top","rgba(0,0,0,0)","#000"),f.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),(c=this.__hue_field).style.background="",c.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",c.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",c.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",f.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),d.bind(this.__saturation_field,"mousedown",i),d.bind(this.__field_knob,"mousedown",i),d.bind(this.__hue_field,"mousedown",function(t){a(t),d.bind(window,"mousemove",a),d.bind(window,"mouseup",o)}),this.__saturation_field.appendChild(h),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};m.superclass=t,f.extend(m.prototype,t.prototype,{updateDisplay:function(){var e=p(this.getValue());if(!1!==e){var i=!1;f.each(u.COMPONENTS,function(t){if(!f.isUndefined(e[t])&&!f.isUndefined(this.__color.__state[t])&&e[t]!==this.__color.__state[t])return i=!0,{}},this),i&&f.extend(this.__color.__state,e)}f.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var t=this.__color.v<.5||.5<this.__color.s?255:0,n=255-t;f.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+t+","+t+","+t+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,g(this.__saturation_field,"left","#fff",this.__temp.toString()),f.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+t+","+t+","+t+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}});var o=["-moz-","-o-","-webkit-","-ms-",""];return m}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(t,n,e,r){function i(t,e,i){Object.defineProperty(t,e,{get:function(){return"RGB"===this.__state.space||s(this,e,i),this.__state[e]},set:function(t){"RGB"!==this.__state.space&&(s(this,e,i),this.__state.space="RGB"),this.__state[e]=t}})}function o(t,e){Object.defineProperty(t,e,{get:function(){return"HSV"===this.__state.space||a(this),this.__state[e]},set:function(t){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[e]=t}})}function s(t,e,i){if("HEX"===t.__state.space)t.__state[e]=n.component_from_hex(t.__state.hex,i);else{if("HSV"!==t.__state.space)throw"Corrupted color state";r.extend(t.__state,n.hsv_to_rgb(t.__state.h,t.__state.s,t.__state.v))}}function a(t){var e=n.rgb_to_hsv(t.r,t.g,t.b);r.extend(t.__state,{s:e.s,v:e.v}),r.isNaN(e.h)?r.isUndefined(t.__state.h)&&(t.__state.h=0):t.__state.h=e.h}var l=function(){if(this.__state=t.apply(this,arguments),!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return l.COMPONENTS="r g b h s v hex a".split(" "),r.extend(l.prototype,{toString:function(){return e(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(l.prototype,"r",2),i(l.prototype,"g",1),i(l.prototype,"b",0),o(l.prototype,"h"),o(l.prototype,"s"),o(l.prototype,"v"),Object.defineProperty(l.prototype,"a",{get:function(){return this.__state.a},set:function(t){this.__state.a=t}}),Object.defineProperty(l.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=n.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(t){this.__state.space="HEX",this.__state.hex=t}}),l}(dat.color.interpret,dat.color.math=function(){var n;return{hsv_to_rgb:function(t,e,i){var n=t/60-Math.floor(t/60),r=i*(1-e),o=i*(1-n*e);return{r:255*(t=[[i,e=i*(1-(1-n)*e),r],[o,i,r],[r,i,e],[r,o,i],[e,r,i],[i,r,o]][Math.floor(t/60)%6])[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(t,e,i){var n=Math.min(t,e,i),r=Math.max(t,e,i);n=r-n;return 0==r?{h:NaN,s:0,v:0}:((t=(t==r?(e-i)/n:e==r?2+(i-t)/n:4+(t-e)/n)/6)<0&&(t+=1),{h:360*t,s:n/r,v:r/255})},rgb_to_hex:function(t,e,i){return t=this.hex_with_component(0,2,t),t=this.hex_with_component(t,1,e),this.hex_with_component(t,0,i)},component_from_hex:function(t,e){return t>>8*e&255},hex_with_component:function(t,e,i){return i<<(n=8*e)|t&~(255<<n)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)},dat.dom.CenteredDiv=function(i,e){var t=function(){this.backgroundElement=document.createElement("div"),e.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),i.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),e.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;i.bind(this.backgroundElement,"click",function(){t.hide()})};return t.prototype.show=function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),e.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})},t.prototype.hide=function(){var t=this,e=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",i.unbind(t.domElement,"webkitTransitionEnd",e),i.unbind(t.domElement,"transitionend",e),i.unbind(t.domElement,"oTransitionEnd",e)};i.bind(this.domElement,"webkitTransitionEnd",e),i.bind(this.domElement,"transitionend",e),i.bind(this.domElement,"oTransitionEnd",e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},t.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-i.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-i.getHeight(this.domElement)/2+"px"},t}(dat.dom.dom,dat.utils.common),dat.dom.dom,dat.utils.common),function(){"use strict";function a(r,t){var e;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=r,this.tapDelay=t.tapDelay||200,this.tapTimeout=t.tapTimeout||700,!a.notNeeded(r)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],n=0,o=i.length;n<o;n++)this[i[n]]=s(this[i[n]],this);l&&(r.addEventListener("mouseover",this.onMouse,!0),r.addEventListener("mousedown",this.onMouse,!0),r.addEventListener("mouseup",this.onMouse,!0)),r.addEventListener("click",this.onClick,!0),r.addEventListener("touchstart",this.onTouchStart,!1),r.addEventListener("touchmove",this.onTouchMove,!1),r.addEventListener("touchend",this.onTouchEnd,!1),r.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(r.removeEventListener=function(t,e,i){var n=Node.prototype.removeEventListener;"click"===t?n.call(r,t,e.hijacked||e,i):n.call(r,t,e,i)},r.addEventListener=function(t,e,i){var n=Node.prototype.addEventListener;"click"===t?n.call(r,t,e.hijacked||(e.hijacked=function(t){t.propagationStopped||e(t)}),i):n.call(r,t,e,i)}),"function"==typeof r.onclick&&(e=r.onclick,r.addEventListener("click",function(t){e(t)},!1),r.onclick=null)}function s(t,e){return function(){return t.apply(e,arguments)}}}var t=0<=navigator.userAgent.indexOf("Windows Phone"),l=0<navigator.userAgent.indexOf("Android")&&!t,c=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,h=c&&/OS 4_\d(_\d)?/.test(navigator.userAgent),d=c&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),r=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(c&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},a.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!l;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},a.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},a.prototype.determineEventType=function(t){return l&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(t){var e;c&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},a.prototype.updateScrollParent=function(t){var e,i;if(!(e=t.fastClickScrollParent)||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},a.prototype.onTouchStart=function(t){var e,i,n;if(1<t.targetTouches.length)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],c){if((n=window.getSelection()).rangeCount&&!n.isCollapsed)return!0;if(!h){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},a.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},a.prototype.onTouchMove=function(t){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0},a.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(t){var e,i,n,r,o,s=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,d&&(o=t.changedTouches[0],(s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=s.tagName.toLowerCase())){if(e=this.findControl(s)){if(this.focus(s),l)return!1;s=e}}else if(this.needsFocus(s))return 100<t.timeStamp-i||c&&window.top!==window&&"input"===n?this.targetElement=null:(this.focus(s),this.sendClick(s,t),c&&"select"===n||(this.targetElement=null,t.preventDefault())),!1;return!(!c||h||!(r=s.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(s)||(t.preventDefault(),this.sendClick(s,t)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},a.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},a.prototype.destroy=function(){var t=this.layer;l&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(t){var e,i,n;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!l)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(31<i&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(r&&10<=(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=n[2]&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"none"===t.style.touchAction},a.attach=function(t,e){return new a(t,e)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function i(t){var e={};i.THAT_THING_WE_DID={fps:30,audio:"assets/audio/that_thing.mp3",path:"assets/animations/bob_that_thing/",frames:200},i.PROUD_PEACOCK={fps:20,audio:"Explorer"===BrowserDetect.BROWSER_NAME||"Opera"===BrowserDetect.BROWSER_NAME||"Mozilla"===BrowserDetect.BROWSER_NAME?null:"assets/audio/proud_peacock.mp3",path:"assets/animations/bob_proud_peacock/",frames:84},e.getDataForType=function(t){var e;switch(t){case"that_thing":e=i.THAT_THING_WE_DID;break;case"proud_peacock":e=i.PROUD_PEACOCK}return e.images=function(t,e){var i=[],n=0,r=e;for(;n<r;n++)i.push(AssetLoader.getAsset(t+"frame_"+n+".png"));return i}(e.path,e.frames),e},e.getAssetsForType=function(t){var e;switch(t){case"that_thing":e=i.THAT_THING_WE_DID;break;case"proud_peacock":e=i.PROUD_PEACOCK}return function(t,e){var i=[],n=0,r=e;for(;n<r;n++)i.push(t+"frame_"+n+".png");return i}(e.path,e.frames)},t.CatAnimationData=e}(window);var exports=exports||{},fabric=fabric||{version:"1.3.0"};exports.fabric=fabric,"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.window=fabric.document.createWindow()),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window;var Cufon=function(){var e,t,i,n,r,o,s,a,l=function(){return l.replace.apply(null,arguments)},c=l.DOM={ready:(e=!1,t={loaded:1,complete:1},i=[],n=function(){if(!e){e=!0;for(var t;t=i.shift();t());}},fabric.document.addEventListener&&(fabric.document.addEventListener("DOMContentLoaded",n,!1),fabric.window.addEventListener("pageshow",n,!1)),!fabric.window.opera&&fabric.document.readyState&&function(){t[fabric.document.readyState]?n():setTimeout(arguments.callee,10)}(),fabric.document.readyState&&fabric.document.createStyleSheet&&function(){try{fabric.document.body.doScroll("left"),n()}catch(t){setTimeout(arguments.callee,1)}}(),f(fabric.window,"load",n),function(t){arguments.length?e?t():i.push(t):n()})},p=l.CSS={Size:function(t,e){this.value=parseFloat(t),this.unit=String(t).match(/[a-z%]*$/)[0]||"px",this.convert=function(t){return t/e*this.value},this.convertFrom=function(t){return t/this.value*e},this.toString=function(){return this.value+this.unit}},getStyle:function(t){return new u(t.style)},quotedList:g(function(t){for(var e,i=[],n=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g;e=n.exec(t);)i.push(e[3]||e[1]);return i}),ready:(r=!1,o=[],s=Object.prototype.propertyIsEnumerable?y("style"):{length:0},a=y("link"),c.ready(function(){for(var t,e=0,i=0,n=a.length;t=a[i],i<n;++i)t.disabled||"stylesheet"!=t.rel.toLowerCase()||++e;fabric.document.styleSheets.length>=s.length+e?function(){r=!0;for(var t;t=o.shift();t());}():setTimeout(arguments.callee,10)}),function(t){r?t():o.push(t)}),supports:function(t,e){var i=fabric.document.createElement("span").style;return void 0!==i[t]&&(i[t]=e,i[t]===e)},textAlign:function(t,e,i,n){return"right"==e.get("textAlign")?0<i&&(t=" "+t):i<n-1&&(t+=" "),t},textDecoration:function(t,e){e||(e=this.getStyle(t));for(var i={underline:null,overline:null,"line-through":null},n=t;n.parentNode&&1==n.parentNode.nodeType;){var r=!0;for(var o in i)i[o]||(-1!=e.get("textDecoration").indexOf(o)&&(i[o]=e.get("color")),r=!1);if(r)break;e=this.getStyle(n=n.parentNode)}return i},textShadow:g(function(t){if("none"==t)return null;for(var e,i=[],n={},r=0,o=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/gi;e=o.exec(t);)","==e[0]?(i.push(n),n={},r=0):e[1]?n.color=e[1]:n[["offX","offY","blur"][r++]]=e[2];return i.push(n),i}),color:g(function(t){var n={};return n.color=t.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(t,e,i){return n.opacity=parseFloat(i),"rgb("+e+")"}),n}),textTransform:function(t,e){return t[{uppercase:"toUpperCase",lowercase:"toLowerCase"}[e.get("textTransform")]||"toString"]()}};function h(t){var e,i,n=this.face=t.face;this.glyphs=t.glyphs,this.w=t.w,this.baseSize=parseInt(n["units-per-em"],10),this.family=n["font-family"].toLowerCase(),this.weight=n["font-weight"],this.style=n["font-style"]||"normal",this.viewBox=(e=n.bbox.split(/\s+/),(i={minX:parseInt(e[0],10),minY:parseInt(e[1],10),maxX:parseInt(e[2],10),maxY:parseInt(e[3],10)}).width=i.maxX-i.minX,i.height=i.maxY-i.minY,i.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")},i),this.ascent=-parseInt(n.ascent,10),this.descent=-parseInt(n.descent,10),this.height=-this.ascent+this.descent}function d(){var l={},c={oblique:"italic",italic:"oblique"};this.add=function(t){(l[t.style]||(l[t.style]={}))[t.weight]=t},this.get=function(t,i){var e=l[t]||l[c[t]]||l.normal||l.italic||l.oblique;if(!e)return null;if(e[i={normal:400,bold:700}[i]||parseInt(i,10)])return e[i];var n,r,o={1:1,99:0}[i%100],s=[];for(var a in void 0===o&&(o=400<i),500==i&&(i=400),e)a=parseInt(a,10),(!n||a<n)&&(n=a),(!r||r<a)&&(r=a),s.push(a);return i<n&&(i=n),r<i&&(i=r),s.sort(function(t,e){return(o?i<t&&i<e?t<e:e<t:t<i&&e<i?e<t:t<e)?-1:1}),e[s[0]]}}function u(e){var i={},n={};this.get=function(t){return null!=i[t]?i[t]:e[t]},this.getSize=function(t,e){return n[t]||(n[t]=new p.Size(this.get(t),e))},this.extend=function(t){for(var e in t)i[e]=t[e];return this}}function f(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,function(){return i.call(t,fabric.window.event)})}function g(e){var i={};return function(t){return i.hasOwnProperty(t)||(i[t]=e.apply(null,arguments)),i[t]}}function m(t,e){e||(e=p.getStyle(t));for(var i,n=p.quotedList(e.get("fontFamily").toLowerCase()),r=0,o=n.length;r<o;++r)if(i=n[r],E[i])return E[i].get(e.get("fontStyle"),e.get("fontWeight"));return null}function y(t){return fabric.document.getElementsByTagName(t)}function _(){for(var t,e={},i=0,n=arguments.length;i<n;++i)for(t in arguments[i])e[t]=arguments[i][t];return e}function v(t,e,i,n,r,o){var s=n.separate;if("none"==s)return C[n.engine].apply(null,arguments);var a,l=fabric.document.createDocumentFragment(),c=e.split(O[s]),h="words"==s;h&&w&&(/^\s/.test(e)&&c.unshift(""),/\s$/.test(e)&&c.push(""));for(var d=0,u=c.length;d<u;++d)(a=C[n.engine](t,h?p.textAlign(c[d],i,d,u):c[d],i,n,r,o,d<u-1))&&l.appendChild(a);return l}function b(t,e){for(var i,n,r,o,s,a,l,c=(s=t,a=e,l=void 0,l=x.get(s),l.options||(a.hover&&a.hoverables[s.nodeName.toLowerCase()]&&T.attach(s),l.options=a),s).firstChild;c;c=r){if(r=c.nextSibling,o=!1,1==c.nodeType){if(!c.firstChild)continue;if(!/cufon/.test(c.className)){arguments.callee(c,e);continue}o=!0}if(n||(n=p.getStyle(t).extend(e)),i||(i=m(t,n)),i)if(o)C[e.engine](i,null,n,e,c,t);else{var h=c.data;if("undefined"!=typeof G_vmlCanvasManager&&(h=h.replace(/\r/g,"\n")),""!==h){var d=v(i,h,n,e,c,t);d?c.parentNode.replaceChild(d,c):c.parentNode.removeChild(c)}}}}var w=0==" ".split(/\s+/).length,x=new function(){var n={},r=0;this.get=function(t){var e,i=(e=t).cufid||(e.cufid=++r);return n[i]||(n[i]={})}},T=new function(){function e(t){var e,i,n=t.relatedTarget;!n||(i=n,(e=this).contains?e.contains(i):16&e.compareDocumentPosition(i))||r(this)}function i(t){r(this)}function r(t){setTimeout(function(){l.replace(t,x.get(t).options,!0)},10)}this.attach=function(t){void 0===t.onmouseenter?(f(t,"mouseover",e),f(t,"mouseout",e)):(f(t,"mouseenter",i),f(t,"mouseleave",i))}},A=[],C={},E={},S={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:fabric.window.Sizzle||fabric.window.jQuery&&function(t){return jQuery(t)}||fabric.window.dojo&&dojo.query||fabric.window.$$&&function(t){return $$(t)}||fabric.window.$&&function(t){return $(t)}||fabric.document.querySelectorAll&&function(t){return fabric.document.querySelectorAll(t)}||y,separate:"words",textShadow:"none"},O={words:/\s+/,characters:""};return l.now=function(){return c.ready(),l},l.refresh=function(){for(var t=A.splice(0,A.length),e=0,i=t.length;e<i;++e)l.replace.apply(null,t[e]);return l},l.registerEngine=function(t,e){return e?(C[t]=e,l.set("engine",t)):l},l.registerFont=function(t){var e=new h(t),i=e.family;return E[i]||(E[i]=new d),E[i].add(e),l.set("fontFamily",'"'+i+'"')},l.replace=function(n,r,t){return(r=_(S,r)).engine&&("string"==typeof r.textShadow&&r.textShadow&&(r.textShadow=p.textShadow(r.textShadow)),t||A.push(arguments),(n.nodeType||"string"==typeof n)&&(n=[n]),p.ready(function(){for(var t=0,e=n.length;t<e;++t){var i=n[t];"string"==typeof i?l.replace(r.selector(i),r,!0):b(i,r)}})),l},l.replaceElement=function(t,e){return"string"==typeof(e=_(S,e)).textShadow&&e.textShadow&&(e.textShadow=p.textShadow(e.textShadow)),b(t,e)},l.engines=C,l.fonts=E,l.getOptions=function(){return _(S)},l.set=function(t,e){return S[t]=e,l},l}(),JSON;if(Cufon.registerEngine("canvas",function(){var G=Cufon.CSS.supports("display","inline-block"),t=!G&&("BackCompat"==fabric.document.compatMode||/frameset|transitional/i.test(fabric.document.doctype.publicId)),e=fabric.document.createElement("style");e.type="text/css";var i=fabric.document.createTextNode(".cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle"+(t?"":";font-size:1px;line-height:1px")+"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}"+(G?".cufon-canvas canvas{position:relative}":".cufon-canvas canvas{position:absolute}")+"}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}");try{e.appendChild(i)}catch(t){e.setAttribute("type","text/css"),e.styleSheet.cssText=i.data}function V(t,e){var i,n=0,r=0,o=[],s=/([mrvxe])([^a-z]*)/g;t:for(var a=0;i=s.exec(t);++a){var l=i[2].split(",");switch(i[1]){case"v":o[a]={m:"bezierCurveTo",a:[n+~~l[0],r+~~l[1],n+~~l[2],r+~~l[3],n+=~~l[4],r+=~~l[5]]};break;case"r":o[a]={m:"lineTo",a:[n+=~~l[0],r+=~~l[1]]};break;case"m":o[a]={m:"moveTo",a:[n=~~l[0],r=~~l[1]]};break;case"x":o[a]={m:"closePath",a:[]};break;case"e":break t}e[o[a].m].apply(e,o[a].a)}return o}function q(t,e){for(var i=0,n=t.length;i<n;++i){var r=t[i];e[r.m].apply(e,r.a)}}return fabric.document.getElementsByTagName("head")[0].appendChild(e),function(h,t,l,d,e,i){var n=null===t,r=h.viewBox,o=l.getSize("fontSize",h.baseSize),u=l.get("letterSpacing");u="normal"==u?0:o.convertFrom(parseInt(u,10));var s=0,a=0,c=0,p=d.textShadow,f=[];if(Cufon.textOptions.shadowOffsets=[],Cufon.textOptions.shadows=null,p)for(var g=0,m=(Cufon.textOptions.shadows=p).length;g<m;++g){var y=p[g],_=o.convertFrom(parseFloat(y.offX)),v=o.convertFrom(parseFloat(y.offY));f[g]=[_,v]}var b=Cufon.CSS.textTransform(n?e.alt:t,l).split(""),w=0,x=null,T=0,A=1,C=[];for(g=0,m=b.length;g<m;++g)if("\n"!==b[g]){var E=h.glyphs[b[g]]||h.missingGlyph;E&&(w+=x=Number(E.w||h.w)+u)}else A++,T<w&&(T=w),C.push(w),w=0;C.push(w),w=Math.max(T,w);var S,O,M=[];for(g=C.length;g--;)M[g]=w-C[g];if(null===x)return null;if(a+=r.width-x,c+=r.minX,n)O=(S=e).firstChild;else if((S=fabric.document.createElement("span")).className="cufon cufon-canvas",S.alt=t,O=fabric.document.createElement("canvas"),S.appendChild(O),d.printable){var L=fabric.document.createElement("span");L.className="cufon-alt",L.appendChild(fabric.document.createTextNode(t)),S.appendChild(L)}var k=S.style,D=O.style||{},I=o.convert(r.height-s+0),R=Math.ceil(I),P=R/I;O.width=Math.ceil(o.convert(w+a-c)*P),O.height=R,s+=r.minY,D.top=Math.round(o.convert(s-h.ascent))+"px",D.left=Math.round(o.convert(c))+"px";var B=Math.ceil(o.convert(w*P)),H=B+"px",j=o.convert(h.height),W=(d.lineHeight-1)*o.convert(-h.ascent/5)*(A-1);Cufon.textOptions.width=B,Cufon.textOptions.height=j*A+W,Cufon.textOptions.lines=A,Cufon.textOptions.totalLineHeight=W,G?(k.width=H,k.height=j+"px"):(k.paddingLeft=H,k.paddingBottom=j-1+"px");var N=Cufon.textOptions.context||O.getContext("2d"),F=R/r.height;Cufon.textOptions.fontAscent=h.ascent*F,Cufon.textOptions.boundaries=null;var z=Cufon.textOptions.shadowOffsets;for(g=f.length;g--;)z[g]=[f[g][0]*F,f[g][1]*F];N.save(),N.scale(F,F),N.translate(-c-1/F*O.width/2+(Cufon.fonts[h.family].offsetLeft||0),-s-Cufon.textOptions.height/F/2+(Cufon.fonts[h.family].offsetTop||0)),N.lineWidth=h.face["underline-thickness"],N.save();var U=Cufon.getTextDecoration(d),Y="italic"===d.fontStyle;function X(t){N.fillStyle=t||Cufon.textOptions.color||l.get("color");var e=0,i=0;"right"===d.textAlign?N.translate(M[i],0):"center"===d.textAlign&&N.translate(M[i]/2,0);for(var n=0,r=b.length;n<r;++n)if("\n"!==b[n]){var o=h.glyphs[b[n]]||h.missingGlyph;if(o){var s=Number(o.w||h.w)+u;U&&(N.save(),N.strokeStyle=N.fillStyle,N.lineWidth+=N.lineWidth,N.beginPath(),U.underline&&(N.moveTo(0,.5-h.face["underline-position"]),N.lineTo(s,.5-h.face["underline-position"])),U.overline&&(N.moveTo(0,h.ascent+.5),N.lineTo(s,h.ascent+.5)),U["line-through"]&&(N.moveTo(0,.5-h.descent),N.lineTo(s,.5-h.descent)),N.stroke(),N.restore()),Y&&(N.save(),N.transform(1,0,-.25,1,0,0)),N.beginPath(),o.d&&(o.code?q(o.code,N):o.code=V("m"+o.d,N)),N.fill(),d.strokeStyle&&(N.closePath(),N.save(),N.lineWidth=d.strokeWidth,N.strokeStyle=d.strokeStyle,N.stroke(),N.restore()),Y&&N.restore(),N.translate(s,0),e+=s}}else{i++;var a=-h.ascent-h.ascent/5*d.lineHeight;"right"===d.textAlign?(N.translate(-w,a),N.translate(M[i],0)):"center"===d.textAlign?(N.translate(-e-M[i-1]/2,a),N.translate(M[i]/2,0)):N.translate(-e,a),e=0}}if(N.save(),function(){N.save();var t=0,e=0,i=[{left:0}];d.backgroundColor&&(N.save(),N.fillStyle=d.backgroundColor,N.translate(0,h.ascent),N.fillRect(0,0,w+10,(-h.ascent+h.descent)*A),N.restore()),"right"===d.textAlign?(N.translate(M[e],0),i[0].left=M[e]*F):"center"===d.textAlign&&(N.translate(M[e]/2,0),i[0].left=M[e]/2*F);for(var n=0,r=b.length;n<r;++n)if("\n"!==b[n]){var o=h.glyphs[b[n]]||h.missingGlyph;if(o){var s=Number(o.w||h.w)+u;d.textBackgroundColor&&(N.save(),N.fillStyle=d.textBackgroundColor,N.translate(0,h.ascent),N.fillRect(0,0,s+10,-h.ascent+h.descent),N.restore()),N.translate(s,0),t+=s,n==r-1&&(i[i.length-1].width=t*F,i[i.length-1].height=(-h.ascent+h.descent)*F)}}else{e++;var a=-h.ascent-h.ascent/5*d.lineHeight,l=i[i.length-1],c={left:0};l.width=t*F,l.height=(-h.ascent+h.descent)*F,"right"===d.textAlign?(N.translate(-w,a),N.translate(M[e],0),c.left=M[e]*F):"center"===d.textAlign?(N.translate(-t-M[e-1]/2,a),N.translate(M[e]/2,0),c.left=M[e]/2*F):N.translate(-t,a),i.push(c),t=0}N.restore(),Cufon.textOptions.boundaries=i}(),p)for(g=0,m=p.length;g<m;++g){y=p[g];N.save(),N.translate.apply(N,f[g]),X(y.color),N.restore()}return X(),N.restore(),N.restore(),N.restore(),S}}()),Cufon.registerEngine("vml",function(){if(fabric.document.namespaces){var t=fabric.document.createElement("canvas");if(!(t&&t.getContext&&t.getContext.apply)){null==fabric.document.namespaces.cvml&&fabric.document.namespaces.add("cvml","urn:schemas-microsoft-com:vml");var e=fabric.document.createElement("cvml:shape");if(e.style.behavior="url(#default#VML)",e.coordsize)return e=null,fabric.document.write('<style type="text/css">.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}</style>'),function(t,e,i,n,r,o,s){var a=null===e;a&&(e=r.alt);var l,c,h,d,u=t.viewBox,p=i.computedFontSize||(i.computedFontSize=new Cufon.CSS.Size((l=o,c=i.get("fontSize"),G(l,/(?:em|ex|%)$/i.test(c)?"1em":c)+"px"),t.baseSize)),f=i.computedLSpacing;if(null==f&&(f=i.get("letterSpacing"),i.computedLSpacing=f="normal"==f?0:~~p.convertFrom(G(o,f))),a)d=(h=r).firstChild;else{if((h=fabric.document.createElement("span")).className="cufon cufon-vml",h.alt=e,(d=fabric.document.createElement("span")).className="cufon-vml-canvas",h.appendChild(d),n.printable){var g=fabric.document.createElement("span");g.className="cufon-alt",g.appendChild(fabric.document.createTextNode(e)),h.appendChild(g)}s||h.appendChild(fabric.document.createElement("cvml:shape"))}var m=h.style,y=d.style,_=p.convert(u.height),v=Math.ceil(_),b=v/_,w=u.minX,x=u.minY;y.height=v,y.top=Math.round(p.convert(x-t.ascent)),y.left=Math.round(p.convert(w)),m.height=p.convert(t.height)+"px";Cufon.getTextDecoration(n);for(var T,A,C=i.get("color"),E=Cufon.CSS.textTransform(e,i).split(""),S=0,O=0,M=null,L=n.textShadow,k=0,D=0,I=E.length;k<I;++k)(T=t.glyphs[E[k]]||t.missingGlyph)&&(S+=M=~~(T.w||t.w)+f);if(null===M)return null;var R,P=-w+S+(u.width-M),B=p.convert(P*b),H=Math.round(B),j=P+","+u.height,W="r"+j+"nsnf";for(k=0;k<I;++k)if(T=t.glyphs[E[k]]||t.missingGlyph){a?(A=d.childNodes[D]).firstChild&&A.removeChild(A.firstChild):(A=fabric.document.createElement("cvml:shape"),d.appendChild(A)),A.stroked="f",A.coordsize=j,A.coordorigin=R=w-O+","+x,A.path=(T.d?"m"+T.d+"xe":"")+"m"+R+W,A.fillcolor=C;var N=A.style;if(N.width=H,N.height=v,L){var F,z=L[0],U=L[1],Y=Cufon.CSS.color(z.color),X=fabric.document.createElement("cvml:shadow");X.on="t",X.color=Y.color,X.offset=z.offX+","+z.offY,U&&(F=Cufon.CSS.color(U.color),X.type="double",X.color2=F.color,X.offset2=U.offX+","+U.offY),X.opacity=Y.opacity||F&&F.opacity||1,A.appendChild(X)}O+=~~(T.w||t.w)+f,++D}return m.width=Math.max(Math.ceil(p.convert(S*b)),0),h}}}function G(t,e){if(/px$/i.test(e))return parseFloat(e);var i=t.style.left,n=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=e;var r=t.style.pixelLeft;return t.style.left=i,t.runtimeStyle.left=n,r}}()),Cufon.getTextDecoration=function(t){return{underline:"underline"===t.textDecoration,overline:"overline"===t.textDecoration,"line-through":"line-through"===t.textDecoration}},void 0!==exports&&(exports.Cufon=Cufon),JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,r,o,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;i<o;i+=1)s[i]=str(i,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;i<o;i+=1)"string"==typeof rep[i]&&(r=str(n=rep[i],l))&&s.push(quote(n)+(gap?": ":":")+r);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l))&&s.push(quote(n)+(gap?": ":":")+r);return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(indent=gap="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,n,r=t[e];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(void 0!==(n=walk(r,i))?r[i]=n:delete r[i]);return reviver.call(t,e,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),void 0===Event)var Event={};if(void 0===eventjs)var eventjs=Event;if(Event=function(b){"use strict";b.modifyEventListener=!1,b.modifySelectors=!1,b.add=function(t,e,i,n){return x(t,e,i,n,"add")},b.remove=function(t,e,i,n){return x(t,e,i,n,"remove")},b.stop=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.bubble=0},b.prevent=function(t){t.preventDefault&&t.preventDefault(),t.returnValue=!1},b.cancel=function(t){b.stop(t),b.prevent(t)},b.supports=function(t,e){if("string"==typeof t&&(e=t,t=window),(e="on"+e)in t)return!0;if(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute){t.setAttribute(e,"");var i="function"==typeof t[e];return void 0!==t[e]&&(t[e]=null),t.removeAttribute(e),i}};var e,t,i,w=function(t){if(!t||"object"!=typeof t)return t;var e=new t.constructor;for(var i in t)t[i]&&"object"==typeof t[i]?e[i]=w(t[i]):e[i]=t[i];return e},x=function(n,t,e,i,r,o){if(i=i||{},"string"!=typeof n||"ready"!==t){if("string"==typeof n){if(0===(n=document.querySelectorAll(n)).length)return A("Missing target on listener!");1===n.length&&(n=n[0])}var s,a={};if(0<n.length){for(var l=0,c=n.length;l<c;l++)(s=x(n[l],t,e,w(i),r))&&(a[l]=s);return T(a)}if(t.indexOf&&-1!==t.indexOf(" ")&&(t=t.split(" ")),t.indexOf&&-1!==t.indexOf(",")&&(t=t.split(",")),"string"!=typeof t){if("number"==typeof t.length)for(var h=0,d=t.length;h<d;h++)(s=x(n,t[h],e,w(i),r))&&(a[t[h]]=s);else for(var u in t)(s="function"==typeof t[u]?x(n,u,t[u],w(i),r):x(n,u,t[u].listener,w(t[u]),r))&&(a[u]=s);return T(a)}if("function"!=typeof e)return A("Listener is not a function!");var p=i.useCapture||!1,f=C(t)+S(n)+"."+S(e)+"."+(p?1:0);if(b.Gesture&&b.Gesture._gestureHandlers[t]){if("remove"===r){if(!E[f])return;E[f].remove(),delete E[f]}else if("add"===r){if(E[f])return E[f];if(i.useCall&&!b.modifyEventListener){var g=e;e=function(t,e){for(var i in e)t[i]=e[i];return g.call(n,t)}}i.gesture=t,i.target=n,i.listener=e,i.fromOverwrite=o,E[f]=b.proxy[t](i)}}else if(t=C(t),"remove"===r){if(!E[f])return;n[M](t,e,p),delete E[f]}else if("add"===r){if(E[f])return E[f];n[O](t,e,p),E[f]={type:t,target:n,listener:e,remove:function(){b.remove(n,t,e,i)}}}return E[f]}var m=(new Date).getTime(),y=i.timeout,_=i.interval||1e3/60,v=window.setInterval(function(){(new Date).getTime()-m>y&&window.clearInterval(v),document.querySelector(n)&&(window.clearInterval(v),e())},_)},T=function(e){return{remove:function(){for(var t in e)e[t].remove()},add:function(){for(var t in e)e[t].add()}}},A=function(t){"undefined"!=typeof console&&void 0!==console.error&&console.error(t)},C=(e={},function(t){return b.pointerType||(window.navigator.msPointerEnabled?(b.pointerType="mspointer",e={mousedown:"MSPointerDown",mousemove:"MSPointerMove",mouseup:"MSPointerUp"}):b.supports("touchstart")?(b.pointerType="touch",e={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}):b.pointerType="mouse"),e[t]&&(t=e[t]),document.addEventListener?t:"on"+t}),E={},n=0,S=function(t){return t===window?"#window":t===document?"#document":t?(t.uniqueID||(t.uniqueID="id"+n++),t.uniqueID):A("Missing target on listener!")},O=document.addEventListener?"addEventListener":"attachEvent",M=document.removeEventListener?"removeEventListener":"detachEvent";return b.createPointerEvent=function(t,e,i){var n=e.gesture,r=e.target,o=t.changedTouches||b.proxy.getCoords(t);if(o.length){var s=o[0];e.pointers=i?[]:o,e.pageX=s.pageX,e.pageY=s.pageY,e.x=e.pageX,e.y=e.pageY}var a=document.createEvent("Event");for(var l in a.initEvent(n,!0,!0),a.originalEvent=t,e)"target"!==l&&(a[l]=e[l]);r.dispatchEvent(a)},b.modifyEventListener&&window.HTMLElement&&(t=function(e){var t=function(r){var t=r+"EventListener",o=e[t];e[t]=function(t,e,i){if(b.Gesture&&b.Gesture._gestureHandlers[t]){var n=i;"object"==typeof i?n.useCall=!0:n={useCall:!0,useCapture:i},x(this,t,e,n,r,!0),o.call(this,t,e,i)}else o.call(this,C(t),e,i)}};t("add"),t("remove")},navigator.userAgent.match(/Firefox/)?(t(HTMLDivElement.prototype),t(HTMLCanvasElement.prototype)):t(HTMLElement.prototype),t(document),t(window)),b.modifySelectors&&((i=NodeList.prototype).removeEventListener=function(t,e,i){for(var n=0,r=this.length;n<r;n++)this[n].removeEventListener(t,e,i)},i.addEventListener=function(t,e,i){for(var n=0,r=this.length;n<r;n++)this[n].addEventListener(t,e,i)}),b}(Event),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(p){"use strict";return p.pointerSetup=function(e,i){e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||e.fingers||1,e.maxFingers=e.maxFingers||e.fingers||1/0,e.position=e.position||"relative",delete e.fingers,(i=i||{}).gesture=e.gesture,i.target=e.target,i.pointerType=Event.pointerType,Event.modifyEventListener&&e.fromOverwrite&&(e.listener=Event.createPointerEvent);var n=0,r=0===i.gesture.indexOf("pointer")&&Event.modifyEventListener?"pointer":"mouse";return i.listener=e.listener,i.proxy=function(t){i.defaultListener=e.listener,(e.listener=t)(e.event,i)},i.remove=function(){e.onPointerDown&&Event.remove(e.target,r+"down",e.onPointerDown),e.onPointerMove&&Event.remove(e.doc,r+"move",e.onPointerMove),e.onPointerUp&&Event.remove(e.doc,r+"up",e.onPointerUp)},i.resume=function(t){!e.onPointerMove||t&&!t.move||Event.add(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||t&&!t.move||Event.add(e.doc,r+"up",e.onPointerUp),e.fingers=n},i.pause=function(t){n=e.fingers,!e.onPointerMove||t&&!t.move||Event.remove(e.doc,r+"move",e.onPointerMove),!e.onPointerUp||t&&!t.up||Event.remove(e.doc,r+"up",e.onPointerUp),e.fingers=0},i},p.pointerStart=function(t,e,s){var i=function(t,e){var i=s.bbox,n=a[e]={};switch(s.position){case"absolute":n.offsetX=0,n.offsetY=0;break;case"difference":n.offsetX=t.pageX,n.offsetY=t.pageY;break;case"move":n.offsetX=t.pageX-i.x1,n.offsetY=t.pageY-i.y1;break;default:n.offsetX=i.x1,n.offsetY=i.y1}if("relative"===s.position)var r=(t.pageX+i.scrollLeft-n.offsetX)*i.scaleX,o=(t.pageY+i.scrollTop-n.offsetY)*i.scaleY;else r=t.pageX-n.offsetX,o=t.pageY-n.offsetY;n.rotation=0,n.scale=1,n.startTime=n.moveTime=(new Date).getTime(),n.move={x:r,y:o},n.start={x:r,y:o},s.fingers++};s.event=t,e.defaultListener&&(s.listener=e.defaultListener,delete e.defaultListener);for(var n=!s.fingers,a=s.tracker,r=t.changedTouches||p.getCoords(t),o=r.length,l=0;l<o;l++){var c=r[l],h=c.identifier||1/0;if(s.fingers){if(s.fingers>=s.maxFingers){var d=[];for(var h in s.tracker)d.push(h);return e.identifier=d.join(","),n}for(var u in a){if(a[u].up){delete a[u],i(c,h),s.cancel=!0;break}0}if(a[h])continue;i(c,h)}else a=s.tracker={},e.bbox=s.bbox=p.getBoundingBox(s.target),s.fingers=0,s.cancel=!1,i(c,h)}d=[];for(var h in s.tracker)d.push(h);return e.identifier=d.join(","),n},p.pointerEnd=function(t,e,i,n){for(var r=t.touches||[],o=r.length,s={},a=0;a<o;a++){s[(l=r[a].identifier)||1/0]=!0}for(var l in i.tracker){var c=i.tracker[l];s[l]||c.up||(n&&n({pageX:c.pageX,pageY:c.pageY,changedTouches:[{pageX:c.pageX,pageY:c.pageY,identifier:"Infinity"===l?1/0:l}]},"up"),c.up=!0,i.fingers--)}if(0!==i.fingers)return!1;var h=[];for(var l in i.gestureFingers=0,i.tracker)i.gestureFingers++,h.push(l);return e.identifier=h.join(","),!0},p.getCoords=function(t){return void 0!==t.pageX?p.getCoords=function(t){return Array({type:"mouse",x:t.pageX,y:t.pageY,pageX:t.pageX,pageY:t.pageY,identifier:1/0})}:p.getCoords=function(t){return t=t||window.event,Array({type:"mouse",x:t.clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop,pageX:t.clientX+document.documentElement.scrollLeft,pageY:t.clientY+document.documentElement.scrollTop,identifier:1/0})},p.getCoords(t)},p.getCoord=function(t){if("ontouchstart"in window){var i=0,n=0;p.getCoord=function(t){var e=t.changedTouches;return e.length?{x:i=e[0].pageX,y:n=e[0].pageY}:{x:i,y:n}}}else void 0!==t.pageX&&void 0!==t.pageY?p.getCoord=function(t){return{x:t.pageX,y:t.pageY}}:p.getCoord=function(t){return{x:(t=t||window.event).clientX+document.documentElement.scrollLeft,y:t.clientY+document.documentElement.scrollTop}};return p.getCoord(t)},p.getBoundingBox=function(t){t!==window&&t!==document||(t=document.body);var e={x1:0,y1:0,x2:0,y2:0,scrollLeft:0,scrollTop:0};t===document.body?(e.height=document.querySelector(".section.logo-generator").clientHeight,e.width=document.querySelector(".section.logo-generator").clientWidth):(e.height=t.offsetHeight,e.width=t.offsetWidth),e.scaleX=t.width/e.width||1,e.scaleY=t.height/e.height||1;for(var i=t;null!==i;)e.x1+=i.offsetLeft,e.y1+=i.offsetTop,i=i.offsetParent;for(i=t.parentNode;null!==i&&i!==document.body&&void 0!==i.scrollTop;)e.scrollLeft+=i.scrollLeft,e.scrollTop+=i.scrollTop,i=i.parentNode;return e.x2=e.x1+e.width,e.y2=e.y1+e.height,e},function(){var t=navigator.userAgent.toLowerCase(),e=-1!==t.indexOf("macintosh");if(e&&-1!==t.indexOf("khtml"))var i={91:!0,93:!0};else if(e&&-1!==t.indexOf("firefox"))i={224:!0};else i={17:!0};p.isMetaKey=function(t){return!!i[t.keyCode]},p.metaTracker=function(t){i[t.keyCode]&&(p.metaKey="keydown"===t.type)}}(),p}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(c){"use strict";return c.click=function(s){var a;s.maxFingers=s.maxFingers||s.fingers||1,s.onPointerDown=function(t){c.pointerStart(t,l,s)&&(Event.add(s.doc,"mousemove",s.onPointerMove).listener(t),Event.add(s.doc,"mouseup",s.onPointerUp))},s.onPointerMove=function(t){a=t},s.onPointerUp=function(t){if(c.pointerEnd(t,l,s)){if(Event.remove(s.doc,"mousemove",s.onPointerMove),Event.remove(s.doc,"mouseup",s.onPointerUp),a.cancelBubble&&1<++a.bubble)return;var e=(a.changedTouches||c.getCoords(a))[0],i=s.bbox,n=c.getBoundingBox(s.target);if("relative"===s.position)var r=(e.pageX+i.scrollLeft-i.x1)*i.scaleX,o=(e.pageY+i.scrollTop-i.y1)*i.scaleY;else r=e.pageX-i.x1,o=e.pageY-i.y1;0<r&&r<i.width&&0<o&&o<i.height&&i.scrollTop===n.scrollTop&&s.listener(a,l)}};var l=c.pointerSetup(s);return l.state="click",Event.add(s.target,"mousedown",s.onPointerDown),l},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.click=c.click,c}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(d){"use strict";return d.dbltap=d.dblclick=function(o){o.maxFingers=o.maxFingers||o.fingers||1;var s,a,l,c,h;o.onPointerDown=function(t){var e=t.changedTouches||d.getCoords(t);s&&!a?(h=e[0],a=(new Date).getTime()-s):(c=e[0],s=(new Date).getTime(),a=0,clearTimeout(l),l=setTimeout(function(){s=0},700)),d.pointerStart(t,i,o)&&(Event.add(o.doc,"mousemove",o.onPointerMove).listener(t),Event.add(o.doc,"mouseup",o.onPointerUp))},o.onPointerMove=function(t){if(s&&!a){var e=t.changedTouches||d.getCoords(t);h=e[0]}var i=o.bbox;if("relative"===o.position)var n=(h.pageX+i.scrollLeft-i.x1)*i.scaleX,r=(h.pageY+i.scrollTop-i.y1)*i.scaleY;else n=h.pageX-i.x1,r=h.pageY-i.y1;0<n&&n<i.width&&0<r&&r<i.height&&Math.abs(h.pageX-c.pageX)<=25&&Math.abs(h.pageY-c.pageY)<=25||(Event.remove(o.doc,"mousemove",o.onPointerMove),clearTimeout(l),s=a=0)},o.onPointerUp=function(t){d.pointerEnd(t,i,o)&&(Event.remove(o.doc,"mousemove",o.onPointerMove),Event.remove(o.doc,"mouseup",o.onPointerUp)),s&&a&&(a<=700&&!(t.cancelBubble&&1<++t.bubble)&&(i.state=o.gesture,o.listener(t,i)),clearTimeout(l),s=a=0)};var i=d.pointerSetup(o);return i.state="dblclick",Event.add(o.target,"mousedown",o.onPointerDown),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.dbltap=d.dbltap,Event.Gesture._gestureHandlers.dblclick=d.dblclick,d}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(d){"use strict";return d.dragElement=function(i,t){d.drag({event:t,target:i,position:"move",listener:function(t,e){i.style.left=e.x+"px",i.style.top=e.y+"px",Event.prevent(t)}})},d.drag=function(c){c.gesture="drag",c.onPointerDown=function(t){d.pointerStart(t,h,c)&&(c.monitor||(Event.add(c.doc,"mousemove",c.onPointerMove),Event.add(c.doc,"mouseup",c.onPointerUp))),c.onPointerMove(t,"down")},c.onPointerMove=function(t,e){if(!c.tracker)return c.onPointerDown(t);for(var i=c.bbox,n=t.changedTouches||d.getCoords(t),r=n.length,o=0;o<r;o++){var s=n[o],a=s.identifier||1/0,l=c.tracker[a];l&&(l.pageX=s.pageX,l.pageY=s.pageY,h.state=e||"move",h.identifier=a,h.start=l.start,h.fingers=c.fingers,"relative"===c.position?(h.x=(l.pageX+i.scrollLeft-l.offsetX)*i.scaleX,h.y=(l.pageY+i.scrollTop-l.offsetY)*i.scaleY):(h.x=l.pageX-l.offsetX,h.y=l.pageY-l.offsetY),c.listener(t,h))}},c.onPointerUp=function(t){d.pointerEnd(t,h,c,c.onPointerMove)&&(c.monitor||(Event.remove(c.doc,"mousemove",c.onPointerMove),Event.remove(c.doc,"mouseup",c.onPointerUp)))};var h=d.pointerSetup(c);return c.event?c.onPointerDown(c.event):(Event.add(c.target,"mousedown",c.onPointerDown),c.monitor&&(Event.add(c.doc,"mousemove",c.onPointerMove),Event.add(c.doc,"mouseup",c.onPointerUp))),h},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.drag=d.drag,d}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(w){"use strict";var x=Math.PI/180;return w.gesture=function(v){v.minFingers=v.minFingers||v.fingers||2,v.onPointerDown=function(t){var e=v.fingers;if(w.pointerStart(t,b,v)&&(Event.add(v.doc,"mousemove",v.onPointerMove),Event.add(v.doc,"mouseup",v.onPointerUp)),v.fingers===v.minFingers&&e!==v.fingers){b.fingers=v.minFingers,b.scale=1,b.rotation=0,b.state="start";var i="";for(var n in v.tracker)i+=n;b.identifier=parseInt(i),v.listener(t,b)}},v.onPointerMove=function(t,e){for(var i=v.bbox,n=v.tracker,r=(a=t.changedTouches||w.getCoords(t)).length,o=0;o<r;o++){var s=n[u=(p=a[o]).identifier||1/0];s&&("relative"===v.position?(s.move.x=(p.pageX+i.scrollLeft-i.x1)*i.scaleX,s.move.y=(p.pageY+i.scrollTop-i.y1)*i.scaleY):(s.move.x=p.pageX-i.x1,s.move.y=p.pageY-i.y1))}if(!(v.fingers<v.minFingers)){var a=[],l=0,c=0,h=0,d=0;r=0;for(var u in n){(p=n[u]).up||(h+=p.move.x,d+=p.move.y,r++)}for(var u in h/=r,d/=r,n){var p;if(!(p=n[u]).up){var f=p.start;if(!f.distance){var g=f.x-h,m=f.y-d;f.distance=Math.sqrt(g*g+m*m),f.angle=Math.atan2(g,m)/x}g=p.move.x-h,m=p.move.y-d;l+=Math.sqrt(g*g+m*m)/f.distance;var y=Math.atan2(g,m)/x,_=(f.angle-y+360)%360-180;p.DEG2=p.DEG1,p.DEG1=0<_?_:-_,void 0!==p.DEG2&&(0<_?p.rotation+=p.DEG1-p.DEG2:p.rotation-=p.DEG1-p.DEG2,c+=p.rotation),a.push(p.move)}}b.touches=a,b.fingers=v.fingers,b.scale=l/v.fingers,b.rotation=c/v.fingers,b.state="change",v.listener(t,b)}},v.onPointerUp=function(t){var e=v.fingers;w.pointerEnd(t,b,v)&&(Event.remove(v.doc,"mousemove",v.onPointerMove),Event.remove(v.doc,"mouseup",v.onPointerUp)),e===v.minFingers&&v.fingers<v.minFingers&&(b.fingers=v.fingers,b.state="end",v.listener(t,b))};var b=w.pointerSetup(v);return Event.add(v.target,"mousedown",v.onPointerDown),b},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.gesture=w.gesture,w}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.pointerdown=t.pointermove=t.pointerup=function(e){if(!e.target.isPointerEmitter){var i=!0;e.onPointerDown=function(t){i=!1,n.gesture="pointerdown",e.listener(t,n)},e.onPointerMove=function(t){n.gesture="pointermove",e.listener(t,n,i)},e.onPointerUp=function(t){i=!0,n.gesture="pointerup",e.listener(t,n,!0)};var n=t.pointerSetup(e);return Event.add(e.target,"mousedown",e.onPointerDown),Event.add(e.target,"mousemove",e.onPointerMove),Event.add(e.doc,"mouseup",e.onPointerUp),e.target.isPointerEmitter=!0,n}},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.pointerdown=t.pointerdown,Event.Gesture._gestureHandlers.pointermove=t.pointermove,Event.Gesture._gestureHandlers.pointerup=t.pointerup,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.shake=function(d){var u={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:d.target,listener:d.listener,remove:function(){window.removeEventListener("devicemotion",t,!1)}},p=(new Date).getTime(),f={x:0,y:0,z:0},g={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},t=function(t){var e=t.accelerationIncludingGravity;if(f.x=.8*f.x+(1-.8)*e.x,f.y=.8*f.y+(1-.8)*e.y,f.z=.8*f.z+(1-.8)*e.z,u.accelerationIncludingGravity=f,u.acceleration.x=e.x-f.x,u.acceleration.y=e.y-f.y,u.acceleration.z=e.z-f.z,"devicemotion"!==d.gesture)for(var i=(new Date).getTime(),n=0,r="xyz".length;n<r;n++){var o="xyz"[n],s=u.acceleration[o],a=g[o],l=Math.abs(s);if(!(i-p<1e3)&&4<l){var c=i*s/l,h=Math.abs(c+a.value);a.value&&h<200?(a.value=c,a.count++,3===a.count&&(d.listener(t,u),p=i,a.value=0,a.count=0)):(a.value=c,a.count=1)}}else d.listener(t,u)};if(window.addEventListener)return window.addEventListener("devicemotion",t,!1),u},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.shake=t.shake,t}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(y){"use strict";var _=Math.PI/180;return y.swipe=function(g){g.snap=g.snap||90,g.threshold=g.threshold||1,g.onPointerDown=function(t){y.pointerStart(t,m,g)&&(Event.add(g.doc,"mousemove",g.onPointerMove).listener(t),Event.add(g.doc,"mouseup",g.onPointerUp))},g.onPointerMove=function(t){for(var e=t.changedTouches||y.getCoords(t),i=e.length,n=0;n<i;n++){var r=e[n],o=r.identifier||1/0,s=g.tracker[o];s&&(s.move.x=r.pageX,s.move.y=r.pageY,s.moveTime=(new Date).getTime())}},g.onPointerUp=function(t){if(y.pointerEnd(t,m,g)){var e,i;Event.remove(g.doc,"mousemove",g.onPointerMove),Event.remove(g.doc,"mouseup",g.onPointerUp);var n={x:0,y:0},r=0,o=0,s=0;for(var a in g.tracker){var l=g.tracker[a],c=l.move.x-l.start.x,h=l.move.y-l.start.y;r+=l.move.x,o+=l.move.y,n.x+=l.start.x,n.y+=l.start.y,s++;var d=Math.sqrt(c*c+h*h),u=l.moveTime-l.startTime,p=Math.atan2(c,h)/_+180,f=u?d/u:0;if(void 0===i)i=p,e=f;else{if(!(Math.abs(p-i)<=20))return;i=(i+p)/2,e=(e+f)/2}}e>g.threshold&&(n.x/=s,n.y/=s,m.start=n,m.x=r/s,m.y=o/s,m.angle=-(((i/g.snap+.5>>0)*g.snap||360)-360),m.velocity=e,m.fingers=g.gestureFingers,m.state="swipe",g.listener(t,m))}};var m=y.pointerSetup(g);return Event.add(g.target,"mousedown",g.onPointerDown),m},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.swipe=y.swipe,y}(Event.proxy),void 0===Event)var Event={};if(void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(d){"use strict";return d.tap=d.longpress=function(h){var e,n;h.delay=h.delay||500,h.timeout=h.timeout||250,h.onPointerDown=function(i){if(d.pointerStart(i,r,h)){if(e=(new Date).getTime(),Event.add(h.doc,"mousemove",h.onPointerMove).listener(i),Event.add(h.doc,"mouseup",h.onPointerUp),"longpress"!==h.gesture)return;n=setTimeout(function(){if(!(i.cancelBubble&&1<++i.bubble)){var t=0;for(var e in h.tracker){if(!0===h.tracker[e].end)return;if(h.cancel)return;t++}r.state="start",r.fingers=t,h.listener(i,r)}},h.delay)}},h.onPointerMove=function(t){for(var e=h.bbox,i=t.changedTouches||d.getCoords(t),n=i.length,r=0;r<n;r++){var o=i[r],s=o.identifier||1/0,a=h.tracker[s];if(a){if("relative"===h.position)var l=(o.pageX+e.scrollLeft-e.x1)*e.scaleX,c=(o.pageY+e.scrollTop-e.y1)*e.scaleY;else l=o.pageX-e.x1,c=o.pageY-e.y1;if(!(0<l&&l<e.width&&0<c&&c<e.height&&Math.abs(l-a.start.x)<=25&&Math.abs(c-a.start.y)<=25))return Event.remove(h.doc,"mousemove",h.onPointerMove),void(h.cancel=!0)}}},h.onPointerUp=function(t){if(d.pointerEnd(t,r,h)){if(clearTimeout(n),Event.remove(h.doc,"mousemove",h.onPointerMove),Event.remove(h.doc,"mouseup",h.onPointerUp),t.cancelBubble&&1<++t.bubble)return;if("longpress"===h.gesture)return void("start"===r.state&&(r.state="end",h.listener(t,r)));if(h.cancel)return;if((new Date).getTime()-e>h.timeout)return;r.state="tap",r.fingers=h.gestureFingers,h.listener(t,r)}};var r=d.pointerSetup(h);return Event.add(h.target,"mousedown",h.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.tap=d.tap,Event.Gesture._gestureHandlers.longpress=d.longpress,d}(Event.proxy),void 0===Event)var Event={};void 0===Event.proxy&&(Event.proxy={}),Event.proxy=function(t){"use strict";return t.wheel=function(e){var i,n=e.timeout||150,r=0,o={gesture:"wheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,remove:function(){e.target[a](l,t,!1)}},t=function(t){t=t||window.event,o.state=r++?"change":"start",o.wheelDelta=t.detail?-20*t.detail:t.wheelDelta,e.listener(t,o),clearTimeout(i),i=setTimeout(function(){r=0,o.state="end",o.wheelDelta=0,e.listener(t,o)},n)},s=document.addEventListener?"addEventListener":"attachEvent",a=document.removeEventListener?"removeEventListener":"detachEvent",l=Event.supports("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[s](l,t,!1),o},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.wheel=t.wheel,t}(Event.proxy),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&(void 0!==console.log&&console.log.apply&&(fabric.log=function(){return console.log.apply(console,arguments)}),void 0!==console.warn&&console.warn.apply&&(fabric.warn=function(){return console.warn.apply(console,arguments)})),function(){function n(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function t(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function e(t,e){if(this.__eventListeners){if(1===arguments.length&&"object"==typeof t)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this}}function i(t,e){if(this.__eventListeners){var i=this.__eventListeners[t];if(i){for(var n=0,r=i.length;n<r;n++)i[n].call(this,e||{});return this}}}fabric.Observable={observe:t,stopObserving:e,fire:i,on:t,off:e,trigger:i}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=arguments.length;t--;)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,i){var n=this.getObjects();return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(t){var e=this.getObjects(),i=e.indexOf(t);return-1!==i&&(e.splice(i,1),this._onObjectRemoved(t)),this.renderOnAddRemove&&this.renderAll(),t},forEachObject:function(t,e){for(var i=this.getObjects(),n=i.length;n--;)t.call(e,i[n],n,i);return this},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return-1<this.getObjects().indexOf(t)},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)},toGrayscale:function(){return this.forEachObject(function(t){t.toGrayscale()})}},function(){var p=Math.sqrt,f=Math.atan2;fabric.util={};var e=Math.PI/180;function i(t){if(!t)return fabric;for(var e=t.split("."),i=e.length,n=fabric.window,r=0;r<i;++r)n=n[e[r]];return n}var R,P={},b={},B=Array.prototype.join;function u(t,e,i,n,r,o,s,a){if(R=B.call(arguments),b[R])return b[R];var l=a*r,c=-s*o,h=s*r,d=a*o,u=.5*(n-i),p=8/3*Math.sin(.5*u)*Math.sin(.5*u)/Math.sin(u),f=t+Math.cos(i)-p*Math.sin(i),g=e+Math.sin(i)+p*Math.cos(i),m=t+Math.cos(n),y=e+Math.sin(n),_=m+p*Math.sin(n),v=y-p*Math.cos(n);return b[R]=[l*f+c*g,h*f+d*g,l*_+c*v,h*_+d*v,l*m+c*y,h*m+d*y],b[R]}fabric.util.removeFromArray=function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},fabric.util.degreesToRadians=function(t){return t*e},fabric.util.radiansToDegrees=function(t){return t/e},fabric.util.rotatePoint=function(t,e,i){var n=Math.sin(i),r=Math.cos(i);t.subtractEquals(e);var o=t.x*r-t.y*n,s=t.x*n+t.y*r;return new fabric.Point(o,s).addEquals(e)},fabric.util.toFixed=function(t,e){return parseFloat(Number(t).toFixed(e))},fabric.util.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},fabric.util.falseFunction=function(){return!1},fabric.util.getKlass=function(t,e){return i(e)[fabric.util.string.camelize(fabric.util.string.capitalize(t))]},fabric.util.resolveNamespace=i,fabric.util.loadImage=function(t,e,i){if(t){var n=fabric.util.createImage();n.onload=function(){e&&e.call(i,n),n=n.onload=null},n.src=t}else e&&e.call(i,t)},fabric.util.enlivenObjects=function(t,e,r,o){function s(){++i===n&&e&&e(a)}var a=[],i=0,n=t.length;t.forEach(function(i,n){if(i.type){var t=fabric.util.getKlass(i.type,r);t.async?t.fromObject(i,function(t,e){e||(a[n]=t,o&&o(i,a[n])),s()}):(a[n]=t.fromObject(i),o&&o(i,a[n]),s())}})},fabric.util.groupSVGElements=function(t,e,i){var n;return n=1<t.length?new fabric.PathGroup(t,e):t[0],void 0!==i&&n.setSourcePath(i),n},fabric.util.populateWithProperties=function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])},fabric.util.drawDashedLine=function(t,e,i,n,r,o){var s=n-e,a=r-i,l=p(s*s+a*a),c=f(a,s),h=o.length,d=0,u=!0;for(t.save(),t.translate(e,i),t.moveTo(0,0),t.rotate(c),e=0;e<l;)l<(e+=o[d++%h])&&(e=l),t[u?"lineTo":"moveTo"](e,0),u=!u;t.restore()},fabric.util.createCanvasElement=function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},fabric.util.createImage=function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},fabric.util.createAccessors=function(t){for(var e=t.prototype,i=e.stateProperties.length;i--;){var n=e.stateProperties[i],r=n.charAt(0).toUpperCase()+n.slice(1),o="set"+r,s="get"+r;e[s]||(e[s]=new Function('return this.get("'+n+'")')),e[o]||(e[o]=new Function("value",'return this.set("'+n+'", value)'))}},fabric.util.clipContext=function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},fabric.util.multiplyTransformMatrices=function(t,e){for(var i=[[t[0],t[2],t[4]],[t[1],t[3],t[5]],[0,0,1]],n=[[e[0],e[2],e[4]],[e[1],e[3],e[5]],[0,0,1]],r=[],o=0;o<3;o++){r[o]=[];for(var s=0;s<3;s++){for(var a=0,l=0;l<3;l++)a+=i[o][l]*n[l][s];r[o][s]=a}}return[r[0][0],r[1][0],r[0][1],r[1][1],r[0][2],r[1][2]]},fabric.util.getFunctionBody=function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},fabric.util.drawArc=function(t,e,i,n){for(var r=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=function(t,e,i,n,r,o,s,a,l){if(R=B.call(arguments),P[R])return P[R];var c=s*(Math.PI/180),h=Math.sin(c),d=Math.cos(c);i=Math.abs(i),n=Math.abs(n);var u=d*(a-t)*.5+h*(l-e)*.5,p=d*(l-e)*.5-h*(a-t)*.5,f=u*u/(i*i)+p*p/(n*n);1<f&&(f=Math.sqrt(f),i*=f,n*=f);var g=d/i,m=h/i,y=-h/n,_=d/n,v=g*a+m*l,b=y*a+_*l,w=g*t+m*e,x=y*t+_*e,T=1/((w-v)*(w-v)+(x-b)*(x-b))-.25;T<0&&(T=0);var A=Math.sqrt(T);o===r&&(A=-A);var C=.5*(v+w)-A*(x-b),E=.5*(b+x)+A*(w-v),S=Math.atan2(b-E,v-C),O=Math.atan2(x-E,w-C)-S;O<0&&1===o?O+=2*Math.PI:0<O&&0===o&&(O-=2*Math.PI);for(var M=Math.ceil(Math.abs(O/(.5*Math.PI+.001))),L=[],k=0;k<M;k++){var D=S+k*O/M,I=S+(k+1)*O/M;L[k]=[C,E,D,I,i,n,h,d]}return P[R]=L}(n[5],n[6],r,o,a,l,s,e,i),h=0;h<c.length;h++){var d=u.apply(this,c[h]);t.bezierCurveTo.apply(t,d)}}}(),function(){var s=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if(0===i)return-1;var n=0;if(0<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==Number.POSITIVE_INFINITY&&n!==Number.NEGATIVE_INFINITY&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),i<=n)return-1;for(var r=0<=n?n:Math.max(i-Math.abs(n),0);r<i;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)i in this&&t.call(e,this[i],i,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var i=[],n=0,r=this.length>>>0;n<r;n++)n in this&&(i[n]=t.call(e,this[n],n,this));return i}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&!t.call(e,this[i],i,this))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var i=0,n=this.length>>>0;i<n;i++)if(i in this&&t.call(e,this[i],i,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var i,n=[],r=0,o=this.length>>>0;r<o;r++)r in this&&(i=this[r],t.call(e,i,r,this)&&n.push(i));return n}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=this.length>>>0,n=0;if(1<arguments.length)e=arguments[1];else for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t.call(null,e,this[n],n,this));return e}),fabric.util.array={invoke:function(t,e){for(var i=s.call(arguments,2),n=[],r=0,o=t.length;r<o;r++)n[r]=i.length?t[r][e].apply(t[r],i):t[r][e].call(t[r]);return n},min:function(t,e){if(t&&0!==t.length){var i=t.length-1,n=e?t[i][e]:t[i];if(e)for(;i--;)t[i][e]<n&&(n=t[i][e]);else for(;i--;)t[i]<n&&(n=t[i]);return n}},max:function(t,e){if(t&&0!==t.length){var i=t.length-1,n=e?t[i][e]:t[i];if(e)for(;i--;)t[i][e]>=n&&(n=t[i][e]);else for(;i--;)t[i]>=n&&(n=t[i]);return n}}}}(),function(){function e(t,e){for(var i in e)t[i]=e[i];return t}fabric.util.object={extend:e,clone:function(t){return e({},t)}}}(),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(){var r=Array.prototype.slice,o=Function.prototype.apply,s=function(){};Function.prototype.bind||(Function.prototype.bind=function(t){var e,i=this,n=r.call(arguments,1);return e=n.length?function(){return o.call(i,this instanceof s?this:t,n.concat(r.call(arguments)))}:function(){return o.call(i,this instanceof s?this:t,arguments)},s.prototype=this.prototype,e.prototype=new s,e})}(),function(){var o=Array.prototype.slice,s=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),a=function(t,n,r){for(var e in n)e in t.prototype&&"function"==typeof t.prototype[e]&&-1<(n[e]+"").indexOf("callSuper")?t.prototype[e]=function(i){return function(){var t=this.constructor.superclass;this.constructor.superclass=r;var e=n[i].apply(this,arguments);if(this.constructor.superclass=t,"initialize"!==i)return e}}(e):t.prototype[e]=n[e],i&&(n.toString!==Object.prototype.toString&&(t.prototype.toString=n.toString),n.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=n.valueOf))};function l(){}function c(t){var e=this.constructor.superclass.prototype[t];return 1<arguments.length?e.apply(this,o.call(arguments,1)):e.call(this)}fabric.util.createClass=function(){var t=null,e=o.call(arguments,0);function i(){this.initialize.apply(this,arguments)}"function"==typeof e[0]&&(t=e.shift()),i.superclass=t,i.subclasses=[],t&&(l.prototype=t.prototype,i.prototype=new l,t.subclasses.push(i));for(var n=0,r=e.length;n<r;n++)a(i,e[n],t);return i.prototype.initialize||(i.prototype.initialize=s),(i.prototype.constructor=i).prototype.callSuper=c,i}}(),function(){function t(t){var e,i,n=Array.prototype.slice.call(arguments,1),r=n.length;for(i=0;i<r;i++)if(e=typeof t[n[i]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}var e,r,o,i,a=(e=0,function(t){return t.__uniqueID||(t.__uniqueID="uniqueID__"+e++)});function s(t,e){return{handler:e,wrappedHandler:(i=t,n=e,function(t){n.call(r(i),t||fabric.window.event)})};var i,n}i={},r=function(t){return i[t]},o=function(t,e){i[t]=e};var n,l,c=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),h=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),d={},u={};c?(n=function(t,e,i){t.addEventListener(e,i,!1)},l=function(t,e,i){t.removeEventListener(e,i,!1)}):h?(n=function(t,e,i){var n=a(t);o(n,t),d[n]||(d[n]={}),d[n][e]||(d[n][e]=[]);var r=s(n,i);d[n][e].push(r),t.attachEvent("on"+e,r.wrappedHandler)},l=function(t,e,i){var n,r=a(t);if(d[r]&&d[r][e])for(var o=0,s=d[r][e].length;o<s;o++)(n=d[r][e][o])&&n.handler===i&&(t.detachEvent("on"+e,n.wrappedHandler),d[r][e][o]=null)}):(n=function(t,e,i){var r,o,n=a(t);if(u[n]||(u[n]={}),!u[n][e]){u[n][e]=[];var s=t["on"+e];s&&u[n][e].push(s),t["on"+e]=(r=n,o=e,function(t){if(u[r]&&u[r][o])for(var e=u[r][o],i=0,n=e.length;i<n;i++)e[i].call(this,t||fabric.window.event)})}u[n][e].push(i)},l=function(t,e,i){var n=a(t);if(u[n]&&u[n][e])for(var r=u[n][e],o=0,s=r.length;o<s;o++)r[o]===i&&r.splice(o,1)}),fabric.util.addListener=n,fabric.util.removeListener=l;var p=function(t){return"unknown"!=typeof t.clientX?t.clientX:0},f=function(t){return"unknown"!=typeof t.clientY?t.clientY:0};fabric.isTouchSupported&&(p=function(t){return"touchend"!==t.type?t.touches&&t.touches[0]&&t.touches[0].pageX-(t.touches[0].pageX-t.touches[0].clientX)||t.clientX:t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].pageX-(t.changedTouches[0].pageX-t.changedTouches[0].clientX)||t.clientX},f=function(t){return"touchend"!==t.type?t.touches&&t.touches[0]&&t.touches[0].pageY-(t.touches[0].pageY-t.touches[0].clientY)||t.clientY:t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].pageY-(t.changedTouches[0].pageY-t.changedTouches[0].clientY)||t.clientY}),fabric.util.getPointer=function(t,e){t||(t=fabric.window.event);for(var i,n=t.target||("unknown"!=typeof t.srcElement?t.srcElement:null),r=fabric.document.body||{scrollLeft:0,scrollTop:0},o=fabric.document.documentElement,s=n,a=0,l=0;n&&n.parentNode&&!i;)(n=n.parentNode)!==fabric.document&&"fixed"===fabric.util.getElementStyle(n,"position")&&(i=n),n!==fabric.document&&s!==e&&"absolute"===fabric.util.getElementStyle(n,"position")?l=a=0:n===fabric.document?(a=r.scrollLeft||o.scrollLeft||0,l=r.scrollTop||o.scrollTop||0):(a+=n.scrollLeft||0,l+=n.scrollTop||0);return{x:p(t)+a,y:f(t)+l}},fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){var t=fabric.document.createElement("div"),e="string"==typeof t.style.opacity,i="string"==typeof t.style.filter,n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,r=function(t){return t};e?r=function(t,e){return t.style.opacity=e,t}:i&&(r=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),n.test(i.filter)?(e=.9999<=e?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(n,e)):i.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if("string"==typeof e)return t.style.cssText+=";"+e,-1<e.indexOf("opacity")?r(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)"opacity"===n?r(t,e[n]):i["float"===n||"cssFloat"===n?void 0===i.styleFloat?"cssFloat":"styleFloat":n]=e[n];return t}}(),function(){var e=Array.prototype.slice;var t,i,n,r=function(t){return e.call(t,0)};try{t=r(fabric.document.childNodes)instanceof Array}catch(t){}function o(t,e){var i=fabric.document.createElement(t);for(var n in e)"class"===n?i.className=e[n]:"for"===n?i.htmlFor=e[n]:i.setAttribute(n,e[n]);return i}function l(t,e){if(t.style||(t.style={}),fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle)return fabric.document.defaultView.getComputedStyle(t,null)[e];var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i}t||(r=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),i=fabric.document.documentElement.style,n="userSelect"in i?"userSelect":"MozUserSelect"in i?"MozUserSelect":"WebkitUserSelect"in i?"WebkitUserSelect":"KhtmlUserSelect"in i?"KhtmlUserSelect":"",fabric.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),n?t.style[n]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},fabric.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),n?t.style[n]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},fabric.util.getScript=function(t,e){var i=fabric.document.getElementsByTagName("head")[0],n=fabric.document.createElement("script"),r=!0;n.onload=n.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),n=n.onload=n.onreadystatechange=null}},n.src=t,i.appendChild(n)},fabric.util.getById=function(t){return"string"==typeof t?fabric.document.getElementById(t):t},fabric.util.toArray=r,fabric.util.makeElement=o,fabric.util.addClass=function(t,e){-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},fabric.util.wrapElement=function(t,e,i){return"string"==typeof e&&(e=o(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},fabric.util.getElementOffset=function(t){var e,i,n={left:0,top:0},r=t&&t.ownerDocument,o={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return{left:0,top:0};for(var a in s)o[s[a]]+=parseInt(l(t,a),10)||0;return e=r.documentElement,void 0!==t.getBoundingClientRect&&(n=t.getBoundingClientRect()),i=null!=r&&r===r.window?r:9===r.nodeType&&(r.defaultView||r.parentWindow),{left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)+o.left,top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0)+o.top}},fabric.util.getElementStyle=l}(),function(){var l=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{if(t[e]())return t[e]}catch(t){}}();function c(){}fabric.util.request=function(t,e){e||(e={});var i,n,r,o=e.method?e.method.toUpperCase():"GET",s=e.onComplete||function(){},a=l();return a.onreadystatechange=function(){4===a.readyState&&(s(a),a.onreadystatechange=c)},"GET"===o&&(i=null,"string"==typeof e.parameters&&(n=t,r=e.parameters,t=n+(/\?/.test(n)?"&":"?")+r)),a.open(o,t,!0),"POST"!==o&&"PUT"!==o||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(i),a}}(),function(){var t=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)},u=function(){return t.apply(fabric.window,arguments)};fabric.util.animate=function(i){i||(i={});var n,r=+new Date,o=i.duration||500,s=r+o,a=i.onChange||function(){},l=i.abort||function(){return!1},c=i.easing||function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},h="startValue"in i?i.startValue:0,t="endValue"in i?i.endValue:100,d=i.byValue||t-h;i.onStart&&i.onStart(),function t(){n=+new Date;var e=s<n?o:n-r;l()?i.onComplete&&i.onComplete():(a(c(e,h,d,o)),s<n?i.onComplete&&i.onComplete():u(t))}()},fabric.util.requestAnimFrame=u}(),function(){function r(t,e,i,n){return i-o(n-t,0,i,n)+e}function o(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}fabric.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)+e)},easeOutElastic:function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-r)*(2*Math.PI)/o)+i+e)},easeInOutElastic:function(t,e,i,n){var r=1.70158,o=0,s=i;return 0===t?e:2==(t/=n/2)?e+i:(o||(o=n*(.3*1.5)),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-r)*(2*Math.PI)/o)*.5+i+e)},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:r,easeOutBounce:o,easeInOutBounce:function(t,e,i,n){return t<n/2?.5*r(2*t,0,i,n)+e:.5*o(2*t-n,0,i,n)+.5*i+e}}}(),function(t){"use strict";var m=t.fabric||(t.fabric={}),o=m.util.object.extend,u=m.util.string.capitalize,g=m.util.object.clone,s=m.util.toFixed,a=m.util.multiplyTransformMatrices;m.SHARED_ATTRIBUTES=["transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"];var y,_,i,n,v,e,b,r={"fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight",cx:"left",x:"left",r:"radius","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration",cy:"top",y:"top",transform:"transformMatrix"},l={stroke:"strokeOpacity",fill:"fillOpacity"};function c(t){return t in r?r[t]:t}function h(t,e,i){var n;"fill"!==t&&"stroke"!==t||"none"!==e?"fillRule"===t?e="evenodd"===e?"destination-over":e:"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/):"transformMatrix"===t&&(e=i&&i.transformMatrix?a(i.transformMatrix,m.parseTransformAttribute(e)):m.parseTransformAttribute(e)):e="";var r=(n="[object Array]"===Object.prototype.toString.call(e))?e.map(parseFloat):parseFloat(e);return!n&&isNaN(r)?e:r}function d(t,e){var i=t.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(i){var n=i[1],r=i[3],o=i[4],s=i[5],a=i[6];n&&(e.fontStyle=n),r&&(e.fontSize=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=parseFloat(o)),a&&(e.fontFamily=a),s&&(e.lineHeight="normal"===s?1:s)}}function w(t){for(var e=t.getElementsByTagName("style"),l={},i=0,n=e.length;i<n;i++){var r=e[0].textContent;(r=r.replace(/\/\*[\s\S]*?\*\//g,"")).match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){var e=t.match(/([\s\S]*?)\s*\{([^}]*)\}/);t=e[1];var i=e[2].trim().replace(/;$/,"").split(/\s*;\s*/);l[t]||(l[t]={});for(var n=0,r=i.length;n<r;n++){var o=i[n].split(/\s*:\s*/),s=o[0],a=o[1];l[t][s]=a}})}return l}m.parseTransformAttribute=(y=[1,0,0,1,0,0],_="(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\)))",i=new RegExp("^\\s*(?:(?:(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\)))(?:(?:\\s+,?\\s*|,\\s*)(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))\\s*\\))))*)?)\\s*$"),n=new RegExp(_,"g"),function(t){var f=y.concat(),g=[];if(!t||t&&!i.test(t))return f;t.replace(n,function(t){var e,i,n,r,o,s,a,l,c,h,d=new RegExp(_).exec(t).filter(function(t){return""!==t&&null!=t}),u=d[1],p=d.slice(2).map(parseFloat);switch(u){case"translate":h=p,(c=f)[4]=h[0],2===h.length&&(c[5]=h[1]);break;case"rotate":a=f,l=p[0],a[0]=Math.cos(l),a[1]=Math.sin(l),a[2]=-Math.sin(l),a[3]=Math.cos(l);break;case"scale":n=f,o=(r=p)[0],s=2===r.length?r[1]:r[0],n[0]=o,n[3]=s;break;case"skewX":i=p,f[2]=i[0];break;case"skewY":e=p,f[1]=e[0];break;case"matrix":f=p}g.push(f.concat()),f=y.concat()});for(var e=g[0];1<g.length;)g.shift(),e=m.util.multiplyTransformMatrices(e,g[0]);return e}),m.parseSVGDocument=(v=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,e="(?:[-+]?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?)",b=new RegExp("^\\s*("+e+"+)\\s*,?\\s*("+e+"+)\\s*,?\\s*("+e+"+)\\s*,?\\s*("+e+"+)\\s*$"),function(t,e,i){if(t){var n=new Date,r=m.util.toArray(t.getElementsByTagName("*"));if(0===r.length){for(var o=[],s=0,a=(r=t.selectNodes("//*[name(.)!='svg']")).length;s<a;s++)o[s]=r[s];r=o}var l=r.filter(function(t){return v.test(t.tagName)&&!function(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName))return!0;return!1}(t,/^(?:pattern|defs)$/)});if(l&&(!l||l.length)){var c=t.getAttribute("viewBox"),h=t.getAttribute("width"),d=t.getAttribute("height"),u=null,p=null;c&&(c=c.match(b))&&(parseInt(c[1],10),parseInt(c[2],10),u=parseInt(c[3],10),p=parseInt(c[4],10));var f={width:u=h?parseFloat(h):u,height:p=d?parseFloat(d):p};m.gradientDefs=m.getGradientDefs(t),m.cssRules=w(t),m.parseElements(l,function(t){m.documentParsingTime=new Date-n,e&&e(t,f)},g(f),i)}}});var p=function(t,e){e(!1)},f=function(){},x=function(){};o(m,{parseAttributes:function(i,t){if(i){var n,r={};i.parentNode&&/^g$/i.test(i.parentNode.nodeName)&&(r=m.parseAttributes(i.parentNode,t));var e=t.reduce(function(t,e){return(n=i.getAttribute(e))&&(e=c(e),n=h(e,n,r),t[e]=n),t},{});return e=o(e,o(function(t){var e=t.nodeName,i=t.getAttribute("class"),n=t.getAttribute("id"),r={};for(var o in m.cssRules){var s=i&&new RegExp("^\\."+i).test(o)||n&&new RegExp("^#"+n).test(o)||new RegExp("^"+e).test(o);if(s)for(var a in m.cssRules[o])r[a]=m.cssRules[o][a]}return r}(i),m.parseStyleAttribute(i))),function(t){for(var e in l)if(t[e]&&void 0!==t[l[e]]&&0!==t[e].indexOf("url(")){var i=new m.Color(t[e]);t[e]=i.setAlpha(s(i.getAlpha()*t[l[e]],2)).toRgba(),delete t[l[e]]}return t}(o(r,e))}},parseElements:function(t,e,i,n){var r=new Array(t.length),o=t.length;function s(){0==--o&&(function(t){for(var e=t.length;e--;){var i=t[e].get("fill");if(/^url\(/.test(i)){var n=i.slice(5,i.length-1);m.gradientDefs[n]&&t[e].set("fill",m.Gradient.fromElement(m.gradientDefs[n],t[e]))}}}(r=r.filter(function(t){return null!=t})),e(r))}for(var a,l=0,c=t.length;l<c;l++){a=t[l];var h=m[u(a.tagName)];if(h&&h.fromElement)try{if(h.async)h.fromElement(a,function(e,i){return function(t){n&&n(i,t),r.splice(e,0,t),s()}}(l,a),i);else{var d=h.fromElement(a,i);n&&n(a,d),r.splice(l,0,d),s()}}catch(t){m.log(t)}else s()}},parseStyleAttribute:function(t){var i,n,r={},e=t.getAttribute("style");if(!e)return r;if("string"==typeof e)e.replace(/;$/,"").split(";").forEach(function(t){var e=t.split(":");i=c(e[0].trim().toLowerCase()),n=h(i,e[1].trim()),"font"===i?d(n,r):r[i]=n});else for(var o in e)void 0!==e[o]&&(i=c(o.toLowerCase()),n=h(i,e[o]),"font"===i?d(n,r):r[i]=n);return r},parsePointsAttribute:function(t){if(!t)return null;var e=-1<(t=t.trim()).indexOf(",");t=t.split(/\s+/);var i,n,r=[];if(e)for(i=0,n=t.length;i<n;i++){var o=t[i].split(",");r.push({x:parseFloat(o[0]),y:parseFloat(o[1])})}else for(i=0,n=t.length;i<n;i+=2)r.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return r.length,r},getCSSRules:w,loadSVGFromURL:function(i,o,n){function e(t){var e=t.responseXML;!e.documentElement&&m.window.ActiveXObject&&t.responseText&&((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),e.documentElement&&m.parseSVGDocument(e.documentElement,function(t,e){x(i,{objects:m.util.array.invoke(t,"toObject"),options:e}),o(t,e)},n)}i=i.replace(/^\n\s*/,"").trim(),p(i,function(t){t?f(i,function(t){var e,i,n,r=(i=(e=t).objects,n=e.options,{objects:i=i.map(function(t){return m[u(t.type)].fromObject(t)}),options:n});o(r.objects,r.options)}):new m.util.request(i,{method:"get",onComplete:e})})},loadSVGFromString:function(t,i,e){var n;if(t=t.trim(),"undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(n=r.parseFromString(t,"text/xml"))}else m.window.ActiveXObject&&((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));m.parseSVGDocument(n.documentElement,function(t,e){i(t,e)},e)},createSVGFontFacesMarkup:function(t){for(var e="",i=0,n=t.length;i<n;i++)"text"===t[i].type&&t[i].path&&(e+=["@font-face {","font-family: ",t[i].fontFamily,"; ","src: url('",t[i].path,"')","}"].join(""));return e&&(e=['<style type="text/css">',"<![CDATA[",e,"]]>","</style>"].join("")),e},createSVGRefElementsMarkup:function(t){var e="";return t.backgroundColor&&t.backgroundColor.source&&(e=['<pattern x="0" y="0" id="backgroundColorPattern" ','width="',t.backgroundColor.source.width,'" height="',t.backgroundColor.source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',t.backgroundColor.source.width,'" height="',t.backgroundColor.source.height,'" xlink:href="',t.backgroundColor.source.src,'"></image></pattern>'].join("")),e},getGradientDefs:function(t){var e,i,n=t.getElementsByTagName("linearGradient"),r=t.getElementsByTagName("radialGradient"),o={};for(i=n.length;i--;)o[(e=n[i]).getAttribute("id")]=e;for(i=r.length;i--;)o[(e=r[i]).getAttribute("id")]=e;return o}})}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=i).prototype={constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return new i(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}}}(void 0!==exports?exports:this),function(t){"use strict";var u=t.fabric||(t.fabric={});function p(t){this.status=t,this.points=[]}u.Intersection?u.warn("fabric.Intersection is already defined"):(u.Intersection=p,u.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},u.Intersection.intersectLineLine=function(t,e,i,n){var r,o=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),s=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),a=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==a){var l=o/a,c=s/a;0<=l&&l<=1&&0<=c&&c<=1?(r=new p("Intersection")).points.push(new u.Point(t.x+l*(e.x-t.x),t.y+l*(e.y-t.y))):r=new p}else r=new p(0===o||0===s?"Coincident":"Parallel");return r},u.Intersection.intersectLinePolygon=function(t,e,i){for(var n=new p,r=i.length,o=0;o<r;o++){var s=i[o],a=i[(o+1)%r],l=p.intersectLineLine(t,e,s,a);n.appendPoints(l.points)}return 0<n.points.length&&(n.status="Intersection"),n},u.Intersection.intersectPolygonPolygon=function(t,e){for(var i=new p,n=t.length,r=0;r<n;r++){var o=t[r],s=t[(r+1)%n],a=p.intersectLinePolygon(o,s,e);i.appendPoints(a.points)}return 0<i.points.length&&(i.status="Intersection"),i},u.Intersection.intersectPolygonRectangle=function(t,e,i){var n=e.min(i),r=e.max(i),o=new u.Point(r.x,n.y),s=new u.Point(n.x,r.y),a=p.intersectLinePolygon(n,o,t),l=p.intersectLinePolygon(o,r,t),c=p.intersectLinePolygon(r,s,t),h=p.intersectLinePolygon(s,n,t),d=new p;return d.appendPoints(a.points),d.appendPoints(l.points),d.appendPoints(c.points),d.appendPoints(h.points),0<d.points.length&&(d.status="Intersection"),d})}(void 0!==exports?exports:this),function(t){"use strict";var c=t.fabric||(t.fabric={});function h(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function d(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}c.Color?c.warn("fabric.Color is already defined."):(c.Color=h,c.Color.prototype={_tryParsingColor:function(t){var e;t in h.colorNameMap&&(t=h.colorNameMap[t]),(e=h.sourceFromHex(t))||(e=h.sourceFromRgb(t)),e||(e=h.sourceFromHsl(t)),e&&this.setSource(e)},_rgbToHsl:function(t,e,i){t/=255,e/=255,i/=255;var n,r,o,s=c.util.array.max([t,e,i]),a=c.util.array.min([t,e,i]);if(o=(s+a)/2,s===a)n=r=0;else{var l=s-a;switch(r=.5<o?l/(2-s-a):l/(s+a),s){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return[Math.round(360*n),Math.round(100*r),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t=this.getSource(),e=t[0].toString(16);e=1===e.length?"0"+e:e;var i=t[1].toString(16);i=1===i.length?"0"+i:i;var n=t[2].toString(16);return n=1===n.length?"0"+n:n,e.toUpperCase()+i.toUpperCase()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof h||(t=new h(t));for(var e=[],i=this.getAlpha(),n=this.getSource(),r=t.getSource(),o=0;o<3;o++)e.push(Math.round(.5*n[o]+.5*r[o]));return e[3]=i,this.setSource(e),this}},c.Color.reRGBa=/^rgba?\(\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*,\s*(\d{1,3}\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,c.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,c.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,c.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},c.Color.fromRgb=function(t){return h.fromSource(h.sourceFromRgb(t))},c.Color.sourceFromRgb=function(t){var e=t.match(h.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),n=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),r=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(n,10),parseInt(r,10),e[4]?parseFloat(e[4]):1]}},c.Color.fromRgba=h.fromRgb,c.Color.fromHsl=function(t){return h.fromSource(h.sourceFromHsl(t))},c.Color.sourceFromHsl=function(t){var e=t.match(h.reHSLa);if(e){var i,n,r,o=(parseFloat(e[1])%360+360)%360/360,s=parseFloat(e[2])/(/%$/.test(e[2])?100:1),a=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===s)i=n=r=a;else{var l=a<=.5?a*(s+1):a+s-a*s,c=2*a-l;i=d(c,l,o+1/3),n=d(c,l,o),r=d(c,l,o-1/3)}return[Math.round(255*i),Math.round(255*n),Math.round(255*r),e[4]?parseFloat(e[4]):1]}},c.Color.fromHsla=h.fromHsl,c.Color.fromHex=function(t){return h.fromSource(h.sourceFromHex(t))},c.Color.sourceFromHex=function(t){if(t.match(h.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length,n=i?e.charAt(0)+e.charAt(0):e.substring(0,2),r=i?e.charAt(1)+e.charAt(1):e.substring(2,4),o=i?e.charAt(2)+e.charAt(2):e.substring(4,6);return[parseInt(n,16),parseInt(r,16),parseInt(o,16),1]}},c.Color.fromSource=function(t){var e=new h;return e.setSource(t),e})}(void 0!==exports?exports:this),function(){function l(t){var e,i,n=t.getAttribute("style"),r=t.getAttribute("offset");if(r=parseFloat(r)/(/%$/.test(r)?100:1),n){var o=n.split(/\s*;\s*/);""===o[o.length-1]&&o.pop();for(var s=o.length;s--;){var a=o[s].split(/\s*:\s*/),l=a[0].trim(),c=a[1].trim();"stop-color"===l?e=c:"stop-opacity"===l&&(i=c)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=t.getAttribute("stop-opacity")),{offset:r,color:e=new fabric.Color(e).toRgb(),opacity:isNaN(parseFloat(i))?1:parseFloat(i)}}function c(t,e){for(var i in e){if("string"==typeof e[i]&&/^\d+%$/.test(e[i])){var n=parseFloat(e[i],10);"x1"===i||"x2"===i||"r2"===i?e[i]=fabric.util.toFixed(t.width*n/100,2):"y1"!==i&&"y2"!==i||(e[i]=fabric.util.toFixed(t.height*n/100,2))}"x1"===i||"x2"===i?e[i]-=fabric.util.toFixed(t.width/2,2):"y1"!==i&&"y2"!==i||(e[i]-=fabric.util.toFixed(t.height/2,2))}}fabric.Gradient=fabric.util.createClass({initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.gradientUnits=t.gradientUnits||"objectBoundingBox",this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,gradientUnits:this.gradientUnits,colorStops:this.colorStops}},toSVG:function(t,e){var i,n=fabric.util.object.clone(this.coords);this.colorStops.sort(function(t,e){return t.offset-e.offset}),e&&"userSpaceOnUse"===this.gradientUnits?(n.x1+=t.width/2,n.y1+=t.height/2,n.x2+=t.width/2,n.y2+=t.height/2):"objectBoundingBox"===this.gradientUnits&&function(t,e){for(var i in e)"x1"===i||"x2"===i?e[i]+=fabric.util.toFixed(t.width/2,2):"y1"!==i&&"y2"!==i||(e[i]+=fabric.util.toFixed(t.height/2,2)),"x1"===i||"x2"===i||"r2"===i?e[i]=fabric.util.toFixed(e[i]/t.width*100,2)+"%":"y1"!==i&&"y2"!==i||(e[i]=fabric.util.toFixed(e[i]/t.height*100,2)+"%")}(t,n),"linear"===this.type?i=["<linearGradient ",'id="SVGID_',this.id,'" gradientUnits="',this.gradientUnits,'" x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'">']:"radial"===this.type&&(i=["<radialGradient ",'id="SVGID_',this.id,'" gradientUnits="',this.gradientUnits,'" cx="',n.x2,'" cy="',n.y2,'" r="',n.r2,'" fx="',n.x1,'" fy="',n.y1,'">']);for(var r=0;r<this.colorStops.length;r++)i.push("<stop ",'offset="',100*this.colorStops[r].offset+"%",'" style="stop-color:',this.colorStops[r].color,this.colorStops[r].opacity?";stop-opacity: "+this.colorStops[r].opacity:";",'"/>');return i.push("linear"===this.type?"</linearGradient>":"</radialGradient>"),i.join("")},toLive:function(t){var e;if(this.type){"linear"===this.type?e=t.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2,this.coords.y2):"radial"===this.type&&(e=t.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));for(var i=0,n=this.colorStops.length;i<n;i++){var r=this.colorStops[i].color,o=this.colorStops[i].opacity,s=this.colorStops[i].offset;void 0!==o&&(r=new fabric.Color(r).setAlpha(o).toRgba()),e.addColorStop(parseFloat(s),r)}return e}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(t,e){var i=t.getElementsByTagName("stop"),n="linearGradient"===t.nodeName?"linear":"radial",r=t.getAttribute("gradientUnits")||"objectBoundingBox",o=[],s={};"linear"===n?s={x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}:"radial"===n&&(s={x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"});for(var a=i.length;a--;)o.push(l(i[a]));return c(e,s),new fabric.Gradient({type:n,coords:s,gradientUnits:r,colorStops:o})},forObject:function(t,e){return e||(e={}),c(t,e),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if(void 0!==fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,i=e.width/t.getWidth(),n=e.height/t.getHeight(),r="";return e.src?r=e.src:e.toDataURL&&(r=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+this.offsetX+'" y="'+this.offsetY+'" width="'+i+'" height="'+n+'"><image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+r+'"></image></pattern>'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;return t.createPattern(e,this.repeat)}}),function(t){"use strict";var n=t.fabric||(t.fabric={});n.Shadow?n.warn("fabric.Shadow is already defined."):(n.Shadow=n.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,initialize:function(t){for(var e in"string"==typeof t&&(t=this._parseShadow(t)),t)this[e]=t[e];this.id=n.Object.__uid++},_parseShadow:function(t){var e=t.trim(),i=n.Shadow.reOffsetsAndBlur.exec(e)||[];return{color:(e.replace(n.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha";return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),'<filter id="SVGID_'+this.id+'" y="-40%" height="180%"><feGaussianBlur in="'+e+'" stdDeviation="'+(this.blur?this.blur/3:0)+'"></feGaussianBlur><feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset><feMerge><feMergeNode></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>'},toObject:function(){return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY}}}),n.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(void 0!==exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)fabric.warn("fabric.StaticCanvas is already defined.");else{var t=fabric.util.object.extend,e=fabric.util.getElementOffset,o=fabric.util.removeFromArray,i=fabric.util.removeListener,n=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:"",backgroundImageOpacity:1,backgroundImageStretch:!0,overlayImage:"",overlayImageLeft:0,overlayImageTop:0,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return fabric.util.loadImage(t,function(t){this.overlayImage=t,i&&"overlayImageLeft"in i&&(this.overlayImageLeft=i.overlayImageLeft),i&&"overlayImageTop"in i&&(this.overlayImageTop=i.overlayImageTop),e&&e()},this),this},setBackgroundImage:function(t,e,i){return fabric.util.loadImage(t,function(t){this.backgroundImage=t,i&&"backgroundImageOpacity"in i&&(this.backgroundImageOpacity=i.backgroundImageOpacity),i&&"backgroundImageStretch"in i&&(this.backgroundImageStretch=i.backgroundImageStretch),e&&e()},this),this},setBackgroundColor:function(e,i){if(e.source){var n=this;fabric.util.loadImage(e.source,function(t){n.backgroundColor=new fabric.Pattern({source:t,repeat:e.repeat}),i&&i()})}else this.backgroundColor=e,i&&i();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw n;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),void 0===t.getContext)throw n},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=parseInt(this.lowerCanvasEl.width,10)||0,this.height=parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px")},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t){return this._setDimension("width",t)},setHeight:function(t){return this._setDimension("height",t)},setDimensions:function(t){for(var e in t)this._setDimension(e,t[e]);return this},_setDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.lowerCanvasEl.style[t]=e+"px",this.upperCanvasEl&&(this.upperCanvasEl[t]=e,this.upperCanvasEl.style[t]=e+"px"),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e+"px"),this[t]=e,this.calcOffset(),this.renderAll(),this},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e)if(this.controlsAboveOverlay){var i=e.hasBorders,n=e.hasControls;e.hasBorders=e.hasControls=!1,e.render(t),e.hasBorders=i,e.hasControls=n}else e.render(t)},_onObjectAdded:function(t){this.stateful&&t.setupState(),t.setCoords(),(t.canvas=this).fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed")},getObjects:function(){return this._objects},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[!0===t&&this.interactive?"contextTop":"contextContainer"];this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this.backgroundColor&&(e.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(e):this.backgroundColor,e.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),"object"==typeof this.backgroundImage&&this._drawBackroundImage(e);for(var i=this.getActiveGroup(),n=0,r=this._objects.length;n<r;++n)(!i||i&&this._objects[n]&&!i.contains(this._objects[n]))&&this._draw(e,this._objects[n]);if(i){var o=[];this.forEachObject(function(t){i.contains(t)&&o.push(t)}),i._set("objects",o),this._draw(e,i)}return this.clipTo&&e.restore(),this.overlayImage&&e.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_drawBackroundImage:function(t){t.save(),t.globalAlpha=this.backgroundImageOpacity,this.backgroundImageStretch?t.drawImage(this.backgroundImage,0,0,this.width,this.height):t.drawImage(this.backgroundImage,0,0),t.restore()},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this.overlayImage&&t.drawImage(this.overlayImage,this.overlayImageLeft,this.overlayImageTop),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return t.set("left",this.getCenter().left),this.renderAll(),this},centerObjectV:function(t){return t.set("top",this.getCenter().top),this.renderAll(),this},centerObject:function(t){return this.centerObjectH(t).centerObjectV(t)},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(n,r){var t=this.getActiveGroup();t&&this.discardActiveGroup();var e={objects:this.getObjects().map(function(t){var e;this.includeDefaultValues||(e=t.includeDefaultValues,t.includeDefaultValues=!1);var i=t[n](r);return this.includeDefaultValues||(t.includeDefaultValues=e),i},this),background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.backgroundImage&&(e.backgroundImage=this.backgroundImage.src,e.backgroundImageOpacity=this.backgroundImageOpacity,e.backgroundImageStretch=this.backgroundImageStretch),this.overlayImage&&(e.overlayImage=this.overlayImage.src,e.overlayImageLeft=this.overlayImageLeft,e.overlayImageTop=this.overlayImageTop),fabric.util.populateWithProperties(this,e,r),t&&(this.setActiveGroup(new fabric.Group(t.getObjects())),t.forEachObject(function(t){t.set("active",!0)})),e},toSVG:function(t){t||(t={});var e=[];t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'),e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',t.viewBox?t.viewBox.width:this.width,'" ','height="',t.viewBox?t.viewBox.height:this.height,'" ',this.backgroundColor&&!this.backgroundColor.source?'style="background-color: '+this.backgroundColor+'" ':null,t.viewBox?'viewBox="'+t.viewBox.x+" "+t.viewBox.y+" "+t.viewBox.width+" "+t.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>"),this.backgroundColor&&this.backgroundColor.source&&e.push('<rect x="0" y="0" ','width="',"repeat-y"===this.backgroundColor.repeat||"no-repeat"===this.backgroundColor.repeat?this.backgroundColor.source.width:this.width,'" height="',"repeat-x"===this.backgroundColor.repeat||"no-repeat"===this.backgroundColor.repeat?this.backgroundColor.source.height:this.height,'" fill="url(#backgroundColorPattern)"',"></rect>"),this.backgroundImage&&e.push('<image x="0" y="0" ','width="',this.backgroundImageStretch?this.width:this.backgroundImage.width,'" height="',this.backgroundImageStretch?this.height:this.backgroundImage.height,'" preserveAspectRatio="',this.backgroundImageStretch?"none":"defer",'" xlink:href="',this.backgroundImage.src,'" style="opacity:',this.backgroundImageOpacity,'"></image>'),this.overlayImage&&e.push('<image x="',this.overlayImageLeft,'" y="',this.overlayImageTop,'" width="',this.overlayImage.width,'" height="',this.overlayImage.height,'" xlink:href="',this.overlayImage.src,'"></image>');var i=this.getActiveGroup();i&&this.discardActiveGroup();for(var n=0,r=this.getObjects(),o=r.length;n<o;n++)e.push(r[n].toSVG());return i&&(this.setActiveGroup(new fabric.Group(i.getObjects())),i.forEachObject(function(t){t.set("active",!0)})),e.push("</svg>"),e.join("")},remove:function(t){return this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this.discardActiveObject(),this.fire("selection:cleared")),fabric.Collection.remove.call(this,t)},sendToBack:function(t){return o(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return o(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var i=this._objects.indexOf(t);if(0!==i){var n;if(e)for(var r=(n=i)-1;0<=r;--r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=i-1;o(this._objects,t),this._objects.splice(n,0,t),this.renderAll&&this.renderAll()}return this},bringForward:function(t,e){var i=this._objects.indexOf(t);if(i!==this._objects.length-1){var n;if(e)for(var r=(n=i)+1;r<this._objects.length;++r){if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){n=r;break}}else n=i+1;o(this._objects,t),this._objects.splice(n,0,t),this.renderAll&&this.renderAll()}return this},moveTo:function(t,e){return o(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&(fabric.isTouchSupported?(i(this.upperCanvasEl,"touchstart",this._onMouseDown),i(this.upperCanvasEl,"touchmove",this._onMouseMove),void 0!==Event&&"remove"in Event&&Event.remove(this.upperCanvasEl,"gesture",this._onGesture)):(i(this.upperCanvasEl,"mousedown",this._onMouseDown),i(this.upperCanvasEl,"mousemove",this._onMouseMove),i(fabric.window,"resize",this._onResize))),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',toGrayscale:function(t){var e,i,n,r,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,l=s.width,c=s.height;for(n=0;n<l;n++)for(r=0;r<c;r++)i=(a[e=4*n*c+4*r]+a[e+1]+a[e+2])/3,a[e]=i,a[e+1]=i,a[e+2]=i;o.putImageData(s,0,0)},supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"getImageData":return void 0!==i.getImageData;case"setLineDash":return void 0!==i.setLineDash;case"toDataURL":return void 0!==e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(t){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){var c=fabric.util.array.min,h=fabric.util.array.max;fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop;t.beginPath();var e=this._points[0],i=this._points[1];2===this._points.length&&e.x===i.x&&e.y===i.y&&(e.x-=.5,i.x+=.5),t.moveTo(e.x,e.y);for(var n=1,r=this._points.length;n<r;n++){var o=e.midPointFrom(i);t.quadraticCurveTo(e.x,e.y,o.x,o.y),e=this._points[n],i=this._points[n+1]}t.lineTo(e.x,e.y),t.stroke()},_getSVGPathData:function(){return this.box=this.getPathBoundingBox(this._points),this.convertPointsToSVGPath(this._points,this.box.minx,this.box.maxx,this.box.miny,this.box.maxy)},getPathBoundingBox:function(t){for(var e=[],i=[],n=t[0],r=t[1],o=n,s=1,a=t.length;s<a;s++){var l=n.midPointFrom(r);e.push(o.x),e.push(l.x),i.push(o.y),i.push(l.y),n=t[s],r=t[s+1],o=l}return e.push(n.x),i.push(n.y),{minx:c(e),miny:c(i),maxx:h(e),maxy:h(i)}},convertPointsToSVGPath:function(t,e,i,n){var r=[],o=new fabric.Point(t[0].x-e,t[0].y-n),s=new fabric.Point(t[1].x-e,t[1].y-n);r.push("M ",t[0].x-e," ",t[0].y-n," ");for(var a=1,l=t.length;a<l;a++){var c=o.midPointFrom(s);r.push("Q ",o.x," ",o.y," ",c.x," ",c.y," "),o=new fabric.Point(t[a].x-e,t[a].y-n),a+1<t.length&&(s=new fabric.Point(t[a+1].x-e,t[a+1].y-n))}return r.push("L ",o.x," ",o.y," "),r},createPath:function(t){var e=new fabric.Path(t);return e.fill=null,e.stroke=this.color,e.strokeWidth=this.width,e.strokeLineCap=this.strokeLineCap,e.strokeLineJoin=this.strokeLineJoin,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var t=this._getSVGPathData().join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.box.minx+(this.box.maxx-this.box.minx)/2,i=this.box.miny+(this.box.maxy-this.box.miny)/2;this.canvas.contextTop.arc(e,i,3,0,2*Math.PI,!1);var n=this.createPath(t);n.set({left:e,top:i}),this.canvas.add(n),n.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:n})}else this.canvas.renderAll()}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;i.fillStyle=e.fill,i.beginPath(),i.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),i.closePath(),i.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.points.length;i<n;i++){var r=this.points[i],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var s=new fabric.Group(e);this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),i=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,n=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=n,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,n=this.sprayChunks.length;i<n;i++)for(var r=this.sprayChunks[i],o=0,s=r.length;o<s;o++){var a=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,fill:this.color});this.shadow&&a.setShadow(this.shadow),e.push(a)}var l=new fabric.Group(e);this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color,t.save();for(var e=0,i=this.sprayChunkPoints.length;e<i;e++){var n=this.sprayChunkPoints[e];void 0!==n.opacity&&(t.globalAlpha=n.opacity),t.fillRect(n.x,n.y,n.width,n.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e=this.width/2,i=0;i<this.density;i++){var n={x:fabric.util.getRandomInt(t.x-e,t.x+e),y:fabric.util.getRandomInt(t.y-e,t.y+e),width:this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth};this.randomOpacity&&(n.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=fabric.document.createElement("canvas"),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var a=fabric.util.getPointer,l=fabric.util.degreesToRadians,c=fabric.util.radiansToDegrees,h=Math.atan2,f=Math.abs,d=Math.min,u=Math.max;for(var t in fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centerTransform:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEvents(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set("scaleX",e.original.scaleX),e.target.set("scaleY",e.original.scaleY),e.target.set("left",e.original.left),e.target.set("top",e.original.top),t.altKey||this.centerTransform||e.target.centerTransform?("center"!==e.originX&&("right"===e.originX?e.mouseXSign=-1:e.mouseXSign=1),"center"!==e.originY&&("bottom"===e.originY?e.mouseYSign=-1:e.mouseYSign=1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var i=this.getPointer(t),n=this._normalizePointer(e,i);return e.containsPoint(n)||e._findTargetCorner(t,this._offset)},_normalizePointer:function(t,e){var i=this.getActiveGroup(),n=e.x,r=e.y;return i&&"group"!==t.type&&i.contains(t)&&(n-=i.left,r-=i.top),{x:n,y:r}},isTargetTransparent:function(t,e,i){var n=this.contextCache,r=t.hasBorders,o=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(n,t),t.hasBorders=r,t.transparentCorners=o,0<this.targetFindTolerance&&(e>this.targetFindTolerance?e-=this.targetFindTolerance:e=0,i>this.targetFindTolerance?i-=this.targetFindTolerance:i=0);for(var s=!0,a=n.getImageData(e,i,2*this.targetFindTolerance||1,2*this.targetFindTolerance||1),l=3,c=a.data.length;l<c;l+=4){if(!1===(s=a.data[l]<=0))break}return a=null,this.clearContext(n),s},_shouldClearSelection:function(t,e){var i=this.getActiveGroup();return!e||e&&i&&!i.contains(e)&&i!==e&&!t.shiftKey||e&&!e.selectable},_setupCurrentTransform:function(t,e){if(e){var i,n="drag",r=a(t,e.canvas.upperCanvasEl);(i=e._findTargetCorner(t,this._offset))&&(n="ml"===i||"mr"===i?"scaleX":"mt"===i||"mb"===i?"scaleY":"mtr"===i?"rotate":"scale");var o=e.originX,s=e.originY;"ml"===i||"tl"===i||"bl"===i?o="right":"mr"!==i&&"tr"!==i&&"br"!==i||(o="left"),"tl"===i||"mt"===i||"tr"===i?s="bottom":"bl"!==i&&"mb"!==i&&"br"!==i||(s="top"),this._currentTransform={target:e,action:n,scaleX:e.scaleX,scaleY:e.scaleY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:o,originY:s,ex:r.x,ey:r.y,left:e.left,top:e.top,theta:l(e.angle),width:e.width*e.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:e.left,top:e.top,scaleX:e.scaleX,scaleY:e.scaleY,originX:o,originY:s},this._resetCurrentTransform(t)}},_shouldHandleGroupLogic:function(t,e){var i=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||i&&i!==e)&&this.selection},_handleGroupLogic:function(t,e){if(e!==this.getActiveGroup()||(e=this.findTarget(t,!0))&&!e.isType("group")){var i=this.getActiveGroup();if(i)i.contains(e)?(i.removeWithUpdate(e),this._resetObjectTransform(i),e.set("active",!1),1===i.size()&&this.discardActiveGroup()):(i.addWithUpdate(e),this._resetObjectTransform(i)),this.fire("selection:created",{target:i,e:t}),i.set("active",!0);else{if(this._activeObject&&e!==this._activeObject){var n=this.getObjects(),r=n.indexOf(this._activeObject)<n.indexOf(e),o=new fabric.Group(r?[e,this._activeObject]:[this._activeObject,e]);this.setActiveGroup(o),this._activeObject=null,i=this.getActiveGroup(),this.fire("selection:created",{target:i,e:t})}e.set("active",!0)}i&&i.saveCoords()}},_translateObject:function(t,e){var i=this._currentTransform.target;i.get("lockMovementX")||i.set("left",t-this._currentTransform.offsetX),i.get("lockMovementY")||i.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,i){var n=this._currentTransform,r=this._offset,o=n.target,s=o.get("lockScalingX"),a=o.get("lockScalingY");if(!s||!a){var l=o.translateToOriginPoint(o.getCenterPoint(),n.originX,n.originY),c=o.toLocalPoint(new fabric.Point(t-r.left,e-r.top),n.originX,n.originY);"right"===n.originX?c.x*=-1:"center"===n.originX&&(c.x*=2*n.mouseXSign,c.x<0&&(n.mouseXSign=-n.mouseXSign)),"bottom"===n.originY?c.y*=-1:"center"===n.originY&&(c.y*=2*n.mouseYSign,c.y<0&&(n.mouseYSign=-n.mouseYSign)),f(c.x)>o.padding?c.x<0?c.x+=o.padding:c.x-=o.padding:c.x=0,f(c.y)>o.padding?c.y<0?c.y+=o.padding:c.y-=o.padding:c.y=0;var h=o.scaleX,d=o.scaleY;if("equally"!==i||s||a)i?"x"!==i||o.get("lockUniScaling")?"y"!==i||o.get("lockUniScaling")||(d=c.y/(o.height+o.strokeWidth),a||o.set("scaleY",d)):(h=c.x/(o.width+o.strokeWidth),s||o.set("scaleX",h)):(h=c.x/(o.width+o.strokeWidth),d=c.y/(o.height+o.strokeWidth),s||o.set("scaleX",h),a||o.set("scaleY",d));else{var u=c.y+c.x,p=(o.height+o.strokeWidth)*n.original.scaleY+(o.width+o.strokeWidth)*n.original.scaleX;h=n.original.scaleX*u/p,d=n.original.scaleY*u/p,o.set("scaleX",h),o.set("scaleY",d)}h<0&&("left"===n.originX?n.originX="right":"right"===n.originX&&(n.originX="left")),d<0&&("top"===n.originY?n.originY="bottom":"bottom"===n.originY&&(n.originY="top")),o.setPositionByOrigin(l,n.originX,n.originY)}},_rotateObject:function(t,e){var i=this._currentTransform,n=this._offset;if(!i.target.get("lockRotation")){var r=h(i.ey-i.top-n.top,i.ex-i.left-n.left),o=h(e-i.top-n.top,t-i.left-n.left),s=c(o-r+i.theta);s<0&&(s=360+s),i.target.angle=s}},_setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,i=e.left,n=e.top,r=f(i),o=f(n);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(0<i?0:-i),e.ey-(0<n?0:-n),r,o),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,1<this.selectionDashArray.length){var s=e.ex+.5-(0<i?0:r),a=e.ey+.5-(0<n?0:o);t.beginPath(),fabric.util.drawDashedLine(t,s,a,s+r,a,this.selectionDashArray),fabric.util.drawDashedLine(t,s,a+o-1,s+r,a+o-1,this.selectionDashArray),fabric.util.drawDashedLine(t,s,a,s,a+o,this.selectionDashArray),fabric.util.drawDashedLine(t,s+r-1,a,s+r-1,a+o,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+.5-(0<i?0:r),e.ey+.5-(0<n?0:o),r,o)},_findSelectedObjects:function(t){for(var e,i=[],n=this._groupSelector.ex,r=this._groupSelector.ey,o=n+this._groupSelector.left,s=r+this._groupSelector.top,a=new fabric.Point(d(n,o),d(r,s)),l=new fabric.Point(u(n,o),u(r,s)),c=n===o&&r===s,h=this._objects.length;h--&&!((e=this._objects[h])&&(e.intersectsWithRect(a,l)||e.isContainedWithinRect(a,l)||e.containsPoint(a)||e.containsPoint(l))&&this.selection&&e.selectable&&(e.set("active",!0),i.push(e),c)););1===i.length?this.setActiveObject(i[0],t):1<i.length&&(i=new fabric.Group(i.reverse()),this.setActiveGroup(i),i.saveCoords(),this.fire("selection:created",{target:i}),this.renderAll())},findTarget:function(t,e){if(!this.skipTargetFind){var i,n=this.getPointer(t);if(this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(t,this._offset))return i=this.lastRenderedObjectWithControlsAboveOverlay;var r=this.getActiveGroup();if(r&&!e&&this.containsPoint(t,r))return i=r;for(var o=[],s=this._objects.length;s--;)if(this._objects[s]&&this._objects[s].visible&&this._objects[s].selectable&&this.containsPoint(t,this._objects[s])){if(!this.perPixelTargetFind&&!this._objects[s].perPixelTargetFind){i=this._objects[s],this.relatedTarget=i;break}o[o.length]=this._objects[s]}for(var a=0,l=o.length;a<l;a++){if(n=this.getPointer(t),!this.isTargetTransparent(o[a],n.x,n.y)){i=o[a],this.relatedTarget=i;break}}return i}},getPointer:function(t){var e=a(t,this.upperCanvasEl);return{x:e.x-this._offset.left,y:e.y-this._offset.top}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,i=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0}),t.width=e,t.height=i,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},setActiveObject:function(t,e){return this._activeObject&&this._activeObject.set("active",!1),(this._activeObject=t).set("active",!0),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},discardActiveObject:function(){return this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null,this},setActiveGroup:function(t){return(this._activeGroup=t)&&(t.canvas=this,t.set("active",!0)),this},getActiveGroup:function(){return this._activeGroup},discardActiveGroup:function(){var t=this.getActiveGroup();return t&&t.destroy(),this.setActiveGroup(null)},deactivateAll:function(){for(var t=this.getObjects(),e=0,i=t.length;e<i;e++)t[e].set("active",!1);return this.discardActiveGroup(),this.discardActiveObject(),this},deactivateAllWithDispatch:function(){var t=this.getActiveGroup()||this.getActiveObject();return t&&this.fire("before:selection:cleared",{target:t}),this.deactivateAll(),t&&this.fire("selection:cleared"),this},drawControls:function(t){var e=this.getActiveGroup();if(e)t.save(),fabric.Group.prototype.transform.call(e,t),e.drawBorders(t).drawControls(t),t.restore();else for(var i=0,n=this._objects.length;i<n;++i)this._objects[i]&&this._objects[i].active&&(t.save(),fabric.Object.prototype.transform.call(this._objects[i],t),this._objects[i].drawBorders(t).drawControls(t),t.restore(),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[i])}}),fabric.StaticCanvas)"prototype"!==t&&(fabric.Canvas[t]=fabric.StaticCanvas[t]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var s=["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],a={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,i=fabric.util.removeListener,c=fabric.util.getPointer;fabric.util.object.extend(fabric.Canvas.prototype,{_initEvents:function(){var i=this;this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=function(t,e){i.__onTransformGesture(t,e)},e(fabric.window,"resize",this._onResize),fabric.isTouchSupported?(e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),void 0!==Event&&"add"in Event&&Event.add(this.upperCanvasEl,"gesture",this._onGesture)):(e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove))},_onMouseDown:function(t){this.__onMouseDown(t),!fabric.isTouchSupported&&e(fabric.document,"mouseup",this._onMouseUp),fabric.isTouchSupported&&e(fabric.document,"touchend",this._onMouseUp),!fabric.isTouchSupported&&e(fabric.document,"mousemove",this._onMouseMove),fabric.isTouchSupported&&e(fabric.document,"touchmove",this._onMouseMove),!fabric.isTouchSupported&&i(this.upperCanvasEl,"mousemove",this._onMouseMove),fabric.isTouchSupported&&i(this.upperCanvasEl,"touchmove",this._onMouseMove)},_onMouseUp:function(t){this.__onMouseUp(t),!fabric.isTouchSupported&&i(fabric.document,"mouseup",this._onMouseUp),fabric.isTouchSupported&&i(fabric.document,"touchend",this._onMouseUp),!fabric.isTouchSupported&&i(fabric.document,"mousemove",this._onMouseMove),fabric.isTouchSupported&&i(fabric.document,"touchmove",this._onMouseMove),!fabric.isTouchSupported&&e(this.upperCanvasEl,"mousemove",this._onMouseMove),fabric.isTouchSupported&&e(this.upperCanvasEl,"touchmove",this._onMouseMove)},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var i=this.getActiveGroup()||this.getActiveObject();return t&&(t.isMoving||t!==i)||!t&&i||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y)},__onMouseUp:function(t){var e,i,n;if(this.isDrawingMode&&this._isCurrentlyDrawing)return this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),void this.fire("mouse:up",{e:t});if(this._currentTransform){var r=this._currentTransform;if((e=r.target)._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._previousOriginX&&this._previousOriginY){var o=e.translateToOriginPoint(e.getCenterPoint(),this._previousOriginX,this._previousOriginY);e.originX=this._previousOriginX,e.originY=this._previousOriginY,e.left=o.x,e.top=o.y,this._previousOriginX=null,this._previousOriginY=null}}else i=this.getPointer(t);n=this._shouldRender(e,i),this.selection&&this._groupSelector&&this._findSelectedObjects(t);var s=this.getActiveGroup();s&&(s.setObjectsCoords(),s.isMoving=!1,this._setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null,e&&(e.isMoving=!1),n&&this.renderAll(),this._setCursorFromEvent(t,e);var a=this;setTimeout(function(){a._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject().renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop),this.freeDrawingBrush.onMouseDown(this.getPointer(t)),this.fire("mouse:down",{e:t})},__onMouseDown:function(t){if(("which"in t?1===t.which:1===t.button)||fabric.isTouchSupported)if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(!this._currentTransform){var e,i,n=this.findTarget(t),r=this.getPointer(t);this._previousPointer=r,i=this._shouldRender(n,r),this._shouldClearSelection(t,n)?(this.selection&&(this._groupSelector={ex:r.x,ey:r.y,top:0,left:0}),this.deactivateAllWithDispatch(),n&&n.selectable&&this.setActiveObject(n,t)):this._shouldHandleGroupLogic(t,n)?(this._handleGroupLogic(t,n),n=this.getActiveGroup()):(this.stateful&&n.saveState(),(e=n._findTargetCorner(t,this._offset))&&this.onBeforeScaleRotate(n),n!==this.getActiveGroup()&&n!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(n,t)),this._setupCurrentTransform(t,n)),i&&this.renderAll(),this.fire("mouse:down",{target:n,e:t}),n&&n.fire("mousedown",{e:t}),"mtr"===e&&n.centerTransform&&this._setOriginToCenter(n)}},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},__onMouseMove:function(t){var e,i;if(this.isDrawingMode)return this._isCurrentlyDrawing&&(i=this.getPointer(t),this.freeDrawingBrush.onMouseMove(i)),this.upperCanvasEl.style.cursor=this.freeDrawingCursor,void this.fire("mouse:move",{e:t});var n=this._groupSelector;if(n)i=c(t,this.upperCanvasEl),n.left=i.x-this._offset.left-n.ex,n.top=i.y-this._offset.top-n.ey,this.renderTop();else if(this._currentTransform){var r=(i=c(t,this.upperCanvasEl)).x,o=i.y,s=!1,a=this._currentTransform;(e=a.target).isMoving=!0,"scale"!==a.action&&"scaleX"!==a.action&&"scaleY"!==a.action||(!t.altKey||"center"===a.originX&&"center"===a.originY)&&(t.altKey||"center"!==a.originX||"center"!==a.originY)||(this._resetCurrentTransform(t),s=!0),"rotate"===a.action?(this._rotateObject(r,o),this.fire("object:rotating",{target:e,e:t}),e.fire("rotating",{e:t})):"scale"===a.action?(!t.shiftKey&&!this.uniScaleTransform||e.get("lockUniScaling")?(s||"scale"!==a.currentAction||this._resetCurrentTransform(t),a.currentAction="scaleEqually",this._scaleObject(r,o,"equally")):(a.currentAction="scale",this._scaleObject(r,o)),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):"scaleX"===a.action?(this._scaleObject(r,o,"x"),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):"scaleY"===a.action?(this._scaleObject(r,o,"y"),this.fire("object:scaling",{target:e,e:t}),e.fire("scaling",{e:t})):(this._translateObject(r,o),this.fire("object:moving",{target:e,e:t}),e.fire("moving",{e:t}),this._setCursor(this.moveCursor)),this.renderAll()}else{var l=this.upperCanvasEl.style;!(e=this.findTarget(t))||e&&!e.selectable?l.cursor=this.defaultCursor:this._setCursorFromEvent(t,e)}this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})},_setCursorFromEvent:function(t,e){var i=this.upperCanvasEl.style;if(!e)return i.cursor=this.defaultCursor,!1;var n=this.getActiveGroup(),r=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(t,this._offset);if(r)if(r in a){var o=Math.round(e.getAngle()%360/45);o<0&&(o+=8),o+=a[r],o%=8,i.cursor=s[o]}else{if("mtr"!==r||!e.hasRotatingPoint)return i.cursor=this.defaultCursor,!1;i.cursor=this.rotationCursor}else i.cursor=e.hoverCursor||this.hoverCursor;return!0}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,n=t.multiplier||1,r={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==n?this.__toDataURLWithMultiplier(e,i,r,n):this.__toDataURL(e,i,r)},__toDataURL:function(t,e,i){this.renderAll(!0);var n=this.upperCanvasEl||this.lowerCanvasEl,r=this.__getCroppedCanvas(n,i);"jpg"===t&&(t="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||n).toDataURL("image/"+t,e):(r||n).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),r&&(r=null),o},__getCroppedCanvas:function(t,e){var i,n;return("left"in e||"top"in e||"width"in e||"height"in e)&&(n=(i=fabric.util.createCanvasElement()).getContext("2d"),i.width=e.width||this.width,i.height=e.height||this.height,n.drawImage(t,-e.left||0,-e.top||0)),i},__toDataURLWithMultiplier:function(t,e,i,n){var r=this.getWidth(),o=this.getHeight(),s=r*n,a=o*n,l=this.getActiveObject(),c=this.getActiveGroup(),h=this.contextTop||this.contextContainer;this.setWidth(s).setHeight(a),h.scale(n,n),i.left&&(i.left*=n),i.top&&(i.top*=n),i.width&&(i.width*=n),i.height&&(i.height*=n),c?this._tempRemoveBordersControlsFromGroup(c):l&&this.deactivateAll&&this.deactivateAll(),this.width=r,this.height=o,this.renderAll(!0);var d=this.__toDataURL(t,e,i);return h.scale(1/n,1/n),this.setWidth(r).setHeight(o),c?this._restoreBordersControlsOnGroup(c):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),d},toDataURLWithMultiplier:function(t,e,i){return this.toDataURL({format:t,multiplier:e,quality:i})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,i){return this.loadFromJSON(t,e,i)},loadFromJSON:function(t,e,i){if(t){var n="string"==typeof t?JSON.parse(t):t;this.clear();var r=this;return this._enlivenObjects(n.objects,function(){r._setBgOverlayImages(n,e)},i),this}},_setBgOverlayImages:function(t,e){var i,n,r,o=this,s=function(){e&&n&&r&&i&&e()};t.backgroundImage?this.setBackgroundImage(t.backgroundImage,function(){o.backgroundImageOpacity=t.backgroundImageOpacity,o.backgroundImageStretch=t.backgroundImageStretch,o.renderAll(),n=!0,s()}):n=!0,t.overlayImage?this.setOverlayImage(t.overlayImage,function(){o.overlayImageLeft=t.overlayImageLeft||0,o.overlayImageTop=t.overlayImageTop||0,o.renderAll(),r=!0,s()}):r=!0,t.background?this.setBackgroundColor(t.background,function(){o.renderAll(),i=!0,s()}):i=!0,t.backgroundImage||t.overlayImage||t.background||e&&e()},_enlivenObjects:function(t,e,i){var n=this;0===t.length&&e&&e();var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){n.insertAt(t,e,!0)}),n.renderOnAddRemove=r,e&&e()},null,i)},_toDataURL:function(e,i){this.clone(function(t){i(t.toDataURL(e))})},_toDataURLWithMultiplier:function(e,i,n){this.clone(function(t){n(t.toDataURLWithMultiplier(e,i))})},clone:function(e){var i=JSON.stringify(this);this.cloneWithoutData(function(t){t.loadFromJSON(i,function(){e&&e(t)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var i=new fabric.Canvas(e);i.clipTo=this.clipTo,this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,function(){i.renderAll(),t&&t(i)}),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(){var i=fabric.util.degreesToRadians,n=fabric.util.radiansToDegrees;fabric.util.object.extend(fabric.Canvas.prototype,{__onTransformGesture:function(t,e){if(!this.isDrawingMode&&2===t.touches.length&&"gesture"===e.gesture){var i=this.findTarget(t);void 0!==i&&(this.onBeforeScaleRotate(i),this._rotateObjectByAngle(e.rotation),this._scaleObjectBy(e.scale)),this.fire("touch:gesture",{target:i,e:t,self:e})}},_scaleObjectBy:function(t,e){var i=this._currentTransform,n=i.target,r=n.get("lockScalingX"),o=n.get("lockScalingY");r&&o||(n._scaling=!0,e?"x"!==e||n.get("lockUniScaling")?"y"!==e||n.get("lockUniScaling")||o||n.set("scaleY",i.scaleY*t):r||n.set("scaleX",i.scaleX*t):(r||n.set("scaleX",i.scaleX*t),o||n.set("scaleY",i.scaleY*t)))},_rotateObjectByAngle:function(t){var e=this._currentTransform;e.target.get("lockRotation")||(e.target.angle=n(i(t)+e.theta))}})}(),function(t){"use strict";var s=t.fabric||(t.fabric={}),e=s.util.object.extend,n=s.util.toFixed,i=s.util.string.capitalize,r=s.util.degreesToRadians,o=s.StaticCanvas.supports("setLineDash");s.Object||(s.Object=s.util.createClass({type:"object",originX:"center",originY:"center",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centerTransform:!1,fill:"rgb(0,0,0)",fillRule:"source-over",overlayFill:null,stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule overlayFill shadow clipTo visible".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof s.Gradient||this.set("fill",new s.Gradient(t.fill))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof s.Pattern||this.set("fill",new s.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof s.Pattern||this.set("stroke",new s.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var e=s.util.getFunctionBody(t.clipTo);void 0!==e&&(this.clipTo=new Function("ctx",e))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){t.globalAlpha=this.opacity;var i=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(i.x,i.y),t.rotate(r(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var e=s.Object.NUM_FRACTION_DIGITS,i={type:this.type,originX:this.originX,originY:this.originY,left:n(this.left,e),top:n(this.top,e),width:n(this.width,e),height:n(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,overlayFill:this.overlayFill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,e),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,e),scaleX:n(this.scaleX,e),scaleY:n(this.scaleY,e),angle:n(this.getAngle(),e),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo)};return this.includeDefaultValues||(i=this._removeDefaultValues(i)),s.util.populateWithProperties(this,i,t),i},toDatalessObject:function(t){return this.toObject(t)},getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",i=this.strokeWidth?this.strokeWidth:"0",n=this.strokeDashArray?this.strokeDashArray.join(" "):"",r=this.strokeLineCap?this.strokeLineCap:"butt",o=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",a=void 0!==this.opacity?this.opacity:"1",l=this.visible?"":" visibility: hidden;";return["stroke: ",e,"; ","stroke-width: ",i,"; ","stroke-dasharray: ",n,"; ","stroke-linecap: ",r,"; ","stroke-linejoin: ",o,"; ","stroke-miterlimit: ",s,"; ","fill: ",t,"; ","opacity: ",a,";",this.shadow&&"text"!==this.type?"filter: url(#SVGID_"+this.shadow.id+");":"",l].join("")},getSvgTransform:function(){var t=this.getAngle(),e=this.getCenterPoint(),i=s.Object.NUM_FRACTION_DIGITS;return["translate("+n(e.x,i)+" "+n(e.y,i)+")",0!==t?" rotate("+n(t,i)+")":"",1===this.scaleX&&1===this.scaleY?"":" scale("+n(this.scaleX,i)+" "+n(this.scaleY,i)+")",this.flipX?"matrix(-1 0 0 1 0 0) ":"",this.flipY?"matrix(1 0 0 -1 0 0)":""].join("")},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t},_removeDefaultValues:function(e){return this.stateProperties.forEach(function(t){e[t]===this.constructor.prototype[t]&&delete e[t]},this),e},toString:function(){return"#<fabric."+i(this.type)+">"},get:function(t){return this[t]},set:function(t,e){if("object"==typeof t)for(var i in t)this._set(i,t[i]);else"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e);return this},_set:function(t,e){return("scaleX"===t||"scaleY"===t)&&(e=this._constrainScale(e)),"scaleX"===t&&e<0?(this.flipX=!this.flipX,e*=-1):"scaleY"===t&&e<0?(this.flipY=!this.flipY,e*=-1):"width"===t||"height"===t?this.minScaleLimit=n(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!e||e instanceof s.Shadow||(e=new s.Shadow(e)),this[t]=e,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},render:function(t,e){if(0!==this.width&&0!==this.height&&this.visible){t.save();var i=this.transformMatrix;i&&!this.group&&t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),e||this.transform(t),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),this.overlayFill?t.fillStyle=this.overlayFill:this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),i&&this.group&&(t.translate(-this.group.width/2,-this.group.height/2),t.transform(i[0],i[1],i[2],i[3],i[4],i[5])),this._setShadow(t),this.clipTo&&s.util.clipContext(this,t),this._render(t,e),this.clipTo&&t.restore(),this._removeShadow(t),this.active&&!e&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_setShadow:function(t){this.shadow&&(t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY)},_removeShadow:function(t){t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_renderFill:function(t){this.fill&&(this.fill.toLive&&(t.save(),t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0)),t.fill(),this.fill.toLive&&t.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t))},_renderStroke:function(t){this.stroke&&(t.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke()):this._stroke?this._stroke(t):t.stroke(),this._removeShadow(t),t.restore())},clone:function(t,e){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(e),t):new s.Object(this.toObject(e))},cloneAsImage:function(e){var t=this.toDataURL();return s.util.loadImage(t,function(t){e&&e(new s.Image(t))}),this},toDataURL:function(t){t||(t={});var e=s.util.createCanvasElement(),i=this.getBoundingRect();e.width=i.width,e.height=i.height,s.util.wrapElement(e,"div");var n=new s.Canvas(e);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(n.backgroundColor="#fff");var r={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new s.Point(e.width/2,e.height/2),"center","center"),n.add(this);var o=n.toDataURL(t);return this.set(r).setCoords(),n.dispose(),n=null,o},isType:function(t){return this.type===t},toGrayscale:function(){var t=this.get("fill");return t&&this.set("overlayFill",new s.Color(t).toGrayscale().toRgb()),this},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,e){e||(e={});var i={colorStops:[]};for(var n in i.type=e.type||(e.r1||e.r2?"radial":"linear"),i.coords={x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},(e.r1||e.r2)&&(i.coords.r1=e.r1,i.coords.r2=e.r2),e.colorStops){var r=new s.Color(e.colorStops[n]);i.colorStops.push({offset:n,color:r.toRgb(),opacity:r.getAlpha()})}return this.set(t,s.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new s.Pattern(t))},setShadow:function(t){return this.set("shadow",new s.Shadow(t))},setColor:function(t){return this.set("fill",t),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.centerH().centerV()},remove:function(){return this.canvas.remove(this)},sendToBack:function(){return this.group?s.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?s.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?s.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?s.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?s.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),s.util.createAccessors(s.Object),s.Object.prototype.rotate=s.Object.prototype.setAngle,e(s.Object.prototype,s.Observable),s.Object.NUM_FRACTION_DIGITS=2,s.Object.__uid=0)}(void 0!==exports?exports:this),function(){var l=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(t,e,i){var n=t.x,r=t.y;return"left"===e?n=t.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===e&&(n=t.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===i?r=t.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i&&(r=t.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(n,r),t,l(this.angle))},translateToOriginPoint:function(t,e,i){var n=t.x,r=t.y;return"left"===e?n=t.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===e&&(n=t.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===i?r=t.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i&&(r=t.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(n,r),t,l(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var n,r,o=this.getCenterPoint();return void 0!==e&&void 0!==i?(n="left"===e?o.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===e?o.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:o.x,r="top"===i?o.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i?o.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:o.y):(n=this.left,r=this.top),fabric.util.rotatePoint(new fabric.Point(t.x,t.y),o,-l(this.angle)).subtractEquals(new fabric.Point(n,r))},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e=l(this.angle),i=this.getWidth()/2,n=Math.cos(e)*i,r=Math.sin(e)*i,o=this.getWidth(),s=Math.cos(e)*o,a=Math.sin(e)*o;"center"===this.originX&&"left"===t||"right"===this.originX&&"center"===t?(this.left-=n,this.top-=r):"left"===this.originX&&"center"===t||"center"===this.originX&&"right"===t?(this.left+=n,this.top+=r):"left"===this.originX&&"right"===t?(this.left+=s,this.top+=a):"right"===this.originX&&"left"===t&&(this.left-=s,this.top-=a),this.setCoords(),this.originX=t},_getLeftTopCoords:function(){var t=l(this.angle),e=this.getWidth()/2,i=Math.cos(t)*e,n=Math.sin(t)*e,r=this.left,o=this.top;return"center"!==this.originX&&"right"!==this.originX||(r-=i),"center"!==this.originY&&"bottom"!==this.originY||(o-=n),{x:r,y:o}}})}(),function(){var v=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var i=this.oCoords,n=new fabric.Point(i.tl.x,i.tl.y),r=new fabric.Point(i.tr.x,i.tr.y),o=new fabric.Point(i.bl.x,i.bl.y),s=new fabric.Point(i.br.x,i.br.y);return"Intersection"===fabric.Intersection.intersectPolygonRectangle([n,r,s,o],t,e).status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var i=e(this.oCoords),n=e(t.oCoords);return"Intersection"===fabric.Intersection.intersectPolygonPolygon([i.tl,i.tr,i.br,i.bl],[n.tl,n.tr,n.br,n.bl]).status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),i=new fabric.Point(e.left,e.top),n=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(i,n)},isContainedWithinRect:function(t,e){var i=this.getBoundingRect();return i.left>t.x&&i.left+i.width<e.x&&i.top>t.y&&i.top+i.height<e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords),i=this._findCrossPoints(t,e);return 0!==i&&i%2==1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,n,r,o,s=0;for(var a in e)if(!((o=e[a]).o.y<t.y&&o.d.y<t.y||o.o.y>=t.y&&o.d.y>=t.y||(o.o.x===o.d.x&&o.o.x>=t.x?(r=o.o.x,t.y):(0,i=(o.d.y-o.o.y)/(o.d.x-o.o.x),(n=t.y-0*t.x)+0*(r=-(n-(o.o.y-i*o.o.x))/(0-i))),r>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),i=fabric.util.array.max(t),n=Math.abs(e-i),r=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(r),s=fabric.util.array.max(r);return{left:e,top:o,width:n,height:Math.abs(o-s)}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return(t=this._constrainScale(t))<0&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var t=1<this.strokeWidth?this.strokeWidth:0,e=this.padding,i=v(this.angle);this.currentWidth=(this.width+t)*this.scaleX+2*e,this.currentHeight=(this.height+t)*this.scaleY+2*e,this.currentWidth<0&&(this.currentWidth=Math.abs(this.currentWidth));var n=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),r=Math.atan(isFinite(this.currentHeight/this.currentWidth)?this.currentHeight/this.currentWidth:0),o=Math.cos(r+i)*n,s=Math.sin(r+i)*n,a=Math.sin(i),l=Math.cos(i),c=this.getCenterPoint(),h={x:c.x-o,y:c.y-s},d={x:h.x+this.currentWidth*l,y:h.y+this.currentWidth*a},u={x:d.x-this.currentHeight*a,y:d.y+this.currentHeight*l},p={x:h.x-this.currentHeight*a,y:h.y+this.currentHeight*l},f={x:h.x-this.currentHeight/2*a,y:h.y+this.currentHeight/2*l},g={x:h.x+this.currentWidth/2*l,y:h.y+this.currentWidth/2*a},m={x:d.x-this.currentHeight/2*a,y:d.y+this.currentHeight/2*l},y={x:p.x+this.currentWidth/2*l,y:p.y+this.currentWidth/2*a},_={x:g.x,y:g.y};return this.oCoords={tl:h,tr:d,br:u,bl:p,ml:f,mt:g,mr:m,mb:y,mtr:_},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var l=fabric.util.getPointer,c=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||!this.active)return!1;var i,n,r=l(t,this.canvas.upperCanvasEl),o=r.x-e.left,s=r.y-e.top;for(var a in this.oCoords)if(("mtr"!==a||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==a&&"mr"!==a&&"mb"!==a&&"ml"!==a)&&(n=this._getImageLines(this.oCoords[a].corner),0!==(i=this._findCrossPoints({x:o,y:s},n))&&i%2==1))return this.__corner=a;return!1},_setCornerCoords:function(){var t=this.oCoords,e=c(this.angle),i=c(45-this.angle),n=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,r=n*Math.cos(i),o=n*Math.sin(i),s=Math.sin(e),a=Math.cos(e);t.tl.corner={tl:{x:t.tl.x-o,y:t.tl.y-r},tr:{x:t.tl.x+r,y:t.tl.y-o},bl:{x:t.tl.x-r,y:t.tl.y+o},br:{x:t.tl.x+o,y:t.tl.y+r}},t.tr.corner={tl:{x:t.tr.x-o,y:t.tr.y-r},tr:{x:t.tr.x+r,y:t.tr.y-o},br:{x:t.tr.x+o,y:t.tr.y+r},bl:{x:t.tr.x-r,y:t.tr.y+o}},t.bl.corner={tl:{x:t.bl.x-o,y:t.bl.y-r},bl:{x:t.bl.x-r,y:t.bl.y+o},br:{x:t.bl.x+o,y:t.bl.y+r},tr:{x:t.bl.x+r,y:t.bl.y-o}},t.br.corner={tr:{x:t.br.x+r,y:t.br.y-o},bl:{x:t.br.x-r,y:t.br.y+o},br:{x:t.br.x+o,y:t.br.y+r},tl:{x:t.br.x-o,y:t.br.y-r}},t.ml.corner={tl:{x:t.ml.x-o,y:t.ml.y-r},tr:{x:t.ml.x+r,y:t.ml.y-o},bl:{x:t.ml.x-r,y:t.ml.y+o},br:{x:t.ml.x+o,y:t.ml.y+r}},t.mt.corner={tl:{x:t.mt.x-o,y:t.mt.y-r},tr:{x:t.mt.x+r,y:t.mt.y-o},bl:{x:t.mt.x-r,y:t.mt.y+o},br:{x:t.mt.x+o,y:t.mt.y+r}},t.mr.corner={tl:{x:t.mr.x-o,y:t.mr.y-r},tr:{x:t.mr.x+r,y:t.mr.y-o},bl:{x:t.mr.x-r,y:t.mr.y+o},br:{x:t.mr.x+o,y:t.mr.y+r}},t.mb.corner={tl:{x:t.mb.x-o,y:t.mb.y-r},tr:{x:t.mb.x+r,y:t.mb.y-o},bl:{x:t.mb.x-r,y:t.mb.y+o},br:{x:t.mb.x+o,y:t.mb.y+r}},t.mtr.corner={tl:{x:t.mtr.x-o+s*this.rotatingPointOffset,y:t.mtr.y-r-a*this.rotatingPointOffset},tr:{x:t.mtr.x+r+s*this.rotatingPointOffset,y:t.mtr.y-o-a*this.rotatingPointOffset},bl:{x:t.mtr.x-r+s*this.rotatingPointOffset,y:t.mtr.y+o-a*this.rotatingPointOffset},br:{x:t.mtr.x+o+s*this.rotatingPointOffset,y:t.mtr.y+r-a*this.rotatingPointOffset}}},drawBorders:function(t){if(!this.hasBorders)return this;var e=this.padding,i=2*e,n=2*~~(this.strokeWidth/2);t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor;var r=1/this._constrainScale(this.scaleX),o=1/this._constrainScale(this.scaleY);t.lineWidth=1/this.borderScaleFactor,t.scale(r,o);var s=this.getWidth(),a=this.getHeight();if(t.strokeRect(~~(-s/2-e-n/2*this.scaleX)-.5,~~(-a/2-e-n/2*this.scaleY)-.5,1+~~(s+i+n*this.scaleX),1+~~(a+i+n*this.scaleY)),this.hasRotatingPoint&&!this.get("lockRotation")&&this.hasControls){var l=(this.flipY?a+n*this.scaleY+2*e:-a-n*this.scaleY-2*e)/2;t.beginPath(),t.moveTo(0,l),t.lineTo(0,l+(this.flipY?this.rotatingPointOffset:-this.rotatingPointOffset)),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e,i,n=this.cornerSize,r=n/2,o=~~(this.strokeWidth/2),s=-this.width/2,a=-this.height/2,l=n/this.scaleX,c=n/this.scaleY,h=this.padding/this.scaleX,d=this.padding/this.scaleY,u=r/this.scaleY,p=r/this.scaleX,f=(r-n)/this.scaleX,g=(r-n)/this.scaleY,m=this.height,y=this.width,_=this.transparentCorners?"strokeRect":"fillRect",v=this.transparentCorners,b="undefined"!=typeof G_vmlCanvasManager;return t.save(),t.lineWidth=1/Math.max(this.scaleX,this.scaleY),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,e=s-p-o-h,i=a-u-o-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y-p+o+h,i=a-u-o-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s-p-o-h,i=a+m+g+o+d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y+f+o+h,i=a+m+g+o+d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),this.get("lockUniScaling")||(e=s+y/2-p,i=a-u-o-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y/2-p,i=a+m+g+o+d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s+y+f+o+h,i=a+m/2-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c),e=s-p-o-h,i=a+m/2-u,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c)),this.hasRotatingPoint&&(e=s+y/2-p,i=this.flipY?a+m+this.rotatingPointOffset/this.scaleY-c/2+o+d:a-this.rotatingPointOffset/this.scaleY-c/2-o-d,b||v||t.clearRect(e,i,l,c),t[_](e,i,l,c)),t.restore(),this}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(t){e.set("left",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),n()}}),this},fxCenterObjectV:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(t){e.set("top",t),o.renderAll(),r()},onComplete:function(){e.setCoords(),n()}}),this},fxRemove:function(e,t){var i=function(){},n=(t=t||{}).onComplete||i,r=t.onChange||i,o=this;return fabric.util.animate({startValue:e.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){e.set("active",!1)},onChange:function(t){e.set("opacity",t),o.renderAll(),r()},onComplete:function(){o.remove(e),n()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(e,t,i,n){var r,o=this;t=t.toString(),i=i?fabric.util.object.clone(i):{},~e.indexOf(".")&&(r=e.split("."));var s=r?this.get(r[0])[r[1]]:this.get(e);"from"in i||(i.from=s),t=~t.indexOf("=")?s+parseFloat(t.replace("=","")):parseFloat(t),fabric.util.animate({startValue:i.from,endValue:t,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(o)},onChange:function(t){r?o[r[0]][r[1]]=t:o.set(e,t),n||i.onChange&&i.onChange()},onComplete:function(){n||(o.setCoords(),i.onComplete&&i.onComplete())}})}}),function(t){"use strict";var o=t.fabric||(t.fabric={}),r=o.util.object.extend,i={x1:1,x2:1,y1:1,y2:1},s=o.StaticCanvas.supports("setLineDash");o.Line?o.warn("fabric.Line is already defined"):(o.Line=o.util.createClass(o.Object,{type:"line",initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.set("width",Math.abs(this.x2-this.x1)||1),this.set("height",Math.abs(this.y2-this.y1)||1),this.set("left","left"in t?t.left:Math.min(this.x1,this.x2)+this.width/2),this.set("top","top"in t?t.top:Math.min(this.y1,this.y2)+this.height/2)},_set:function(t,e){return this[t]=e,t in i&&this._setWidthHeight(),this},_render:function(t){if(t.beginPath(),this.group&&"group"!==this.group.type&&!this.transformMatrix&&t.translate(-this.group.width/2+this.left,-this.group.height/2+this.top),!this.strokeDashArray||this.strokeDashArray&&s){var e=this.x1<=this.x2?-1:1,i=this.y1<=this.y2?-1:1;t.moveTo(1===this.width?0:e*this.width/2,1===this.height?0:i*this.height/2),t.lineTo(1===this.width?0:-1*e*this.width/2,1===this.height?0:-1*i*this.height/2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var e=this.x1<=this.x2?-1:1,i=this.y1<=this.y2?-1:1,n=1===this.width?0:e*this.width/2,r=1===this.height?0:i*this.height/2;t.beginPath(),o.util.drawDashedLine(t,n,r,-n,-r,this.strokeDashArray),t.closePath()},toObject:function(t){return r(this.callSuper("toObject",t),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<line ",'x1="',this.get("x1"),'" y1="',this.get("y1"),'" x2="',this.get("x2"),'" y2="',this.get("y2"),'" style="',this.getSvgStyles(),'"/>'),t.join("")},complexity:function(){return 1}}),o.Line.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),o.Line.fromElement=function(t,e){var i=o.parseAttributes(t,o.Line.ATTRIBUTE_NAMES),n=[i.x1||0,i.y1||0,i.x2||0,i.y2||0];return new o.Line(n,r(i,e))},o.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new o.Line(e,t)})}(void 0!==exports?exports:this),function(t){"use strict";var o=t.fabric||(t.fabric={}),i=2*Math.PI,s=o.util.object.extend;o.Circle?o.warn("fabric.Circle is already defined."):(o.Circle=o.util.createClass(o.Object,{type:"circle",initialize:function(t){t=t||{},this.set("radius",t.radius||0),this.callSuper("initialize",t)},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return s(this.callSuper("toObject",t),{radius:this.get("radius")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<circle ",'cx="0" cy="0" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},_render:function(t,e){t.beginPath(),t.globalAlpha=this.group?t.globalAlpha*this.opacity:this.opacity,t.arc(e?this.left:0,e?this.top:0,this.radius,0,i,!1),t.closePath(),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),o.Circle.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),o.Circle.fromElement=function(t,e){e||(e={});var i,n=o.parseAttributes(t,o.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=n)&&0<i.radius))throw new Error("value of `r` attribute is required and can not be negative");"left"in n&&(n.left-=e.width/2||0),"top"in n&&(n.top-=e.height/2||0);var r=new o.Circle(s(n,e));return r.cx=parseFloat(t.getAttribute("cx"))||0,r.cy=parseFloat(t.getAttribute("cy"))||0,r},o.Circle.fromObject=function(t){return new o.Circle(t)})}(void 0!==exports?exports:this),function(t){"use strict";var n=t.fabric||(t.fabric={});n.Triangle?n.warn("fabric.Triangle is already defined"):(n.Triangle=n.util.createClass(n.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),n.util.drawDashedLine(t,-e,i,0,-i,this.strokeDashArray),n.util.drawDashedLine(t,0,-i,e,i,this.strokeDashArray),n.util.drawDashedLine(t,e,i,-e,i,this.strokeDashArray),t.closePath()},toSVG:function(){var t=this._createBaseSVGMarkup(),e=this.width/2,i=this.height/2,n=[-e+" "+i,"0 "+-i,e+" "+i].join(",");return t.push("<polygon ",'points="',n,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},complexity:function(){return 1}}),n.Triangle.fromObject=function(t){return new n.Triangle(t)})}(void 0!==exports?exports:this),function(t){"use strict";var s=t.fabric||(t.fabric={}),i=2*Math.PI,a=s.util.object.extend;s.Ellipse?s.warn("fabric.Ellipse is already defined."):(s.Ellipse=s.util.createClass(s.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0),this.set("width",2*this.get("rx")),this.set("height",2*this.get("ry"))},toObject:function(t){return a(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<ellipse ",'rx="',this.get("rx"),'" ry="',this.get("ry"),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},render:function(t,e){if(0!==this.rx&&0!==this.ry)return this.callSuper("render",t,e)},_render:function(t,e){t.beginPath(),t.save(),t.globalAlpha=this.group?t.globalAlpha*this.opacity:this.opacity,this.transformMatrix&&this.group&&t.translate(this.cx,this.cy),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left:0,e?this.top:0,this.rx,0,i,!1),this._renderFill(t),this._renderStroke(t),t.restore()},complexity:function(){return 1}}),s.Ellipse.ATTRIBUTE_NAMES=s.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),s.Ellipse.fromElement=function(t,e){e||(e={});var i=s.parseAttributes(t,s.Ellipse.ATTRIBUTE_NAMES),n=i.left,r=i.top;"left"in i&&(i.left-=e.width/2||0),"top"in i&&(i.top-=e.height/2||0);var o=new s.Ellipse(a(i,e));return o.cx=n||0,o.cy=r||0,o},s.Ellipse.fromObject=function(t){return new s.Ellipse(t)})}(void 0!==exports?exports:this),function(t){"use strict";var o=t.fabric||(t.fabric={}),s=o.util.object.extend;if(o.Rect)console.warn("fabric.Rect is already defined");else{var e=o.Object.prototype.stateProperties.concat();e.push("rx","ry"),o.Rect=o.util.createClass(o.Object,{stateProperties:e,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy(),this.x=t.x||0,this.y=t.y||0},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx||0,i=this.ry||0,n=-this.width/2,r=-this.height/2,o=this.width,s=this.height,a=this.group&&"group"!==this.group.type;t.beginPath(),t.globalAlpha=a?t.globalAlpha*this.opacity:this.opacity,this.transformMatrix&&a&&t.translate(this.width/2+this.x,this.height/2+this.y),!this.transformMatrix&&a&&t.translate(-this.group.width/2+this.width/2+this.x,-this.group.height/2+this.height/2+this.y);var l=0!==e||0!==i;t.moveTo(n+e,r),t.lineTo(n+o-e,r),l&&t.quadraticCurveTo(n+o,r,n+o,r+i,n+o,r+i),t.lineTo(n+o,r+s-i),l&&t.quadraticCurveTo(n+o,r+s,n+o-e,r+s,n+o-e,r+s),t.lineTo(n+e,r+s),l&&t.quadraticCurveTo(n,r+s,n,r+s-i,n,r+s-i),t.lineTo(n,r+i),l&&t.quadraticCurveTo(n,r,n+e,r,n+e,r),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.beginPath(),o.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),o.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),o.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),o.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath()},_normalizeLeftTopProperties:function(t){return"left"in t&&this.set("left",t.left+this.getWidth()/2),this.set("x",t.left||0),"top"in t&&this.set("top",t.top+this.getHeight()/2),this.set("y",t.top||0),this},toObject:function(t){return s(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0,x:this.get("x"),y:this.get("y")})},toSVG:function(){var t=this._createBaseSVGMarkup();return t.push("<rect ",'x="',-1*this.width/2,'" y="',-1*this.height/2,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t.join("")},complexity:function(){return 1}}),o.Rect.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),o.Rect.fromElement=function(t,e){if(!t)return null;var i,n=o.parseAttributes(t,o.Rect.ATTRIBUTE_NAMES);(i=n).left=i.left||0,i.top=i.top||0,n=i;var r=new o.Rect(s(e?o.util.object.clone(e):{},n));return r._normalizeLeftTopProperties(n),r},o.Rect.fromObject=function(t){return new o.Rect(t)}}}(void 0!==exports?exports:this),function(t){"use strict";var l=t.fabric||(t.fabric={}),r=l.util.toFixed,c=l.util.array.min;l.Polyline?l.warn("fabric.Polyline is already defined"):(l.Polyline=l.util.createClass(l.Object,{type:"polyline",initialize:function(t,e,i){e=e||{},this.set("points",t),this.callSuper("initialize",e),this._calcDimensions(i)},_calcDimensions:function(t){return l.Polygon.prototype._calcDimensions.call(this,t)},toObject:function(t){return l.Polygon.prototype.toObject.call(this,t)},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),i=0,n=this.points.length;i<n;i++)t.push(r(this.points[i].x,2),",",r(this.points[i].y,2)," ");return e.push("<polyline ",'points="',t.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e.join("")},_render:function(t){var e;t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0,n=this.points.length;i<n;i++)e=this.points[i],t.lineTo(e.x,e.y);this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var e,i;t.beginPath();for(var n=0,r=this.points.length;n<r;n++)e=this.points[n],i=this.points[n+1]||e,l.util.drawDashedLine(t,e.x,e.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),l.Polyline.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat(),l.Polyline.fromElement=function(t,e){if(!t)return null;e||(e={});var i=l.parsePointsAttribute(t.getAttribute("points")),n=l.parseAttributes(t,l.Polyline.ATTRIBUTE_NAMES),r=c(i,"x"),o=c(i,"y");o=(r=r<0?r:0)<0?o:0;for(var s=0,a=i.length;s<a;s++)i[s].x-=e.width/2+r||0,i[s].y-=e.height/2+o||0;return new l.Polyline(i,l.util.object.extend(n,e),!0)},l.Polyline.fromObject=function(t){var e=t.points;return new l.Polyline(e,t,!0)})}(void 0!==exports?exports:this),function(t){"use strict";var l=t.fabric||(t.fabric={}),c=l.util.object.extend,h=l.util.array.min,d=l.util.array.max,r=l.util.toFixed;l.Polygon?l.warn("fabric.Polygon is already defined"):(l.Polygon=l.util.createClass(l.Object,{type:"polygon",initialize:function(t,e,i){e=e||{},this.points=t,this.callSuper("initialize",e),this._calcDimensions(i)},_calcDimensions:function(t){var e=this.points,i=h(e,"x"),n=h(e,"y"),r=d(e,"x"),o=d(e,"y");if(this.width=r-i||1,this.height=o-n||1,this.minX=i,this.minY=n,!t){var s=this.width/2+this.minX,a=this.height/2+this.minY;this.points.forEach(function(t){t.x-=s,t.y-=a},this)}},toObject:function(t){return c(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),i=0,n=this.points.length;i<n;i++)t.push(r(this.points[i].x,2),",",r(this.points[i].y,2)," ");return e.push("<polygon ",'points="',t.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),e.join("")},_render:function(t){var e;t.beginPath(),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0,n=this.points.length;i<n;i++)e=this.points[i],t.lineTo(e.x,e.y);this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t))},_renderDashedStroke:function(t){var e,i;t.beginPath();for(var n=0,r=this.points.length;n<r;n++)e=this.points[n],i=this.points[n+1]||this.points[0],l.util.drawDashedLine(t,e.x,e.y,i.x,i.y,this.strokeDashArray);t.closePath()},complexity:function(){return this.points.length}}),l.Polygon.ATTRIBUTE_NAMES=l.SHARED_ATTRIBUTES.concat(),l.Polygon.fromElement=function(t,e){if(!t)return null;e||(e={});var i=l.parsePointsAttribute(t.getAttribute("points")),n=l.parseAttributes(t,l.Polygon.ATTRIBUTE_NAMES),r=h(i,"x"),o=h(i,"y");o=(r=r<0?r:0)<0?o:0;for(var s=0,a=i.length;s<a;s++)i[s].x-=e.width/2+r||0,i[s].y-=e.height/2+o||0;return new l.Polygon(i,c(n,e),!0)},l.Polygon.fromObject=function(t){return new l.Polygon(t.points,t,!0)})}(void 0!==exports?exports:this),function(t){var m={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},o=t.fabric||(t.fabric={}),d=o.util.array.min,u=o.util.array.max,a=o.util.object.extend,n=Object.prototype.toString,g=o.util.drawArc;function p(t){return"H"===t[0]?t[1]:t[t.length-2]}function f(t){return"V"===t[0]?t[1]:t[t.length-1]}o.Path?o.warn("fabric.Path is already defined"):(o.Path=o.util.createClass(o.Object,{type:"path",initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw new Error("`path` argument is required");var i="[object Array]"===n.call(t);this.path=i?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(i||(this.path=this._parsePath()),this._initializePath(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_initializePath:function(t){var e="width"in t&&null!=t.width,i="height"in t&&null!=t.width,n="left"in t,r="top"in t,o=n?this.left:0,s=r?this.top:0;e&&i?(r||(this.top=this.height/2),n||(this.left=this.width/2)):(a(this,this._parseDimensions()),e&&(this.width=t.width),i&&(this.height=t.height)),this.pathOffset=this.pathOffset||this._calculatePathOffset(o,s)},_calculatePathOffset:function(t,e){return{x:this.left-t-this.width/2,y:this.top-e-this.height/2}},_render:function(t){for(var e,i,n,r,o,s=null,a=0,l=0,c=0,h=0,d=-(this.width/2+this.pathOffset.x),u=-(this.height/2+this.pathOffset.y),p=0,f=this.path.length;p<f;++p){switch((e=this.path[p])[0]){case"l":a+=e[1],l+=e[2],t.lineTo(a+d,l+u);break;case"L":a=e[1],l=e[2],t.lineTo(a+d,l+u);break;case"h":a+=e[1],t.lineTo(a+d,l+u);break;case"H":a=e[1],t.lineTo(a+d,l+u);break;case"v":l+=e[1],t.lineTo(a+d,l+u);break;case"V":l=e[1],t.lineTo(a+d,l+u);break;case"m":a+=e[1],l+=e[2],t[!s||"m"!==s[0]&&"M"!==s[0]?"moveTo":"lineTo"](a+d,l+u);break;case"M":a=e[1],l=e[2],t[!s||"m"!==s[0]&&"M"!==s[0]?"moveTo":"lineTo"](a+d,l+u);break;case"c":i=a+e[5],n=l+e[6],c=a+e[3],h=l+e[4],t.bezierCurveTo(a+e[1]+d,l+e[2]+u,c+d,h+u,i+d,n+u),a=i,l=n;break;case"C":a=e[5],l=e[6],c=e[3],h=e[4],t.bezierCurveTo(e[1]+d,e[2]+u,c+d,h+u,a+d,l+u);break;case"s":i=a+e[3],n=l+e[4],c=c?2*a-c:a,h=h?2*l-h:l,t.bezierCurveTo(c+d,h+u,a+e[1]+d,l+e[2]+u,i+d,n+u),c=a+e[1],h=l+e[2],a=i,l=n;break;case"S":i=e[3],n=e[4],c=2*a-c,h=2*l-h,t.bezierCurveTo(c+d,h+u,e[1]+d,e[2]+u,i+d,n+u),a=i,l=n,c=e[1],h=e[2];break;case"q":i=a+e[3],n=l+e[4],c=a+e[1],h=l+e[2],t.quadraticCurveTo(c+d,h+u,i+d,n+u),a=i,l=n;break;case"Q":i=e[3],n=e[4],t.quadraticCurveTo(e[1]+d,e[2]+u,i+d,n+u),a=i,l=n,c=e[1],h=e[2];break;case"t":i=a+e[1],n=l+e[2],null===s[0].match(/[QqTt]/)?(c=a,h=l):"t"===s[0]?(c=2*a-r,h=2*l-o):"q"===s[0]&&(c=2*a-c,h=2*l-h),r=c,o=h,t.quadraticCurveTo(c+d,h+u,i+d,n+u),l=n,c=(a=i)+e[1],h=l+e[2];break;case"T":i=e[1],n=e[2],c=2*a-c,h=2*l-h,t.quadraticCurveTo(c+d,h+u,i+d,n+u),a=i,l=n;break;case"a":g(t,a+d,l+u,[e[1],e[2],e[3],e[4],e[5],e[6]+a+d,e[7]+l+u]),a+=e[6],l+=e[7];break;case"A":g(t,a+d,l+u,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+u]),a=e[6],l=e[7];break;case"z":case"Z":t.closePath()}s=e}},render:function(t,e){if(this.visible){t.save();var i=this.transformMatrix;i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e||this.transform(t),this.overlayFill?t.fillStyle=this.overlayFill:this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),this._setShadow(t),this.clipTo&&o.util.clipContext(this,t),t.beginPath(),this._render(t),this._renderFill(t),this._renderStroke(t),this.clipTo&&t.restore(),this._removeShadow(t),!e&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=a(this.callSuper("toObject",t),{path:this.path,pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(){for(var t=[],e=this._createBaseSVGMarkup(),i=0,n=this.path.length;i<n;i++)t.push(this.path[i].join(" "));var r=t.join(" ");return e.push('<g transform="',this.group?"":this.getSvgTransform(),'">',"<path ",'d="',r,'" style="',this.getSvgStyles(),'" transform="translate(',-this.width/2," ",-this.height/2,")",'" stroke-linecap="round" ',"/>","</g>"),e.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,i,n,r,o=[],s=[],a=/(-?\.\d+)|(-?\d+(\.\d+)?)/g,l=0,c=this.path.length;l<c;l++){for(n=(t=this.path[l]).slice(1).trim(),s.length=0;i=a.exec(n);)s.push(i[0]);r=[t.charAt(0)];for(var h=0,d=s.length;h<d;h++)e=parseFloat(s[h]),isNaN(e)||r.push(e);var u=r[0].toLowerCase(),p=m[u];if(r.length-1>p)for(var f=1,g=r.length;f<g;f+=p)o.push([r[0]].concat(r.slice(f,f+p)));else o.push(r)}return o},_parseDimensions:function(){var n,r,o,s,a=[],l=[],c=!1;this.path.forEach(function(t,e){"H"!==t[0]&&(n=p(0===e?t:this.path[e-1])),"V"!==t[0]&&(r=f(0===e?t:this.path[e-1])),t[0]===t[0].toLowerCase()&&(c=!0),o=c?n+p(t):"V"===t[0]?n:p(t),s=c?r+f(t):"H"===t[0]?r:f(t);var i=parseInt(o,10);isNaN(i)||a.push(i),i=parseInt(s,10),isNaN(i)||l.push(i)},this);var t=d(a),e=d(l),i=u(a)-t,h=u(l)-e;return{left:this.left+(t+i/2),top:this.top+(e+h/2),width:i,height:h}}}),o.Path.fromObject=function(n,r){"string"==typeof n.path?o.loadSVGFromURL(n.path,function(t){var e=t[0],i=n.path;delete n.path,o.util.object.extend(e,n),e.setSourcePath(i),r(e)}):r(new o.Path(n.path,n))},o.Path.ATTRIBUTE_NAMES=o.SHARED_ATTRIBUTES.concat(["d"]),o.Path.fromElement=function(t,e,i){var n=o.parseAttributes(t,o.Path.ATTRIBUTE_NAMES);e&&e(new o.Path(n.d,a(n,i)))},o.Path.async=!0)}(void 0!==exports?exports:this),function(t){"use strict";var o=t.fabric||(t.fabric={}),e=o.util.object.extend,i=o.util.array.invoke,n=o.Object.prototype.toObject;o.PathGroup?o.warn("fabric.PathGroup is already defined"):(o.PathGroup=o.util.createClass(o.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var i=this.paths.length;i--;)this.paths[i].group=this;this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},render:function(t){if(this.visible){t.save();var e=this.transformMatrix;e&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this.transform(t),this._setShadow(t),this.clipTo&&o.util.clipContext(this,t);for(var i=0,n=this.paths.length;i<n;++i)this.paths[i].render(t,!0);this.clipTo&&t.restore(),this._removeShadow(t),this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_set:function(t,e){if(("fill"===t||"overlayFill"===t)&&e&&this.isSameColor())for(var i=this.paths.length;i--;)this.paths[i]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){return e(n.call(this,t),{paths:i(this.getObjects(),"toObject",t),sourcePath:this.sourcePath})},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(){for(var t=this.getObjects(),e=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransform(),'" ',">"],i=0,n=t.length;i<n;i++)e.push(t[i].toSVG());return e.push("</g>"),e.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var e=this.getObjects()[0].get("fill");return this.getObjects().every(function(t){return t.get("fill")===e})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},toGrayscale:function(){for(var t=this.paths.length;t--;)this.paths[t].toGrayscale();return this},getObjects:function(){return this.paths}}),o.PathGroup.fromObject=function(n,r){"string"==typeof n.paths?o.loadSVGFromURL(n.paths,function(t){var e=n.paths;delete n.paths;var i=o.util.groupSVGElements(t,n,e);r(i)}):o.util.enlivenObjects(n.paths,function(t){delete n.paths,r(new o.PathGroup(t,n))})},o.PathGroup.async=!0)}(void 0!==exports?exports:this),function(t){"use strict";var l=t.fabric||(t.fabric={}),n=l.util.object.extend,d=l.util.array.min,u=l.util.array.max,e=l.util.array.invoke;if(!l.Group){var r={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};l.Group=l.util.createClass(l.Object,l.Collection,{type:"group",initialize:function(t,e){e=e||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;this.originalState={},this.callSuper("initialize"),this._calcBounds(),this._updateObjectsCoords(),e&&n(this,e),this._setOpacityIfSame(),this.setCoords(!0),this.saveCoords()},_updateObjectsCoords:function(){var n=this.left,r=this.top;this.forEachObject(function(t){var e=t.get("left"),i=t.get("top");t.set("originalLeft",e),t.set("originalTop",i),t.set("left",e-n),t.set("top",i-r),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},this)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},getObjects:function(){return this._objects},addWithUpdate:function(t){return this._restoreObjectsState(),this._objects.push(t),(t.group=this).forEachObject(function(t){t.set("active",!0),t.group=this},this),this._calcBounds(),this._updateObjectsCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),this.forEachObject(function(t){t.set("active",!0),t.group=this},this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties){var i=this._objects.length;for(this[t]=e;i--;)this._objects[i].set(t,e)}else this[t]=e},toObject:function(t){return n(this.callSuper("toObject",t),{objects:e(this._objects,"toObject",t)})},render:function(t,e){if(this.visible){t.save(),this.transform(t);var i=Math.max(this.scaleX,this.scaleY);this.clipTo&&l.util.clipContext(this,t);for(var n=0,r=this._objects.length;n<r;n++){var o=this._objects[n],s=o.borderScaleFactor,a=o.hasRotatingPoint;o.visible&&(o.borderScaleFactor=i,o.hasRotatingPoint=!1,o.render(t),o.borderScaleFactor=s,o.hasRotatingPoint=a)}this.clipTo&&t.restore(),!e&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore(),this.setCoords()}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},_restoreObjectState:function(t){var e=this.get("left"),i=this.get("top"),n=this.getAngle()*(Math.PI/180),r=Math.cos(n)*t.get("top")*this.get("scaleY")+Math.sin(n)*t.get("left")*this.get("scaleX"),o=-Math.sin(n)*t.get("top")*this.get("scaleY")+Math.cos(n)*t.get("left")*this.get("scaleX");return t.setAngle(t.getAngle()+this.getAngle()),t.set("left",e+o),t.set("top",i+r),t.set("scaleX",t.get("scaleX")*this.get("scaleX")),t.set("scaleY",t.get("scaleY")*this.get("scaleY")),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},destroy:function(){return this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_setOpacityIfSame:function(){var t=this.getObjects(),e=t[0]?t[0].get("opacity"):1;t.every(function(t){return t.get("opacity")===e})&&(this.opacity=e)},_calcBounds:function(){for(var t,e,i,n,r,o,s=[],a=[],l=0,c=this._objects.length;l<c;++l)for(var h in(n=this._objects[l]).setCoords(),n.oCoords)s.push(n.oCoords[h].x),a.push(n.oCoords[h].y);t=d(s),i=u(s),e=d(a),r=i-t||0,o=u(a)-e||0,this.width=r,this.height=o,this.left=t+r/2||0,this.top=e+o/2||0},toSVG:function(){for(var t=[],e=0,i=this._objects.length;e<i;e++)t.push(this._objects[e].toSVG());return'<g transform="'+this.getSvgTransform()+'">'+t.join("")+"</g>"},get:function(t){if(t in r){if(this[t])return this[t];for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),l.Group.fromObject=function(e,i){l.util.enlivenObjects(e.objects,function(t){delete e.objects,i&&i(new l.Group(t,e))})},l.Group.async=!0}}(void 0!==exports?exports:this),function(t){"use strict";var r=fabric.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",initialize:function(t,e){e||(e={}),this.filters=[],this.callSuper("initialize",e),this._initElement(t),this._initConfig(e),e.filters&&(this.filters=e.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(t,e){return this._element=t,this._originalElement=t,this._initConfig(),0!==this.filters.length&&this.applyFilters(e),this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},render:function(t,e){if(this.visible){t.save();var i=this.transformMatrix;this.group&&"group"!==this.group.type&&t.translate(-this.group.width/2+this.width/2,-this.group.height/2+this.height/2),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),e||this.transform(t),t.save(),this._setShadow(t),this.clipTo&&fabric.util.clipContext(this,t),this._render(t),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),this._renderStroke(t),this.clipTo&&t.restore(),t.restore(),this.active&&!e&&(this.drawBorders(t),this.drawControls(t)),t.restore()}},_stroke:function(t){t.save(),t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke,t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,n=this.width,r=this.height;t.save(),t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke,t.beginPath(),fabric.util.drawDashedLine(t,e,i,e+n,i,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i,e+n,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+n,i+r,e,i+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,i+r,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){return r(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()})})},toSVG:function(){var t=[];if(t.push('<g transform="',this.getSvgTransform(),'">','<image xlink:href="',this.getSvgSrc(),'" style="',this.getSvgStyles(),'" transform="translate('+-this.width/2+" "+-this.height/2+")",'" width="',this.width,'" height="',this.height,'"></image>'),this.stroke||this.strokeDashArray){var e=this.fill;this.fill=null,t.push("<rect ",'x="',-1*this.width/2,'" y="',-1*this.height/2,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>'),this.fill=e}return t.push("</g>"),t.join("")},getSrc:function(){return this.getElement().src||this.getElement()._src},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t){if(0===this.filters.length)return this._element=this._originalElement,void(t&&t());var e=this._originalElement,i=fabric.util.createCanvasElement(),n=fabric.util.createImage(),r=this;return i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height),this.filters.forEach(function(t){t&&t.applyTo(i)}),n.width=e.width,n.height=e.height,fabric.isLikelyNode?(n.src=i.toBuffer(void 0,fabric.Image.pngCompression),r._element=n,t&&t()):(n.onload=function(){r._element=n,t&&t(),n.onload=i=e=null},n.src=i.toDataURL("image/png")),this},_render:function(t){t.drawImage(this._element,-this.width/2,-this.height/2,this.width,this.height)},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t.filters&&t.filters.length?fabric.util.enlivenObjects(t.filters,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement().width||0,this.height="height"in t?t.height:this.getElement().height||0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(i,n){var r=fabric.document.createElement("img"),t=i.src;r.onload=function(){fabric.Image.prototype._initFilters.call(i,i,function(t){i.filters=t||[];var e=new fabric.Image(r,i);n&&n(e),r=r.onload=r.onerror=null})},r.onerror=function(){fabric.log("Error loading "+r.src),n&&n(null,!0),r=r.onload=r.onerror=null},r.src=t},fabric.Image.fromURL=function(t,e,i){fabric.util.loadImage(t,function(t){e(new fabric.Image(t,i))})},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height xlink:href".split(" ")),fabric.Image.fromElement=function(t,e,i){var n=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES);fabric.Image.fromURL(n["xlink:href"],e,r(i?fabric.util.object.clone(i):{},n))},fabric.Image.async=!0,fabric.Image.pngCompression=1)}(void 0!==exports?exports:this),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.brightness,o=0,s=n.length;o<s;o+=4)n[o]+=r,n[o+1]+=r,n[o+2]+=r;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}(void 0!==exports?exports:this),function(t){"use strict";var i=t.fabric||(t.fabric={}),e=i.util.object.extend;i.Image.filters.Convolute=i.util.createClass(i.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0];var e=i.util.createCanvasElement();this.tmpCtx=e.getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=Math.round(Math.sqrt(e.length)),o=Math.floor(r/2),s=n.data,a=n.width,l=n.height,c=a,h=l,d=this._createImageData(c,h),u=d.data,p=this.opaque?1:0,f=0;f<h;f++)for(var g=0;g<c;g++){for(var m=f,y=g,_=4*(f*c+g),v=0,b=0,w=0,x=0,T=0;T<r;T++)for(var A=0;A<r;A++){var C=m+T-o,E=y+A-o;if(0<=C&&C<l&&0<=E&&E<a){var S=4*(C*a+E),O=e[T*r+A];v+=s[S]*O,b+=s[S+1]*O,w+=s[S+2]*O,x+=s[S+3]*O}}u[_]=v,u[_+1]=b,u[_+2]=w,u[_+3]=x+p*(255-x)}i.putImageData(d,0,0)},toObject:function(){return e(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=function(t){return new i.Image.filters.Convolute(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),i=e.getImageData(0,0,t.width,t.height),n=i.data,r=this.threshold,o=n.length,s=0,a=n.length;s<a;s+=4)n[s+3]=r+255*(o-s)/o;e.putImageData(i,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=n.width*n.height*4,s=0;s<o;)e=(r[s]+r[s+1]+r[s+2])/3,r[s]=e,r[s+1]=e,r[s+2]=e,s+=4;i.putImageData(n,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length;for(e=0;e<o;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];i.putImageData(n,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}(void 0!==exports?exports:this),function(t){"use strict";var h=t.fabric||(t.fabric={}),e=h.util.object.extend;h.Image.filters.Mask=h.util.createClass(h.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=-1<[0,1,2,3].indexOf(t.channel)?t.channel:0},applyTo:function(t){if(this.mask){var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.mask.getElement(),s=h.util.createCanvasElement(),a=this.channel,l=n.width*n.height*4;s.width=o.width,s.height=o.height,s.getContext("2d").drawImage(o,0,0,o.width,o.height);var c=s.getContext("2d").getImageData(0,0,o.width,o.height).data;for(e=0;e<l;e+=4)r[e+3]=c[e+a];i.putImageData(n,0,0)}},toObject:function(){return e(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),h.Image.filters.Mask.fromObject=function(t,e){var i=h.document.createElement("img"),n=t.mask.src;i.onload=function(){t.mask=new h.Image(i,t.mask),e&&e(new h.Image.filters.Mask(t)),i=i.onload=i.onerror=null},i.onerror=function(){h.log("Error loading "+i.src),e&&e(null,!0),i=i.onload=i.onerror=null},i.src=n},h.Image.filters.Mask.async=!0}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||100},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=this.noise,s=0,a=r.length;s<a;s+=4)e=(.5-Math.random())*o,r[s]+=e,r[s+1]+=e,r[s+2]+=e;i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,i,n,r,o,s,a,l=t.getContext("2d"),c=l.getImageData(0,0,t.width,t.height),h=c.data,d=c.height,u=c.width;for(i=0;i<d;i+=this.blocksize)for(n=0;n<u;n+=this.blocksize){r=h[e=4*i*u+4*n],o=h[e+1],s=h[e+2],a=h[e+3];for(var p=i,f=i+this.blocksize;p<f;p++)for(var g=n,m=n+this.blocksize;g<m;g++)h[e=4*p*u+4*g]=r,h[e+1]=o,h[e+2]=s,h[e+3]=a}l.putImageData(c,0,0)},toObject:function(){return i(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,i,n,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),s=o.data,a=this.threshold,l=this.distance,c=255-a,h=Math.abs,d=0,u=s.length;d<u;d+=4)e=s[d],i=s[d+1],n=s[d+2],c<e&&c<i&&c<n&&h(e-i)<l&&h(e-n)<l&&h(i-n)<l&&(s[d+3]=1);r.putImageData(o,0,0)},toObject:function(){return i(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,i,n=t.getContext("2d"),r=n.getImageData(0,0,t.width,t.height),o=r.data,s=o.length;for(e=0;e<s;e+=4)i=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=i+100,o[e+1]=i+50,o[e+2]=i+255;n.putImageData(r,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,i,n,r,o=t.getContext("2d"),s=o.getImageData(0,0,t.width,t.height),a=s.data,l=a.length;for(e=0;e<l;e+=4)i=a[e],n=a[e+1],r=a[e+2],a[e]=(.393*i+.769*n+.189*r)/1.351,a[e+1]=(.349*i+.686*n+.168*r)/1.203,a[e+2]=(.272*i+.534*n+.131*r)/2.14;o.putImageData(s,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}(void 0!==exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||0},applyTo:function(t){for(var e,i=t.getContext("2d"),n=i.getImageData(0,0,t.width,t.height),r=n.data,o=r.length,s=parseInt(this.color,10).toString(16);s.length<6;)s="0"+s;var a=parseInt("0x"+s.substr(0,2),16),l=parseInt("0x"+s.substr(2,2),16),c=parseInt("0x"+s.substr(4,2),16);for(e=0;e<o;e+=4)0<r[e+3]&&(r[e]=a,r[e+1]=l,r[e+2]=c);i.putImageData(n,0,0)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}(void 0!==exports?exports:this),function(t){"use strict";var c=t.fabric||(t.fabric={}),e=c.util.object.extend,i=c.util.object.clone,h=c.util.toFixed,o=c.StaticCanvas.supports("setLineDash");if(c.Text)c.warn("fabric.Text is already defined");else{var n=c.Object.prototype.stateProperties.concat();n.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","backgroundColor","textBackgroundColor","useNative","path"),c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.3,backgroundColor:"",textBackgroundColor:"",path:null,useNative:!0,stateProperties:n,stroke:null,shadow:null,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions(),this.setCoords()},_initDimensions:function(){if(!this.__skipDimension){var t=c.util.createCanvasElement();this._render(t.getContext("2d"))}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){var e=this.group&&"group"!==this.group.type;e&&!this.transformMatrix?t.translate(-this.group.width/2+this.left,-this.group.height/2+this.top):e&&this.transformMatrix&&t.translate(-this.group.width/2,-this.group.height/2),void 0===Cufon||!0===this.useNative?this._renderViaNative(t):this._renderViaCufon(t)},_renderViaNative:function(t){this.transform(t,c.isLikelyNode),this._setTextStyles(t);var e=this.text.split(/\r?\n/);this.width=this._getTextWidth(t,e),this.height=this._getTextHeight(t,e),this.clipTo&&c.util.clipContext(this,t),this._renderTextBackground(t,e),"left"!==this.textAlign&&"justify"!==this.textAlign&&(t.save(),t.translate("center"===this.textAlign?this.width/2:this.width,0)),t.save(),this._setShadow(t),this._renderTextFill(t,e),this._renderTextStroke(t,e),this._removeShadow(t),t.restore(),"left"!==this.textAlign&&"justify"!==this.textAlign&&t.restore(),this._renderTextDecoration(t,e),this.clipTo&&t.restore(),this._setBoundaries(t,e),this._totalLineHeight=0},_setBoundaries:function(t,e){this._boundaries=[];for(var i=0,n=e.length;i<n;i++){var r=this._getLineWidth(t,e[i]),o=this._getLineLeftOffset(r);this._boundaries.push({height:this.fontSize*this.lineHeight,width:r,left:o})}},_setTextStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t):this.fill),this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t):this.stroke),t.textBaseline="alphabetic",t.textAlign=this.textAlign,t.font=this._getFontDeclaration()},_getTextHeight:function(t,e){return this.fontSize*e.length*this.lineHeight},_getTextWidth:function(t,e){for(var i=t.measureText(e[0]).width,n=1,r=e.length;n<r;n++){var o=t.measureText(e[n]).width;i<o&&(i=o)}return i},_drawChars:function(t,e,i,n,r){e[t](i,n,r)},_drawTextLine:function(t,e,i,n,r,o){if(r-=this.fontSize/4,"justify"===this.textAlign){var s=e.measureText(i).width,a=this.width;if(s<a)for(var l=i.split(/\s+/),c=(a-e.measureText(i.replace(/\s+/g,"")).width)/(l.length-1),h=0,d=0,u=l.length;d<u;d++)this._drawChars(t,e,l[d],n+h,r,o),h+=e.measureText(l[d]).width+c;else this._drawChars(t,e,i,n,r,o)}else this._drawChars(t,e,i,n,r,o)},_getLeftOffset:function(){return!c.isLikelyNode||"left"!==this.originX&&"center"!==this.originX?-this.width/2:0},_getTopOffset:function(){return c.isLikelyNode?"center"===this.originY?-this.height/2:"bottom"===this.originY?-this.height:0:-this.height/2},_renderTextFill:function(t,e){if(this.fill||this.skipFillStrokeCheck){this._boundaries=[];for(var i=0,n=0,r=e.length;n<r;n++){i+=this._getHeightOfLine(t,n,e),this._drawTextLine("fillText",t,e[n],this._getLeftOffset(),this._getTopOffset()+i,n)}}},_renderTextStroke:function(t,e){if(this.stroke||this.skipFillStrokeCheck){var i=0;t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var n=0,r=e.length;n<r;n++){i+=this._getHeightOfLine(t,n,e),this._drawTextLine("strokeText",t,e[n],this._getLeftOffset(),this._getTopOffset()+i,n)}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},_renderTextBackground:function(t,e){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t,e)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t,e){if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var i=0,n=e.length;i<n;i++)if(""!==e[i]){var r=this._getLineWidth(t,e[i]),o=this._getLineLeftOffset(r);t.fillRect(this._getLeftOffset()+o,this._getTopOffset()+i*this.fontSize*this.lineHeight,r,this.fontSize*this.lineHeight)}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_getLineWidth:function(t,e){return"justify"===this.textAlign?this.width:t.measureText(e).width},_renderTextDecoration:function(o,s){if(this.textDecoration){var a=this._getTextHeight(o,s)/2,l=this,t=this.fontSize/4;-1<this.textDecoration.indexOf("underline")&&e(this.fontSize*this.lineHeight),-1<this.textDecoration.indexOf("line-through")&&e(this.fontSize*this.lineHeight-t),-1<this.textDecoration.indexOf("overline")&&e(t)}function e(t){for(var e=0,i=s.length;e<i;e++){var n=l._getLineWidth(o,s[e]),r=l._getLineLeftOffset(n);o.fillRect(l._getLeftOffset()+r,t+e*l._getHeightOfLine(o,e,s)-a,n,1)}}},_getFontDeclaration:function(){return[c.isLikelyNode?this.fontWeight:this.fontStyle,c.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",c.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._render(t),!e&&this.active&&(this.drawBorders(t),this.drawControls(t)),t.restore())},toObject:function(t){return e(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative})},toSVG:function(){var t=this.text.split(/\r?\n/),e=this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight,i=-this.width/2,n=this.useNative?this.fontSize-1:this.height/2-t.length*this.fontSize-this._totalLineHeight,r=this._getSVGTextAndBg(e,i,t),o=this._getSVGShadows(e,t);return n+=this._fontAscent?this._fontAscent/5*this.lineHeight:0,['<g transform="',this.getSvgTransform(),'">',r.textBgRects.join(""),"<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" ','transform="translate(',h(i,2)," ",h(n,2),')">',o.join(""),r.textSpans.join(""),"</text>","</g>"].join("")},_getSVGShadows:function(t,e){var i,n,r=[],o=1;if(!this.shadow||!this._boundaries)return r;for(i=0,n=e.length;i<n;i++)if(""!==e[i]){var s=this._boundaries&&this._boundaries[i]?this._boundaries[i].left:0;r.push('<tspan x="',h(s+o+this.shadow.offsetX,2),0===i||this.useNative?'" y':'" dy','="',h(this.useNative?t*i-this.height/2+this.shadow.offsetY:t+(0===i?this.shadow.offsetY:0),2),'" ',this._getFillAttributes(this.shadow.color),">",c.util.string.escapeXml(e[i]),"</tspan>"),o=1}else o++;return r},_getSVGTextAndBg:function(t,e,i){var n,r,o,s=[],a=[],l=1;for(this.backgroundColor&&this._boundaries&&a.push("<rect ",this._getFillAttributes(this.backgroundColor),' x="',h(-this.width/2,2),'" y="',h(-this.height/2,2),'" width="',h(this.width,2),'" height="',h(this.height,2),'"></rect>'),n=0,o=i.length;n<o;n++)""!==i[n]?(r=this._boundaries&&this._boundaries[n]?h(this._boundaries[n].left,2):0,s.push('<tspan x="',r,'" ',0===n||this.useNative?"y":"dy",'="',h(this.useNative?t*n-this.height/2:t*l,2),'" ',this._getFillAttributes(this.fill),">",c.util.string.escapeXml(i[n]),"</tspan>"),l=1):l++,this.textBackgroundColor&&this._boundaries&&a.push("<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',h(e+this._boundaries[n].left,2),'" y="',h(t*n-this.height/2,2),'" width="',h(this._boundaries[n].width,2),'" height="',h(this._boundaries[n].height,2),'"></rect>');return{textSpans:s,textBgRects:a}},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new c.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){"fontFamily"===t&&this.path&&(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+e+"$3")),this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y font-family font-style font-weight font-size text-decoration".split(" ")),c.Text.fromElement=function(t,e){if(!t)return null;var i=c.parseAttributes(t,c.Text.ATTRIBUTE_NAMES);e=c.util.object.extend(e?c.util.object.clone(e):{},i);var n=new c.Text(t.textContent,e);return n.set({left:n.getLeft()+n.getWidth()/2,top:n.getTop()-n.getHeight()/2}),n},c.Text.fromObject=function(t){return new c.Text(t.text,i(t))},c.util.createAccessors(c.Text)}}(void 0!==exports?exports:this),fabric.util.object.extend(fabric.Text.prototype,{_renderViaCufon:function(t){var e=Cufon.textOptions||(Cufon.textOptions={});e.left=this.left,e.top=this.top,e.context=t,e.color=this.fill;var i=this._initDummyElementForCufon();this.transform(t),Cufon.replaceElement(i,{engine:"canvas",separate:"none",fontFamily:this.fontFamily,fontWeight:this.fontWeight,textDecoration:this.textDecoration,textShadow:this.shadow&&this.shadow.toString(),textAlign:this.textAlign,fontStyle:this.fontStyle,lineHeight:this.lineHeight,stroke:this.stroke,strokeWidth:this.strokeWidth,backgroundColor:this.backgroundColor,textBackgroundColor:this.textBackgroundColor}),this.width=e.width,this.height=e.height,this._totalLineHeight=e.totalLineHeight,this._fontAscent=e.fontAscent,this._boundaries=e.boundaries,i=null,this.setCoords()},_initDummyElementForCufon:function(){var t=fabric.document.createElement("pre");return fabric.document.createElement("div").appendChild(t),"undefined"==typeof G_vmlCanvasManager?t.innerHTML=this.text:t.innerText=this.text.replace(/\r?\n/gi,"\r"),t.style.fontSize=this.fontSize+"px",t.style.letterSpacing="normal",t}}),function(){if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=new require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(e,i,n){var t=function(t){r.src=new Buffer(t,"binary"),r._src=e,i&&i.call(n,r)},r=new Image;e&&(e instanceof Buffer||0===e.indexOf("data"))?(r.src=r._src=e,i&&i.call(n,r)):e&&0!==e.indexOf("http")?request_fs(e,t):e&&request(e,"binary",t)},fabric.loadSVGFromURL=function(t,e,i){0!==(t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim()).indexOf("http")?request_fs(t,function(t){fabric.loadSVGFromString(t,e,i)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,i)})},fabric.loadSVGFromString=function(t,i,e){var n=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(n.documentElement,function(t,e){i&&i(t,e)},e)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(i,n){fabric.util.loadImage(i.src,function(t){var e=new fabric.Image(t);e._initConfig(i),e._initFilters(i,function(t){e.filters=t||[],n&&n(e)})})},fabric.createCanvasForNode=function(t,e){var i=fabric.document.createElement("canvas"),n=new Canvas(t||600,e||600);i.style={},i.width=n.width,i.height=n.height;var r=new(fabric.Canvas||fabric.StaticCanvas)(i);return r.contextContainer=n.getContext("2d"),r.nodeCanvas=n,r.Font=Canvas.Font,r},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t){return origSetWidth.call(this,t),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t){return origSetHeight.call(this,t),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}function request(t,n,r){var e=URL.parse(t);e.port||(e.port=0===e.protocol.indexOf("https:")?443:80);var i=(443===e.port?HTTPS:HTTP).request({hostname:e.hostname,port:e.port,path:e.path,method:"GET"},function(e){var i="";n&&e.setEncoding(n),e.on("end",function(){r(i)}),e.on("data",function(t){200===e.statusCode&&(i+=t)})});i.on("error",function(t){t.errno===process.ECONNREFUSED?fabric.log("ECONNREFUSED: connection refused to "+e.hostname+":"+e.port):fabric.log(t.message)}),i.end()}function request_fs(t,i){require("fs").readFile(t,function(t,e){if(t)throw fabric.log(t),t;i(e)})}}();var Assets={};function AnimationSequence(t,e,i){var n,r,o,s=new SmartObject,a=t,l={curFrame:0,totalFrames:t.length-1},c=!1;function h(){l.curFrame++,c&&l.curFrame>o?s.pause():l.curFrame>l.totalFrames?s.loop?(l.curFrame=0,p(),u()):(s.pause(),l.curFrame=l.totalFrames):(p(),u())}function d(){l.curFrame--,l.curFrame<0?s.loop?(l.curFrame=l.totalFrames,p(),u()):(s.pause(),l.curFrame=0):(p(),u())}function u(){r&&s.removeChild(r),r=a[l.curFrame],s.appendChild(r)}function p(){i&&i(l.curFrame)}return s.play=function(t){t||(c=!1),n&&clearInterval(n),p(),n=setInterval(h,1e3/e)},s.reverse=function(){n&&clearInterval(n),p(),n=setInterval(d,1e3/e)},s.changeFrameRate=function(t,e){n&&clearInterval(n),n="reverse"===e?setInterval(d,1e3/t):setInterval(h,1e3/t)},s.stop=function(){n&&clearInterval(n),l.curFrame=0},s.pause=function(){n&&clearInterval(n)},s.gotoAndPlay=function(t){if(!(t<=l.totalFrames&&0<=t))throw new Error("Animation.gotoAndPlay: out of bounds!");s.stop(),l.curFrame=t,s.play()},s.playTo=function(t){s.stop(),o=t,c=!0,s.play(!0)},s.gotoAndStop=function(t){s.stop(),l.curFrame=t,u()},s.kill=function(){s.stop(),t=a=l=null},s.loop=!1,r=a[0],s.appendChild(r),s}function ScrollDisabler(){var t={},e=navigator.userAgent.match("CriOS");function i(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.returnValue=!1}return t.disable_scroll=function(){if(document.addEventListener("touchmove",i),e)return!1;Assets.LAYER_ALL.style.overflowY="hidden"},t.enable_scroll=function(){if(document.removeEventListener("touchmove",i),e)return!1;Assets.LAYER_ALL.style.overflowY=Assets.all_overflow},t}function CaseTemplate(t){var i,c,h,d,s,u,p,f,g,r,m,o,a,y,l,_,v,b=new SmartObject,w=t.getXML(),n=!1,x=!1,T=!1,A=[],C=[],E=[],S=[],O=[],e=!0,M=0,L=[],k=!1,D=!1,I=!1;function R(){if(b&&1!=k){var t=S[M];t._bkgSrc?preloadImg=document.createElement("img"):t._isVid?(preloadImg=document.createElement("img"),preloadImg._vid=t):preloadImg=t,preloadImg._order=M,L.push(preloadImg),M++,preloadImg.addEventListener(Event.LOAD,P),t._bkgSrc?preloadImg.src=t._bkgSrc:preloadImg.src=t._src}}function P(t){if(b&&1!=k){if(1==M){d.style.backgroundImage="url("+this.src+")";var e=BrowserDetect.MOBILE||BrowserDetect.TABLET?0:.5;TweenMax.to(d,e,{_opacity:1,ease:Linear.easeNone}),!0!==Assets.DELAY_CASE_IMAGES&&M<S.length&&R()}else M<S.length&&R();this._vid&&TweenMax.to(this._vid,.3,{_opacity:1,ease:Linear.easeNone}),this._isImg&&(TweenMax.to(this._wrap,.3,{_opacity:1,ease:Linear.easeNone}),this._wrap.style.height="auto"),this._order==S.length-1&&q()}}function B(t,e){var i=new SmartObject;i.style.width=Assets.getWindowWidth()+"px",i.style.clear="both",i.style.zIndex=2,i.style.top=0,i.style.left=0;var n=t.getAttribute("data-video-height")/t.getAttribute("data-video-width"),r=Assets.getWindowWidth()*n;i.style.height=r+"px",i._ratio=n,i._opacity=0;var o=document.createElement("video");navigator.userAgent.toLowerCase().indexOf("android");if(o.src="https://hellomonday-video.firebaseapp.com/videos/projects/"+t.getAttribute("data-video"),o.style.zIndex=7,o._isPlaying=e,(o._isMetaLoaded=e)?(o.setAttribute("muted",""),o.setAttribute("loop",""),o.setAttribute("autoplay",""),o.setAttribute("playsinline",""),i._opacity=1):o.addEventListener("ended",j),(i._video=o)._videoWrap=i,!e){var s=new SmartObject;s.style.top=0,s.style.left=0,s.style.width="100%",s.style.height="100%";var a=1<window.devicePixelRatio,l=(1==BrowserDetect.MOBILE?1==a?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==a?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/")+t.getAttribute("data-image");s.style.backgroundImage="url("+l+")",s.style.backgroundSize="cover",s.style.backgroundPosition="center center",s.style.pointerEvents="none",s.style.zIndex=9,i._poster=s,i.appendChild(s);var c=new SmartObject;c.style.width="108px",c.style.height="108px",c.style.borderRadius="54px";var h=new SmartObject;h.style.width="108px",h.style.height="108px",h.style.borderRadius="54px",h.style.backgroundColor="#"+t.getAttribute("data-buttonColor"),h._opacity=.4,c.appendChild(h);var d=new SmartObject;d.style.width="78px",d.style.height="78px",d.style.borderRadius="39px",d.style.backgroundColor="#"+t.getAttribute("data-buttonColor"),d._opacity=1,d._x=15,d._y=15,c.appendChild(d);var u=new ArrowButton("right",null,"#"+t.getAttribute("data-buttonColor"),null,{_options:{speed:.5}});u._x=30,u._y=30,u.removeEvents(),c._innerButton=u,c.appendChild(u),c.style.cursor="pointer",c.style.zIndex=10,c._x=(Assets.getWindowWidth()-108)/2,(i._playBtn=c).addEventListener("mouseover",N),c.addEventListener("mouseout",F),i.appendChild(c)}if(i._height=t.getAttribute("data-video-height"),BrowserDetect.MOBILE||BrowserDetect.TABLET){o.style.width="100%";n=t.getAttribute("data-video-height")/t.getAttribute("data-video-width");o._ratio=n;r=Assets.getWindowWidth()*n;o.style.height=r+"px",o._videoWrap.style.height=r+"px",e||(o._videoWrap._playBtn._y=(r-108)/2,o._videoWrap.addEventListener("click",W)),o._isMetaLoaded=!0}else{o.style.width="100%";n=t.getAttribute("data-video-height")/t.getAttribute("data-video-width");o._ratio=n;r=Assets.getWindowWidth()*n;o.style.height=r+"px",o._videoWrap.style.height=r+"px",e||(o._videoWrap._playBtn._y=(r-108)/2,o.addEventListener("loadedmetadata",H))}return i.appendChild(o),i._isVid=!0,e||(i._src=l,S.push(i)),i}function H(t){this.style.width="100%";var e=this.videoHeight/this.videoWidth;this._ratio=e;var i=Assets.getWindowWidth()*e;this.style.height=i+"px",this._videoWrap._playBtn._y=(i-108)/2,this._videoWrap.style.height=i+"px",this._videoWrap.addEventListener("click",W),this._isMetaLoaded=!0}function j(t){this.parentNode._poster.style.display="block",TweenMax.to(this.parentNode._poster,.2,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.parentNode._playBtn,.2,{_opacity:1,ease:Linear.easeNone}),this._isPlaying=!1}function W(t){if(0==this._video._isPlaying){this._video._isPlaying=!0;var e=this;TweenMax.to(this._poster,.2,{_opacity:0,ease:Linear.easeNone,onComplete:function(){e._poster.style.display="none"}}),TweenMax.to(this._playBtn,.3,{delay:.3,_opacity:0,ease:Linear.easeNone}),this._playBtn._innerButton.mouseOut(),this._playBtn._innerButton.onClick(),this._video.play()}else this._video._isPlaying=!1,TweenMax.to(this._playBtn,.2,{_opacity:1,ease:Linear.easeNone}),this._video.pause()}function N(t){1!=this.parentNode._video._isPlaying&&this._innerButton.mouseOver()}function F(t){1!=this.parentNode._video._isPlaying&&this._innerButton.mouseOut()}function z(t){I||(I=!0,history.back())}function U(){if(!e)return!1;var t=1-Assets.LAYER_ALL.scrollTop/(Assets.getWindowHeight()/1.2);clearInterval(h.idleTimer),d._opacity=t,d._y=Assets.LAYER_ALL.scrollTop/2}function Y(t){if(1!=T){if(T=!0,0==x){var e;TweenMax.to(c,.15,{_rotation:-90,ease:Circ.easeInOut}),e=g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+60>f._getHeight()+20?f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+100:f._y+f._getHeight()+20,TweenMax.to(u,.5,{css:{height:e+"px"},ease:Quad.easeInOut});for(var i=e+d._getHeight()-79+20,n=0;n<O.length;n++)TweenMax.to(O[n],.5,{_y:i,ease:Quad.easeInOut}),i+=O[n]._getHeight();TweenMax.to(b,.5,{css:{height:i+"px"},ease:Quad.easeInOut}),x=!0}else{TweenMax.to(c,.15,{_rotation:0,ease:Circ.easeInOut}),TweenMax.to(u,.5,{css:{height:"79px"},ease:Quad.easeInOut});for(i=d._getHeight(),n=0;n<O.length;n++)TweenMax.to(O[n],.5,{_y:i,ease:Quad.easeInOut}),i+=O[n]._getHeight();TweenMax.to(b,.5,{css:{height:i+"px"},ease:Quad.easeInOut}),x=!1}a=setTimeout(X,1e3)}}function X(){T=!1}function G(t){TweenMax.to(Assets.LAYER_ALL,.7,{scrollTo:{y:Assets.getWindowHeight()},ease:Power2.easeOut})}function V(t){var e=new SmartObject;e.style.width=Assets.getWindowWidth()+"px";var i=t.getAttribute("data-height")/t.getAttribute("data-width");e.style.height=Math.round(Assets.getWindowWidth()*i)+"px",e.style.overflow="hidden",e.style.clear="both",e.style.display="block",e.style.top=0,e.style.left=0,e._opacity=0;var n=new SmartObject(document.createElement("img"));n.style.position="relative",n.style.verticalAlign="top",n._wrap=e,n._isImg=!0;var r,o=1<window.devicePixelRatio;return r=1==BrowserDetect.MOBILE?1==o?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==o?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/",n._src=r+t.getAttribute("data-image"),S.push(n),n.style.width="100%",n.style.height="auto",e.appendChild(n),e}function q(t){var e=Assets.getWindowWidth(),i=Assets.getWindowHeight();if(d.style.width=e+"px",d.style.height=i+"px",1==BrowserDetect.MOBILE&&e<i){var n=Assets.CDN_URL_SMALL+"assets/images/projects/portrait/"+w.getAttribute("data-caseImageTop");d.style.backgroundImage="url("+n+")"}else if(1==BrowserDetect.MOBILE&&i<e){n=d._path+w.getAttribute("data-caseImageTop");d.style.backgroundImage="url("+n+")"}v&&(v.style.width=Assets.getWindowWidth(),v.style.height=Assets.getWindowWidth()*_._ratio+180+"px"),p._x=(e-40)/4,m.style.width=.75*(e-40)+"px",f._x=e-66-250,g.style.width=(e-40)/4-40+"px",g._x=e<1270?20:(e-40)/4+20,e<520||1==BrowserDetect.MOBILE?(p._x=20,p._y=260-p._getHeight()-40,u._caseTag.style.top="300px",u._caseTag.style.left="20px",m.style.fontSize="28px",m.style.lineHeight="30px",c.style.display="block",h.style.display="none",u.addEventListener("click",Y)):(p._x=(e-40)/4+20,p._y=75,u._caseTag.style.top="15px",u._caseTag.style.left=(e-40)/4+20+"px",m.style.fontSize="33px",m.style.lineHeight="35px",h.style.display="block",c.style.display="none",u.removeEventListener("click",Y)),e<520?(p.style.fontSize="23px",p.style.lineHeight="28px",m.style.fontSize="23px",m.style.lineHeight="28px"):(p.style.fontSize="33px",p.style.lineHeight="35px",m.style.fontSize="33px",m.style.lineHeight="35px"),g._y=Math.round(m._y+m._getHeight()+40),f._y=m._y+m._getHeight()+40,y=setTimeout(J,10),h._x=e-40-46-21,c._x=e-40-46-21;for(var r=0;r<A.length;r++)A[r].resize(e,i);for(var o=0;o<C.length;o++)C[o].style.width=e+"px";for(var s=0;s<E.length;s++){E[s].style.width=e+"px";var a=E[s]._video;if(E[s]._playBtn&&(E[s]._playBtn._x=(e-100)/2),1==a._isMetaLoaded){var l=e*a._ratio;0!==l&&(a.style.height=l+"px",E[s]._playBtn&&(E[s]._playBtn._y=(l-108)/2),E[s].style.height=l+"px")}else a.style.height=a._height+"px"}}function J(){var t=Assets.getWindowWidth(),e=Assets.getWindowHeight();t<690?(g._columnOne.style.width=t-88+"px",g._columnTwo.style.left="0px",g._columnTwo.style.top=Math.round(g._columnOne.offsetHeight+g._headline.offsetHeight+10)+"px",g._columnTwo.style.width=t-88+"px",g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+60>f._getHeight()+20?(u.style.height=f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+100+"px",r.style.top=f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+83+"px"):(u.style.height=f._y+f._getHeight()+20+"px",r.style.top=f._y+f._getHeight()-33+"px")):t<1030?(g._columnOne.style.width=(t-40)/4*2+"px",g._columnTwo.style.left="0px",g._columnTwo.style.top=Math.round(g._columnOne.offsetHeight+g._headline.offsetHeight+10)+"px",g._columnTwo.style.width=(t-40)/4*2+"px",g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+60>f._getHeight()+20?(u.style.height=f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+100+"px",r.style.top=f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+83+"px"):(u.style.height=f._y+f._getHeight()+20+"px",r.style.top=f._y+f._getHeight()-33+"px")):(g._columnOne.style.width=(t-40)/4-40+"px",g._columnTwo.style.left=(t-40)/4+"px",g._columnTwo.style.top="0px",g._columnTwo.style.width=(t-40)/4-40+"px",g._columnOne.offsetHeight+r.offsetHeight+60>f._getHeight()+20?(u.style.height=f._y+g._columnOne.offsetHeight+r.offsetHeight+100+"px",r.style.top=f._y+g._columnOne.offsetHeight+83+"px"):(u.style.height=f._y+f._getHeight()+20+"px",r.style.top=f._y+f._getHeight()-33+"px")),f._lastLine.style.top=u.offsetHeight-(f._y+36)+"px",t<520&&0==x&&(u.style.height="79px"),1==BrowserDetect.MOBILE&&0==x&&1==S.length?Y():1==BrowserDetect.MOBILE&&1==x&&1==S.length?l=setTimeout(K,25):1==BrowserDetect.MOBILE&&0==x&&(u.style.height="79px"),1==BrowserDetect.MOBILE&&1==x&&1<S.length&&(u.style.height="79px",Y()),f.style.display=t<690?"none":"block",i._x=92,0==D&&(i._x=40),0==n?u._y=e:1==BrowserDetect.MOBILE?u._y=e-79:u._y=t<520?e-79:e-260,u.style.width=t-40+"px",r.style.left=g._x+"px",function(){var t;t=Assets.getWindowWidth()<520||1==BrowserDetect.MOBILE?u._getHeight()+d._getHeight()-79:u._getHeight()+d._getHeight()-260+20;for(var e=0;e<O.length;e++)O[e]._y=t,0<O[e]._getHeight()?t+=O[e]._getHeight():t+=o;b.style.height=t+"px"}()}function K(){var t;t=g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+60>f._getHeight()+20?f._y+g._columnOne.offsetHeight+g._columnTwo.offsetHeight+10+r.offsetHeight+100:f._y+f._getHeight()+20,u.style.height=t+"px";var e=t+d._getHeight()-79+20;b.style.height=e+"px"}function Q(){for(var t=0,e=S.length;t<e;t++)S[t]._playBtn&&(S[t]._playBtn._innerButton.kill(),S[t]._playBtn=null),S[t].parentNode&&S[t].parentNode.removeChild(S[t]),S[t]=null;_&&_.stopRender(),null,clearInterval(void 0),clearTimeout(a),clearTimeout(y),clearTimeout(l);for(var i=0;i<L.length;i++)L[i].removeEventListener(Event.LOAD,P),L[i]._vid&&(L[i]._vid=null);h.parentNode&&h.parentNode.removeChild(h),h&&(h.kill(),h=null),m&&m.parentNode&&m.parentNode.removeChild(m),m=null,u.parentNode&&u.parentNode.removeChild(u),u=null;for(var n=0,r=A.length;n<r;n++)A[n].parentNode&&A[n].parentNode.removeChild(A[n]),A[n].kill(),A[n]=null;A=null;for(var o=0;o<E.length;o++){var s=E[o]._video;s.removeEventListener("ended",j),BrowserDetect.MOBILE||BrowserDetect.TABLET||s.removeEventListener("loadedmetadata",H),s.parentNode&&s.parentNode.removeChild(s),s=null}b.parentNode&&b.parentNode.removeChild(b),b=null}function Z(){Assets.LAYER_TOP.removeChild(i),i=null}return b.templateIn=function(){b._allowOverflowReset=!0,b.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,b.style.background="#"+w.getAttribute("data-bodyBackground"),b.style.overflow="hidden",b.style.width="100%",b.style.height="auto",o=949/1920*Assets.getWindowWidth(),o=Math.ceil(o);var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,b.appendChild(t),w.querySelector(".case-content"),(i=new ArrowButton("left",z,"#"+w.getAttribute("data-backBtnColor"),null,Assets.TRANSITIONS_MANAGER)).style.position="fixed",i._x=40,i._y=40,i._opacity=0,i.style.zIndex=2,Assets.LAYER_TOP.appendChild(i),function(){(d=new SmartObject).style.position="relative",d.style.width=Assets.getWindowWidth()+"px",d.style.height=Assets.getWindowHeight()+"px",i.style.zIndex=3,d._opacity=0;var t=1<window.devicePixelRatio;e=1==BrowserDetect.MOBILE?1==t?Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/mobile/":1==BrowserDetect.TABLET?1==t?Assets.CDN_URL_SMALL+"assets/images/projects/desktop/":Assets.CDN_URL_SMALL+"assets/images/projects/tablet/":Assets.CDN_URL_SMALL+"assets/images/projects/desktop/";if(1==BrowserDetect.MOBILE&&Assets.getWindowWidth()<Assets.getWindowHeight())var e=Assets.CDN_URL_SMALL+"assets/images/projects/portrait/";d._path=e,d._bkgSrc=e+w.getAttribute("data-caseImageTop"),d.style.backgroundSize="cover",d.style.backgroundPosition="center top",S.push(d),b.appendChild(d)}(),function(){u=new SmartObject;var t=.9;w.getAttribute("data-panelOpacity")&&(t=parseInt(w.getAttribute("data-panelOpacity")));u._opacity=t,u.style.top=0,u.style.left=0,u.style.zIndex=10,u.style.overflow="hidden",u.style.backgroundColor="#"+w.getAttribute("data-panelColor"),u._x=20,function(){(s=new SmartObject)._x=20,s._y=15;var t=document.createElement("span");t.style.display="block",w.getAttribute("data-whiteOpt")?t.style.color="#"+w.getAttribute("data-whiteOpt"):t.style.color="#fff",t.style.fontSize="14px",t.innerHTML=Assets.DATA_STATIC.querySelector("#client").innerHTML;var e=document.createElement("span");e.style.display="block",e.style.color="#"+w.getAttribute("data-textColor"),e.style.fontSize="14px",e.innerHTML=w.querySelector(".client-title").innerHTML;var i=document.createElement("span");i.style.display="block",i.style.position="absolute",i.style.left=(Assets.getWindowWidth()-40)/4+"px",i.style.top="15px",w.getAttribute("data-whiteOpt")?i.style.color="#"+w.getAttribute("data-whiteOpt"):i.style.color="#fff",i.style.fontSize="14px",i.innerHTML=Assets.DATA_STATIC.querySelector("#case-tag").innerHTML;var n=document.createElement("div");n.style.position="relative",n.style.width="43px",n.style.height="1px",w.getAttribute("data-whiteOpt")?n.style.backgroundColor="#"+w.getAttribute("data-whiteOpt"):n.style.backgroundColor="#fff",n.style.top="-8px",n.style.left="38px",i.appendChild(n),u._caseTag=i,s.appendChild(t),s.appendChild(e),u.appendChild(s),u.appendChild(i),(p=new SmartObject).style.fontSize="33px",p.style.lineHeight="35px";var r=document.createElement("span");r.style.display="block",w.getAttribute("data-whiteOpt")?r.style.color="#"+w.getAttribute("data-whiteOpt"):r.style.color="#fff",r.innerHTML=w.querySelector(".case-title").innerHTML;var o=document.createElement("span");o.style.display="block",o.style.width="320px",o.style.color="#"+w.getAttribute("data-textColor"),o.innerHTML=w.querySelector(".subtitle").innerHTML,p.appendChild(r),p.appendChild(o),u.appendChild(p),(m=new SmartObject(document.createElement("span"))).style.display="block",m.style.width=.75*(Assets.getWindowWidth()-40)+"px",m.style.color="#"+w.getAttribute("data-textColor"),m.style.fontSize="33px",m.style.lineHeight="35px",m._x=20,m._y=355,m.innerHTML=w.querySelector(".intro").innerHTML,u.appendChild(m)}(),function(){(f=new SmartObject).style.width="250px",f.style.height="auto",f.style.paddingBottom="14px",f._x=Assets.getWindowWidth()-66-250;var t=document.createElement("span");t.style.display="block",t.style.fontSize="14px",t.style.lineHeight="27px",t.style.color="#"+w.getAttribute("data-secondTextColor"),t.innerHTML=Assets.DATA_STATIC.querySelector("#project").innerHTML,f.appendChild(t);var e=document.createElement("span");e.style.width="180px",e.style.display="block",e.style.fontSize="14px",e.style.lineHeight="18px",e.style.color="#"+w.getAttribute("data-secondTextColor"),e.style.fontFamily="TheinhardtRegular",e.innerHTML=w.querySelector(".project").innerHTML,f.appendChild(e);var i=new SmartObject;i.style.position="relative",i.style.width="100%",i.style.height="1px",i.style.marginTop="10px",i.style.marginBottom="5px",i.style.background="#"+w.getAttribute("data-secondTextColor"),i._opacity=.2,f.appendChild(i);var n=document.createElement("span");n.style.display="block",n.style.fontSize="14px",n.style.lineHeight="27px",n.style.color="#"+w.getAttribute("data-secondTextColor"),n.innerHTML=Assets.DATA_STATIC.querySelector("#deliverables").innerHTML,f.appendChild(n);var r=document.createElement("span");if(r.style.width="180px",r.style.display="block",r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#"+w.getAttribute("data-secondTextColor"),r.style.fontFamily="TheinhardtRegular",r.innerHTML=w.querySelector(".deliverables").innerHTML,f.appendChild(r),0<String(w.querySelector(".awards").innerHTML+"").length){i=i.cloneNode(),f.appendChild(i);var o=document.createElement("span");o.style.display="block",o.style.fontSize="14px",o.style.lineHeight="27px",o.style.color="#"+w.getAttribute("data-secondTextColor"),o.innerHTML=Assets.DATA_STATIC.querySelector("#awards").innerHTML,f.appendChild(o);var s=document.createElement("span");s.style.width="180px",s.style.display="block",s.style.fontSize="14px",s.style.lineHeight="18px",s.style.color="#"+w.getAttribute("data-secondTextColor"),s.style.fontFamily="TheinhardtRegular",s.innerHTML=w.querySelector(".awards").innerHTML,f.appendChild(s)}(i=i.cloneNode()).style.position="absolute",f._lastLine=i,f.appendChild(i),u.appendChild(f)}(),function(){(g=new SmartObject).style.width=(Assets.getWindowWidth()-40)/4-40+"px",g._x=(Assets.getWindowWidth()-40)/4+20,g._y=Math.round(m._y+m._getHeight()+40);var t=w.querySelector(".body-text"),e=document.createElement("span");e.style.color="#"+w.getAttribute("data-secondTextColor"),e.style.fontSize="14px",e.style.lineHeight="27px",e.style.whiteSpace="nowrap",e.innerHTML=t.querySelector(".headline").innerHTML,g.appendChild(e),g._headline=e;var i=document.createElement("div");i.style.position="absolute",i.style.width="100%",i.style.fontSize="14px",i.style.lineHeight="18px",i.style.width=(Assets.getWindowWidth()-40)/4-40+"px",i.style.color="#"+w.getAttribute("data-secondTextColor"),i.style.fontFamily="TheinhardtRegular",i.innerHTML=t.querySelector(".column-one").innerHTML;var n=document.createElement("div");n.style.position="absolute",n.style.width="100%",n.style.fontSize="14px",n.style.lineHeight="18px",n.style.marginTop="27px",n.style.left=(Assets.getWindowWidth()-40)/4+"px",n.style.width=(Assets.getWindowWidth()-40)/4-40+"px",n.style.color="#"+w.getAttribute("data-secondTextColor"),n.style.fontFamily="TheinhardtRegular",n.innerHTML=t.querySelector(".column-two").innerHTML,g._columnOne=i,g._columnTwo=n,g.appendChild(i),g.appendChild(n),u.appendChild(g)}(),function(){if((r=document.createElement("span")).style.position="absolute",r.style.display="block",w.getAttribute("data-link")&&""!=w.getAttribute("data-link")){var t=w.querySelector(".link-text");t&&""!==t.innerHTML?r.innerHTML=t.innerHTML:r.innerHTML=Assets.DATA_STATIC.querySelector("#visit-site").innerHTML,r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#"+w.getAttribute("data-secondTextColor");var e=w.getAttribute("data-link"),i=document.createElement("a");i.style.textDecoration="none",i.style.color="#"+w.getAttribute("data-linkColor"),i.setAttribute("href",e),i.setAttribute("target","_blank");var n=w.querySelector(".link-name");n&&""!==n.innerHTML?i.innerHTML="</br>"+n.innerHTML:i.innerHTML="</br>"+e,r.appendChild(i),u.appendChild(r)}}(),(h=new ArrowButton("down",G,"#"+w.getAttribute("data-arrowButtonColor"),!0,Assets.TRANSITIONS_MANAGER))._y=14,h.style.zIndex=4,u.appendChild(h),function(){(c=new SmartObject).style.position="absolute",c.style.width="46px",c.style.height="46px",c.style.borderRadius="23px",w.getAttribute("data-whiteOpt")?c.style.backgroundColor="#"+w.getAttribute("data-whiteOpt"):c.style.backgroundColor="#fff";c.style.zIndex=4,c.style.pointerEvents="all",c.style.overflow="hidden",c.style.cursor="pointer",c._y=16,c._rotation=0;if(w.getAttribute("data-whiteOpt"))var t=new SmartObject(AssetLoader.getAsset("assets/images/ui/dots-white@2.png"));else var t=new SmartObject(AssetLoader.getAsset("assets/images/ui/dots@2.png"));t._x=5.5,t._y=5.5,c.appendChild(t),c.addEventListener("click",Y),u.appendChild(c)}(),b.appendChild(u)}(),function(){for(var t=w.querySelector(".case-content").children,e=0;e<t.length;e++){var i,n=t[e].getAttribute("data-type");if("slideshow"===n)i=new CaseSlideshow(t[e],o),Assets.FIRST_PAGE_TRANSITION&&i.loadFirstSlide(),A.push(i),b.appendChild(i);else if("image"===n)i=new V(t[e]),C.push(i),b.appendChild(i);else if("video"===n||"inline-video"===n){if(!1===(i=new B(t[e],"inline-video"===n)))return;E.push(i),b.appendChild(i)}else if("calico-logo-generator"==n){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||"Explorer"==BrowserDetect.BROWSER_NAME)return;(i=new SmartObject).className+=" logo-generator";i.style.top=0,i.style.left=0,i.style.width=Assets.getWindowWidth()+"px",i.style.backgroundColor="#f4f4f4",i.style.height=Assets.getWindowWidth()*(300/520)+180+"px",(_=new CalicoLogoGenerator(t[e],300/520,i))._ratio=300/520,i.appendChild(_),_.init(),_.startRender(),v=i,b.appendChild(i)}0==e&&i,e==t.length-1&&i,O.push(i),i._order=e}}(),function(){q(),window.addEventListener("resize",q),Assets.LAYER_MID.appendChild(b),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(w.getAttribute("data-path")),i._x=40,i._y=40;var t,e=i._opacity=0;Assets.DELAY_CASE_IMAGES||(e=.7);TweenMax.to(i,Assets.PAGE_TRANSTION_SPEED,{_x:92,delay:e,ease:Expo.easeInOut,onComplete:function(){D=!0}}),TweenMax.to(i,.2,{_opacity:1,delay:e,ease:Linear.easeNone}),t=Assets.getWindowWidth()<520?Assets.getWindowHeight()-79:Assets.getWindowHeight()-260;BrowserDetect.MOBILE||BrowserDetect.TABLET?(u._y=t,n=!0):TweenMax.to(u,.5,{_y:t,ease:Expo.easeOut,delay:.5,onComplete:function(){n=!0}})}(),!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?Assets.LAYER_ALL.addEventListener("scroll",U):n=!0,0,(BrowserDetect.DESKTOP||Assets.FIRST_PAGE_TRANSITION)&&R()},b.pause=function(){},b.unpause=function(){},b.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},b.loadRest=function(){M<S.length&&R();for(var t=0,e=A.length;t<e;t++)A[t].loadFirstSlide()},b.showBackArrow=function(){TweenMax.to(i,.15,{_opacity:1,linear:Linear.easeNone})},b.hideBackArrow=function(){TweenMax.to(i,.15,{_opacity:0,linear:Linear.easeNone})},b.removeParallax=function(){Assets.LAYER_ALL.removeEventListener("scroll",U),U=function(){}},b.enableParallax=function(){e=!0},b.disableParallax=function(){e=!1},b.templateOut=function(){k=!0,i.removeEvents(),window.removeEventListener("resize",q),!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE&&Assets.LAYER_ALL.removeEventListener("scroll",U);for(var t=0;t<E.length;t++)E[t]._playBtn&&(E[t]._playBtn.removeEventListener("mouseover",N),E[t]._playBtn.removeEventListener("mouseout",F),E[t].removeEventListener("click",W));c.removeEventListener("click",Y),h.removeEvents(),Assets.TRANSITIONS_MANAGER.go(b,w,Q),TweenMax.to(i,Assets.PAGE_TRANSTION_SPEED,{_x:40,delay:0,ease:Expo.easeInOut}),TweenMax.to(i,.2,{_opacity:0,delay:Assets.PAGE_TRANSTION_SPEED-.3,ease:Linear.easeNone,onComplete:Z})},b}function AboutTemplate(t){var T,r,o,s,A,C,a,E,e,l,c,i=document.createElement("div"),S=t.getXML(),O=[],M=0,n=0,h=!1;function L(){n++,0==h&&n==M&&(TweenMax.to(T,.15,{_opacity:1,ease:Linear.easeNone}),h=!0)}function k(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function D(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function d(t){T.style.width=Assets.getWindowWidth()-40+"px";window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;r.resize(),Assets.getWindowWidth()<860?(s.style.top="150px",A.style.marginTop="400px",A.style.fontSize="28px",A.style.lineHeight="34px",s.style.fontSize="33px",s.style.lineHeight="36px"):(s.style.top="485px",A.style.marginTop="745px",A.style.fontSize="33px",A.style.lineHeight="39px",s.style.fontSize="36px",s.style.lineHeight="39px"),Assets.getWindowWidth()<1024?(o.style.fontSize="23px",o.style.lineHeight="28px",s.style.fontSize="23px",s.style.lineHeight="28px"):(o.style.fontSize="33px",o.style.lineHeight="39px",s.style.fontSize="36px",s.style.lineHeight="39px"),Assets.getWindowWidth()<860?(o.style.width=Assets.getWindowWidth()-80+"px",o.style.marginTop="300px"):Assets.getWindowWidth()<1488?(o.style.width=(Assets.getWindowWidth()-80)/4*3-80+"px",o.style.marginTop="0px"):(o.style.marginTop="0px",o.style.width="1100px"),Assets.getWindowWidth()<860?(o.style.position="relative",s.style.position="relative",o.style.left="20px",s.style.left="20px"):(o.style.position="absolute",s.style.position="absolute",s.style.left=(Assets.getWindowWidth()-40)/4+20+"px",o.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<1140?A.style.width=Assets.getWindowWidth()-40+"px":A.style.width=(Assets.getWindowWidth()-40)/4*3+"px";for(var e=0;e<O.length;e++){var i=O[e];if((e<5||"offices"==i._colName)&&(Assets.getWindowWidth()<640?(i.style.width=Assets.getWindowWidth()-80+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft="20px"),"awards"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft="20px")):Assets.getWindowWidth()<940?(i.style.width=(Assets.getWindowWidth()-40)/2-40+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft="20px"),"awards"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft=(Assets.getWindowWidth()-40)/2+"px")):Assets.getWindowWidth()<1140?(i.style.width=(Assets.getWindowWidth()-40)/3-40+"px",i.style.marginRight="0px","how-we-work"==i._colName&&(i.style.marginLeft=(Assets.getWindowWidth()-40)/3+"px"),"awards"==i._colName&&(i.style.marginLeft="20px"),"offices"==i._colName&&(i.style.marginLeft=(Assets.getWindowWidth()-40)/3*2-20+"px")):(Assets.getWindowWidth()<1250?(i.style.width=(Assets.getWindowWidth()-40)/4-20+"px",i.style.marginRight="0px"):(i.style.width=(Assets.getWindowWidth()-40)/4-40+"px",i.style.marginRight="20px"),"how-we-work"!=i._colName&&"offices"!=i._colName||(i.style.marginLeft=(Assets.getWindowWidth()-40)/4+20+"px"),"awards"==i._colName&&(i.style.marginLeft="20px"),"offices"==i._colName&&(i.style.marginLeft=Assets.getWindowWidth()/4*2+"px"))),Assets.getWindowWidth()<940?"who-we-are"==i._colName&&(i.style.marginTop="250px"):"who-we-are"==i._colName&&(i.style.marginTop="0px"),Assets.getWindowWidth()<640?"what-we-believe"==i._colName&&(i.style.marginTop="250px"):"what-we-believe"==i._colName&&(i.style.marginTop="0px"),"end-level-bosses"==i._colName){var n=i.getElementsByTagName("img")[0];Assets.getWindowWidth()<1488?i.style.width="200px":i.style.width="250px",Assets.getWindowWidth()<1140?(i.style.display="none",n.style.top=-n.clientHeight-15+"px",n.style.left="-30px"):(i.style.display="block",n.style.top=-n.clientHeight-15+"px",n.style.left="-30px",n.style.width=i.offsetWidth+30+"px")}}Assets.getWindowWidth()<530?(a.style.fontSize="55px",c.style.display="none"):Assets.getWindowWidth()<750?(a.style.fontSize="80px",c.style.display="none"):Assets.getWindowWidth()<1020?(a.style.fontSize="120px",c.style.display="none"):Assets.getWindowWidth()<1520?(a.style.fontSize="170px",c.style.display="none"):(a.style.fontSize="260px",c.style.display="block"),Assets.getWindowWidth()<640?(T.style.paddingBottom="50px",l.style.left="auto",l.style.right="20px"):(l.style.left=(Assets.getWindowWidth()-40)/4+20+"px",l.style.right="auto",T.style.paddingBottom="0px")}function u(){i.parentNode.removeChild(i)}return i.templateIn=function(){SmartObject(i),i.style.position="relative",i._allowOverflowReset=!0,_saveOverflow=Assets.LAYER_MID.style.overflow,i.style.background="#bac2bb",i.style.overflow="hidden",i.style.width="100%",i.style.height="auto",i.style.minHeight="100%",i.style.paddingBottom="20px",i.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,i.appendChild(t),(T=new SmartObject).style.position="relative",T.style.overflow="hidden",T.style.backgroundColor="rgb(175,182,176)",T.style.height="100%",T.style.borderBottom="20px solid rgb(186,194,187)",T.style.left="20px",T.style.top="20px",i.appendChild(T),r=new HMLogo,T.appendChild(r),(o=document.createElement("span")).style.display="block",o.style.position="absolute",o.style.fontSize="33px",o.style.lineHeight="39px",o.style.color="#555658",o.innerHTML=S.querySelector(".intro-text").innerHTML,o.style.top="32px",T.appendChild(o),function(){(s=document.createElement("div")).style.position="absolute",s.style.fontSize="36px",s.style.fontSize="39px",s.style.top="485px";for(var t=S.querySelector(".yay-monday"),e=0;e<2;e++){var i=document.createElement("span");i.style.display="block",i.innerHTML=t.getElementsByTagName("span")[e].innerHTML,i.style.color=0==e?"#fff":"#555658",s.appendChild(i)}T.appendChild(s)}(),function(){var t=S.querySelectorAll(".column");(A=document.createElement("div")).style.marginTop="745px",A.style.width=(Assets.getWindowWidth()-40)/4*3+"px",A.style.position="relative",T.appendChild(A);for(var e=0;e<t.length;e++){var i=t[e].getAttribute("data-title"),n=t[e].getAttribute("data-image"),r=document.createElement("div");if(r.style.position="absolute",r.style.display="inline-block",r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#555658",r.style.fontFamily="TheinhardtRegular",r._colName=i,r.innerHTML=t[e].innerHTML,e<3?r.style.width=(Assets.getWindowWidth()-40)/4-40+"px":e<5&&(r.style.width=(Assets.getWindowWidth()-40)/4-40+"px",r.style.marginTop="250px"),e<5?(r.style.position="relative",r.style.verticalAlign="top",r.style.marginLeft="how-we-work"==i?(Assets.getWindowWidth()-40)/4+20+"px":"20px",r.style.marginRight="20px",A.appendChild(r)):"end-level-bosses"==i?T.appendChild(r):"offices"==i&&(C=r),n){var o=document.createElement("img");o.style.position="absolute",o.style.left="end-level-bosses"==i?"-30px":"how-we-work"==i?"0px":"-12px",o.src=Assets.CDN_URL_SMALL+"assets/images/about/"+n,M++,r.appendChild(o),o.onload=function(){"end-level-bosses"==this.parentNode._colName?this.style.width=this.parentNode.offsetWidth+30+"px":this.style.width=this.clientWidth/2+"px",this.style.height="auto",this.style.top=-this.clientHeight-15+"px",L()}}if("end-level-bosses"==i){r.style.right="20px",r.style.top="745px",r.style.width="250px";var s=r.querySelector(".management");s.style.fontFamily="ClarendonLTStdBold",s.style.display="block",s.style.marginTop="30px",s.style.width="100%";for(var a=r.querySelectorAll(".name"),l=0;l<a.length;l++)a[l].style.fontFamily="ClarendonLTStdBold",a[l].style.display="block",a[l].style.width="100%",a[l].style.borderTop="1px solid #9ea4a1",a[l].style.paddingTop="8px";a[0].style.marginTop="8px";for(var c=r.querySelectorAll(".position"),h=0;h<c.length;h++)c[h].style.display="block",c[h].style.width="100%",c[h].style.paddingBottom="8px";var d=r.getElementsByTagName("p"),u=d[d.length-1];u.style.borderBottom="1px solid #9ea4a1",u.style.borderTop="1px solid #9ea4a1",u.style.paddingBottom="8px",u.style.paddingTop="8px"}else if("awards"==i){for(var p=r.querySelectorAll(".award"),f=0;f<p.length;f++){p[f].style.display="block",p[f].style.fontFamily="ClarendonLTStdBold",p[f].style.borderBottom="1px solid #9ea4a1",p[f].style.paddingBottom="8px",p[f].style.marginBottom="8px";var g=document.createElement("img"),m=p[f].getAttribute("data-ico");g.src=Assets.CDN_URL_SMALL+"assets/images/"+m,M++,g.style.verticalAlign="middle",g.style.cssFloat="right",g.style.marginRight="10px",p[f].appendChild(g),g.onload=function(){L(),this.style.width=this.clientWidth/2+"px",this.style.height="auto",this.style.marginTop=(18-this.clientHeight)/2+"px"}}p[0].style.borderTop="1px solid #9ea4a1",p[0].style.paddingTop="8px",p[0].style.marginTop="32px"}else if("offices"==i){r.style.position="relative",r.style.marginLeft=(Assets.getWindowWidth()-40)/4*2+20+"px",r.style.marginBottom="20px";for(var y=r.querySelectorAll(".office"),_=0;_<y.length;_++){y[_].style.borderBottom="1px solid #9ea4a1",y[_].style.paddingBottom="8px",y[_].style.marginTop="8px";var v=y[_].querySelector(".city");v.style.fontFamily="ClarendonLTStdBold",v.style.display="block"}var b=r.querySelector(".contact-link");b.style.fontFamily="ClarendonLTStdBold",b.style.fontSize="18px",b.style.lineHeight="20px",b.style.marginTop="60px",b.style.width="150px";var w=new SmartObject(b.getElementsByTagName("a")[0]);w.style.position="relative",w.style.color="#fff",w.style.textDecoration="none",w.addEventListener("mouseover",k),w.addEventListener("mouseout",D),E=w,y[0].style.borderTop="1px solid #9ea4a1",y[0].style.paddingTop="8px"}var x=r.querySelector(".title");x.style.fontFamily="ClarendonLTStdBold",x.style.display="block",x.style.marginBottom="3px",O.push(r)}}(),function(){(a=document.createElement("div")).innerHTML=S.querySelector(".contact-us").innerHTML,a.style.fontSize="260px",a.style.lineHeight="195px",a.style.marginBottom="40px",a.style.color="#555658",a.style.marginLeft="20px",a.style.clear="both",a.querySelector(".white").style.color="#fff",c=new SmartObject(document.createElement("img"));var t=S.querySelector(".contact-us").querySelector(".bob-cat").getAttribute("data-src");c.src=Assets.CDN_URL_SMALL+"assets/images/"+t,c.onload=function(){this.style.width=this.width/2+"px",this.style.height="auto",this._x=144,this._y=-this.height/2+20,a.appendChild(this)},T.appendChild(a),T.appendChild(C)}(),function(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;(e=document.createElement("a")).style.position="absolute",e.href="mailto:"+t,e.innerHTML=t,e.style.textDecoration="none",e.style.fontFamily="TheinhardtRegular",e.style.fontSize="12px",e.style.color="#717573",e.style.left="20px",e.style.bottom="20px",BrowserDetect.DESKTOP&&(e.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(e,.2,{opacity:.5,ease:Linear.easeNone})}),e.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(e,.2,{opacity:1,ease:Linear.easeNone})}));T.appendChild(e),(l=document.createElement("span")).style.position="absolute",l.innerHTML="&copy; Copyright "+(new Date).getFullYear(),l.style.fontFamily="TheinhardtRegular",l.style.fontSize="12px",l.style.color="#717573",l.style.left="20px",l.style.bottom="20px",T.appendChild(l)}(),d(),window.addEventListener("resize",d),Assets.LAYER_MID.appendChild(i),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(S.getAttribute("data-path"))},i.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},i.templateOut=function(){E.removeEventListener("mouseover",k),E.removeEventListener("mouseout",D),window.removeEventListener("resize",d),Assets.TRANSITIONS_MANAGER.go(i,S,u)},i}function ContactTemplate(t){var h,d,i,n,u,p,r,e,o,s=document.createElement("div"),f=t.getXML(),a=!1,g=[];function m(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function y(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function l(t){d=(Assets.getWindowWidth()-40)/4;window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;i.resize(),h.style.minHeight=Assets.getWindowHeight()-20+"px",Assets.getWindowWidth()<860?(n.style.width=Assets.getWindowWidth()-80+"px",n.style.marginTop="300px"):Assets.getWindowWidth()<1488?(n.style.width=(Assets.getWindowWidth()-40)/4*3-80+"px",n.style.marginTop="0px"):(n.style.marginTop="0px",n.style.width="1100px"),Assets.getWindowWidth()<1024||Assets.getWindowHeight()<860?(n.style.fontSize="23px",n.style.lineHeight="28px",u._title.style.fontSize="23px",u._title.style.lineHeight="28px",p._title.style.fontSize="23px",p._title.style.lineHeight="28px"):(n.style.fontSize="33px",n.style.lineHeight="39px",u._title.style.fontSize="33px",u._title.style.lineHeight="39px",p._title.style.fontSize="33px",p._title.style.lineHeight="39px"),Assets.getWindowWidth()<860?(n.style.position="relative",n.style.left="20px"):(n.style.position="absolute",n.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<580?(u.style.width=Assets.getWindowWidth()-80+"px",u.style.display="block",u.style.marginLeft="20px"):Assets.getWindowWidth()<860?(u.style.width=(Assets.getWindowWidth()-40)/2-20+"px",u.style.display="block",u.style.marginLeft=(Assets.getWindowWidth()-40)/2-20+"px"):(u.style.marginLeft=d+20+"px",u.style.width=u.style.width=d-20+"px",u.style.display="inline-block"),Assets.getWindowWidth()<860?r.style.maxWidth="180px":r.style.maxWidth="none",Assets.getWindowWidth()<580?r.style.display="none":r.style.display="block",Assets.getWindowWidth()<580?p.style.width=Assets.getWindowWidth()-80+"px":Assets.getWindowWidth()<860?p.style.width=(Assets.getWindowWidth()-40)/2-20+"px":p.style.width=d-20+"px",1==a&&(Assets.getWindowWidth()<860?r.style.width=(Assets.getWindowWidth()-40)/2-100+"px":Assets.getWindowWidth()<1240?r.style.width=d-20+"px":r.style.width=r._origW/2+"px",r.style.height="auto"),Assets.getWindowWidth()<860?(u.style.marginTop="120px",1==a&&(r.style.marginTop=n.offsetTop+n.offsetHeight+u.offsetHeight-r.clientHeight+80+"px")):1920<Assets.getWindowWidth()?(u.style.marginTop=h.offsetHeight-u.offsetHeight-170+"px",1==a&&(r.style.marginTop=h.offsetHeight-r.offsetHeight-170+"px")):(u.style.marginTop=h.offsetHeight-u.offsetHeight-120+"px",1==a&&(r.style.marginTop=h.offsetHeight-r.offsetHeight-120+"px")),Assets.getWindowHeight()<670?(u.style.marginTop=670-u.offsetHeight-120+"px",u.style.marginBottom="80px"):u.style.marginBottom="0px",Assets.getWindowWidth()<860?(p.style.display="block",p.style.marginTop="80px",p.style.height="auto",p.style.paddingBottom="65px",p.style.marginBottom="65px"):(p.style.display="inline-block",p.style.marginTop=u.offsetTop+"px",p.style.height=u.offsetHeight+"px",p.style.paddingBottom="0px",p.style.marginBottom="0px"),Assets.getWindowWidth()<640?(h.style.paddingBottom="50px",o.style.left="auto",o.style.right="20px"):(o.style.left=(Assets.getWindowWidth()-40)/4+20+"px",o.style.right="auto",h.style.paddingBottom="0px"),h.offsetHeight>Assets.getWindowHeight()-20?h.style.width=Assets.getWindowWidth()-40+"px":h.style.width=window.innerWidth-40+"px",s.style.width=window.innerWidth+"px"}function c(){s.parentNode.removeChild(s)}return s.templateIn=function(){SmartObject(s),s.style.position="relative",s._allowOverflowReset=!0,_saveOverflow=Assets.LAYER_MID.style.overflow,s.style.background="#bac2bb",s.style.width=Assets.getWindowWidth()+"px",s.style.height="auto",s.style.minHeight="100%",s.style.paddingBottom="20px",s.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,s.appendChild(t),(h=new SmartObject).style.position="relative",h.style.overflow="hidden",h.style.backgroundColor="rgb(175,182,176)",h.style.height="100%",h.style.minHeight=Assets.getWindowHeight()-20+"px",h.style.borderBottom="20px solid rgb(186,194,187)",h.style.left="20px",h.style.top="20px",setTimeout(function(){h.offsetHeight>Assets.getWindowHeight()-20?h.style.width=Assets.getWindowWidth()-40+"px":h.style.width=window.innerWidth-40+"px"},25),d=(Assets.getWindowWidth()-40)/4,s.appendChild(h),i=new HMLogo,h.appendChild(i),(n=document.createElement("span")).style.display="block",n.style.position="absolute",n.style.fontSize="33px",n.style.lineHeight="39px",n.style.color="#555658",n.innerHTML=f.querySelector(".intro-text").innerHTML,n.style.top="32px",h.appendChild(n),function(){var t=f.querySelector(".column-one");(u=document.createElement("div")).style.display="inline-block",u.style.width=d-20+"px",u.style.marginLeft=d+20+"px",u.style.verticalAlign="top";var e=document.createElement("span");e.innerHTML=t.querySelector(".title").innerHTML,e.style.display="block",e.style.fontSize="36px",e.style.lineHeight="39px",e.style.marginBottom="20px",e.style.color="#555658",e.querySelector(".white").style.color="#fff",e.querySelector(".white").style.display="block",u._title=e,u.appendChild(e);for(var i=t.querySelectorAll(".office"),n=0;n<i.length;n++){var r=document.createElement("span");r.style.display="block",r.innerHTML=i[n].innerHTML,r.style.fontFamily="TheinhardtRegular",r.style.fontSize="14px",r.style.lineHeight="18px",r.style.color="#555658",r.style.marginTop="11px";var o=r.querySelector(".city");o.style.fontFamily="ClarendonLTStdBold",o.style.display="block",o.style.marginBottom="3px",u.appendChild(r)}setTimeout(function(){Assets.getWindowWidth()<860?u.style.marginTop="120px":1920<Assets.getWindowWidth()?u.style.marginTop=h.offsetHeight-u.offsetHeight-170+"px":u.style.marginTop=h.offsetHeight-u.offsetHeight-120+"px"},20),h.appendChild(u)}(),function(){var t=f.querySelector(".column-two");(p=document.createElement("div")).style.display="inline-block",p.style.position="relative",p.style.width=d-20+"px",p.style.marginLeft="20px",p.style.verticalAlign="top";var e=document.createElement("span");e.innerHTML=t.querySelector(".title").innerHTML,e.style.display="block",e.style.fontSize="36px",e.style.lineHeight="39px",e.style.marginBottom="20px",e.style.color="#555658",e.querySelector(".white").style.color="#fff",e.querySelector(".white").style.display="block",p._title=e,p.appendChild(e);var i=document.createElement("div");i.style.fontSize="14px",i.style.lineHeight="18px",i.style.color="#555658",p.appendChild(i);var n=document.createElement("div");n.style.fontSize="14px",n.style.lineHeight="18px",n.style.color="#555658",n.style.position="relative",n.style.bottom=0,p._contact=n,p.appendChild(n);var r,o=Selector.getChildren(t,"contactLinks"),s=0,a=o.length;for(;s<a;s++){(r=document.createElement("div")).innerHTML=Selector.getHtml(o[s],"title"),r.style.display="block",n.appendChild(r);var l=new SmartObject(document.createElement("div"));l.style.position="relative",l.style.marginBottom=s<3?"18px":"10px",l.innerHTML=Selector.getHtml(o[s],"email"),l.style.fontFamily="TheinhardtRegular";var c=l.getElementsByTagName("a")[0];c.style.color="#fff",c.style.textDecoration="none",n.appendChild(l),l.addEventListener("mouseover",m),l.addEventListener("mouseout",y),g.push(l)}setTimeout(function(){Assets.getWindowWidth()<860?(p.style.marginTop="80px",p.style.height="auto",p.style.paddingBottom="65px",p.style.marginBottom="65px"):(p.style.marginTop=u.offsetTop+"px",p.style.height=u.offsetHeight+"px",p.style.paddingBottom="0px",p.style.marginBottom="0px")},25),h.appendChild(p)}(),(r=document.createElement("img")).style.position="absolute",r.style.zIndex=10,r.style.top=0,r.src=Assets.CDN_URL_SMALL+f.getAttribute("data-image"),r.onload=function(){this._origW=this.clientWidth,Assets.getWindowWidth()<860?r.style.maxWidth="180px":r.style.maxWidth="auto",Assets.getWindowWidth()<860?this.style.width=(Assets.getWindowWidth()-40)/2-100+"px":Assets.getWindowWidth()<1240?this.style.width=d+"px":this.style.width=this._origW/2+"px",this.style.height="auto",Assets.getWindowWidth()<860?r.style.marginTop=n.offsetTop+n.offsetHeight+u.offsetHeight-r.clientHeight+80+"px":1920<Assets.getWindowWidth()?r.style.marginTop=h.offsetHeight-r.offsetHeight-170+"px":r.style.marginTop=h.offsetHeight-r.offsetHeight-120+"px",a=!0,TweenMax.to(h,.15,{_opacity:1,ease:Linear.easeNone})},r.style.left="20px",h.appendChild(r),function(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;(e=document.createElement("a")).style.position="absolute",e.href="mailto:"+t,e.innerHTML=t,e.style.textDecoration="none",e.style.fontFamily="TheinhardtRegular",e.style.fontSize="12px",e.style.color="#717573",e.style.left="20px",e.style.bottom="20px",BrowserDetect.DESKTOP&&(e.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(e,.2,{opacity:.5,ease:Linear.easeNone})}),e.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(e,.2,{opacity:1,ease:Linear.easeNone})}));h.appendChild(e),(o=document.createElement("span")).style.position="absolute",o.innerHTML="&copy; Copyright "+(new Date).getFullYear(),o.style.fontFamily="TheinhardtRegular",o.style.fontSize="12px",o.style.color="#717573",o.style.left="20px",o.style.bottom="20px",h.appendChild(o)}(),l(),window.addEventListener("resize",l),Assets.LAYER_MID.appendChild(s),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(f.getAttribute("data-path"))},s.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},s.templateOut=function(){for(var t=0,e=g.length;t<e;t++)g[t].removeEventListener("mouseover",m),g[t].removeEventListener("mouseout",y);n.parentNode.removeChild(n),n=null,r.onload=null,r.src=null,r.parentNode.removeChild(r),r=null,h.removeChild(i),i.onclick=null,window.removeEventListener("resize",l),Assets.TRANSITIONS_MANAGER.go(s,f,c)},s}function PeopleTemplate(t){var h,e,i,n,d=document.createElement("div"),u=t.getXML(),_=[],a=0,v=334/496,b=3,w={},x=0;function r(){var t=Math.floor(Math.random()*_.length),e=_[t];if(e.personDir){var i=e.personDir,n=w[i],r=n[e.activeImage].image,o=["baby","teen","adult"],s=o.indexOf(e.activeImage);-1<s&&o.splice(s,1);var a=Math.floor(Math.random()*o.length);e.activeImage=o[a];var l=n[e.activeImage].image;TweenMax.to(r,.4,{css:{opacity:0},ease:Linear.easeNone}),TweenMax.to(l,.4,{css:{opacity:1},ease:Linear.easeNone})}}function T(t){i!=this&&(o(),TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.iconInSite,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),n=setTimeout(o,4e3),i=this)}function o(){i&&(TweenMax.to(i.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone}),TweenMax.to(i.iconInSite,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})),n&&(clearTimeout(n),n=null)}function A(t,e){var i=new SmartObject(document.createElement("img"));return i.style.width="100%",i.style.opacity=0,i}function C(t){TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone})}function E(t){TweenMax.to(this.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone})}function s(t){b=Assets.getWindowWidth()<700?1:Assets.getWindowWidth()<1400?2:Assets.getWindowWidth()<2100?3:4;for(var e=Math.round(Assets.getWindowWidth()/b),i=Math.round(e*v),n=0,r="#aeb6af",o="#aeb6af",s=0;s<_.length;s++){var a,l=_[s];if(l.style.width=e+"px",l.style.height=i+"px",l._x=e*(s%b),l.hoverBlock){l.hoverBlock.style.width=e-40+"px",l.hoverBlock.style.height=i-40+"px";var c=l.hoverBlock.personName;Assets.getWindowWidth()<700?(c.style.fontSize="18px",c.style.lineHeight="24px"):Assets.getWindowWidth()<900?(c.style.fontSize="19px",c.style.lineHeight="25px"):(c.style.fontSize="25px",c.style.lineHeight="31px"),BrowserDetect.MOBILE||BrowserDetect.TABLET?l.hoverBlock.textWrap._y=i-56-l.hoverBlock.textWrap._getHeight()-50:l.hoverBlock.textWrap._y=i-56-l.hoverBlock.textWrap._getHeight()}s%b==0&&n++,s%b==0?r=a="#aeb6af"==r?"#bac1ba":"#aeb6af":a="#aeb6af"==o?"#bac1ba":"#aeb6af",o=l.style.backgroundColor=a,l._y=i*(n-1)}h.style.width=2*e+"px",h.style.height=i+"px",h._x=_[_.length-1]._x+e,h._y=_[_.length-1]._y,h.smallHeadline._x=e,h.copy._x=e,h.style.display=4==b?"block":"none",Assets.getWindowWidth()<2100&&Assets.getWindowWidth(),d.style.height=i*n+"px"}function l(){window.removeEventListener("resize",s),d.parentNode.removeChild(d)}return d.templateIn=function(){SmartObject(d),d._allowOverflowReset=!0,d.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,d.style.background="#bac2bb",d.style.overflow="hidden",d.style.width="100%",d.style.height="auto",d.style.minHeight="100%",d.style.paddingBottom="22px",d.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,d.appendChild(t),function(){var t=Assets.getWindowWidth()/b,e=0,i="#aeb6af",n="#aeb6af";a=u.querySelector('[data-id="employee-list"]').children.length;for(var r=0;r<a;r++){var o,s=new SmartObject;s.style.width=t+"px",s.style.height=t*v+"px",s.style.overflow="hidden",s._x=t*(r%b),r%b==0&&e++,r%b==0?i=o="#aeb6af"==i?"#bac1ba":"#aeb6af":o="#aeb6af"==n?"#bac1ba":"#aeb6af",s.style.backgroundColor=o,n=o,s._y=t*v*(e-1),_.push(s),d.appendChild(s)}d.style.height=t*v*e+"px"}(),function(){h=new SmartObject;var t=Assets.getWindowWidth()/b;h.style.backgroundColor="#AFB6B0",h.style.width=2*t+"px",h.style.height=t*v+"px",h.style.overflow="hidden",h.style.border="20px solid #BAC3BB";var e=new SmartObject;e.style.position="absolute",e.innerHTML="Looking for more",e.style.fontSize="14px",e.style.top="20px",e.style.color="#fff";var i=new SmartObject;i.style.width="45px",i.style.height="1px",i.style.position="absolute",i.style.top="11px",i.style.right="-44px",i.style.backgroundColor="#fff",e.appendChild(i);var n=SmartObject(document.createElement("a"));n.style.position="absolute",n.innerHTML="<span style='color:#fff;'>It's a wrap<br /></span><span style='color:#4E4F51;'>Want to create<br />great things<br />with us?<br /></span><span style='color:#fff;'>hello@hellomonday.com</span>",n.style.fontSize="14px",n.style.bottom="20px",n.style.color="#fff",n.style.fontSize="20px",n.style.lineHeight="25px",n.style.cursor="pointer",n.setAttribute("href","mailto:hello@hellomonday.com"),n.className="itsAwrapLink",h.smallHeadline=e,h.copy=n,h.appendChild(e),h.appendChild(n),d.appendChild(h)}(),function(){var t=u.querySelector('[data-id="employee-list"]'),e=[],i=0,n=t.children.length;for(;i<n;i++){var r=t.children[i];e.push(r)}!function(t){var e=t.length;if(0==e)return;for(;--e;){var i=Math.floor(Math.random()*(e+1)),n=t[e],r=t[i];t[e]=r,t[i]=n}}(e);for(var o=0;o<e.length;o++){var s=e[o],a=s.getAttribute("data-name"),l=s.getAttribute("data-email"),c=s.getAttribute("data-dir"),h=s.getAttribute("data-city"),d={};d.name=a,d.email=l,d.dir=c,d.city=h,d.baby={},d.teen={},d.adult={},d.baby.image=null,d.baby.path=c+"/"+a+"-baby.jpg",d.baby.loaded=!1,d.teen.image=null,d.teen.path=c+"/"+a+"-teen.jpg",d.teen.loaded=!1,d.adult.image=null,d.adult.path=c+"/"+a+"-adult.jpg",d.adult.loaded=!1,w[c]=d}}(),function e(){var t=Assets.getWindowWidth()/b;var i=t*v;var n=["baby","teen","adult"];var r=0;var o="";for(var s in w){if(r==x){o=s;break}r++}var a=0;var l=function(t){this.parentNode&&(this._y=(this.parentNode.clientHeight-this.clientHeight)/2),!0===this.initialImage&&(TweenMax.to(this,.3,{css:{opacity:1},ease:Linear.easeNone}),(BrowserDetect.MOBILE||BrowserDetect.TABLET)&&TweenMax.to(this.icon,.3,{css:{opacity:1},ease:Linear.easeNone})),3==++a&&++x<_.length&&e()};var c=_[x];var h=w[o];var d=A(h,n[0]);var u=A(h,n[1]);var p=A(h,n[2]);d.onload=l;u.onload=l;p.onload=l;d.src=Assets.CDN_URL_SMALL+"assets/images/people/"+h.baby.path;u.src=Assets.CDN_URL_SMALL+"assets/images/people/"+h.teen.path;p.src=Assets.CDN_URL_SMALL+"assets/images/people/"+h.adult.path;h[n[0]].image=d;h[n[1]].image=u;h[n[2]].image=p;var f=function(t,e,i){var n=new SmartObject;n.style.width=e-40+"px",n.style.height=i-40+"px",n.style.backgroundColor="rgba(175,182,176,.9)",n.style.pointerEvents="none",n.style.top=0,n.style.left=0,n._opacity=0,n._x=20,n._y=20;var r=new SmartObject;r.style.position="relative",r._x=20,r.style.width=e-80+"px",n.textWrap=r;var o=document.createElement("span");o.style.display="block",o.style.textTransform="capitalize",o.style.width="100%",o.style.color="#555658",o.innerHTML=t.name,Assets.getWindowWidth()<700?(o.style.fontSize="18px",o.style.lineHeight="24px"):Assets.getWindowWidth()<900?(o.style.fontSize="19px",o.style.lineHeight="25px"):(o.style.fontSize="25px",o.style.lineHeight="31px");n.personName=o,r.appendChild(o);var s=document.createElement("span");s.style.display="inline-block",s.style.fontSize="14px",s.style.color="#fff",s.style.textTransform="capitalize",s.innerHTML=t.city,r.appendChild(s),n.appendChild(r),BrowserDetect.MOBILE||BrowserDetect.TABLET?r._y=i-56-r._getHeight()-50:r._y=i-56-r._getHeight();return n}(h,t,i);c.hoverBlock=f;var g=Math.floor(3*Math.random());h[n[g]].image.initialImage=!0;c.personDir=h.dir;c.activeImage=n[g];c.appendChild(d);c.appendChild(u);c.appendChild(p);c.appendChild(f);if(BrowserDetect.MOBILE||BrowserDetect.TABLET){var m=new SmartObject;m.style.marginTop="20px",m.style.display="block",m.style.width="35px",m.style.height="35px",m.style.borderRadius="100%",m.style.cursor="pointer",m.style.background="#fff",m.style.left="40px",m.style.bottom="40px",m._opacity=0;var y=AssetLoader.getAsset("assets/images/ui/dots@2.png");m.appendChild(y),c.appendChild(m),c.icon=m,c.iconInSite=y,m.hoverBlock=f,m.iconInSite=y,h[n[g]].image.icon=m,c.addEventListener("click",T)}c.addEventListener(MouseEvent.MOUSE_OVER,C);c.addEventListener(MouseEvent.MOUSE_OUT,E)}(),e=setInterval(r,1e3),s(),window.addEventListener(Event.RESIZE,s),Assets.LAYER_MID.appendChild(d),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(u.getAttribute("data-path"))},d.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},d.templateOut=function(){if(clearInterval(e),e=null,BrowserDetect.MOBILE||BrowserDetect.TABLET){for(var t=0;t<_.length;t++)_[t].removeEventListener("click",T);n&&(clearTimeout(n),n=null)}Assets.TRANSITIONS_MANAGER.go(d,u,l)},d}function AwardsTemplate(t){var u,_,l,c,h,e,d,p=document.createElement("div"),f=t.getXML(),g=[];function m(t,e){var i=document.createElement("div");i.style.position="relative",i.style.width=Assets.getWindowWidth()-40-_-40+"px";var n=(Assets.getWindowWidth()-40-_-40)/4,r=t.querySelectorAll(".award-wrap");e._awardArr=[];for(var o=0;o<r.length;o++){var s=new SmartObject;s.style.position="relative",s.style.width="100%",s.style.height="auto",s.style.marginLeft=_+"px",s.style.borderBottom="1px solid #9ea4a1";var a=document.createElement("span");a.style.display="inline-block",a.style.verticalAlign="top",a.style.color="#5e6061",a.style.fontSize="14px",a.style.lineHeight="18px",a.style.marginTop="4px",a.style.marginBottom="3px",a.style.fontFamily="TheinhardtRegular",a.innerHTML=r[o].querySelector(".client").innerHTML,a.style.width=n-50+"px",a.style.paddingRight="20px",s.appendChild(a),s._client=a;var l=document.createElement("span");l.style.display="inline-block",l.style.verticalAlign="top",l.style.color="#5e6061",l.style.fontSize="14px",l.style.lineHeight="18px",l.style.marginTop="4px",l.style.marginBottom="3px",l.style.fontFamily="TheinhardtRegular",l.innerHTML=r[o].querySelector(".project").innerHTML;var c=r[o].querySelector(".project").getAttribute("data-project-link");c&&(s._projectLink=c,s.style.cursor="pointer",s.addEventListener("click",v),BrowserDetect.MOBILE||BrowserDetect.TABLET||(s.addEventListener("mouseover",b),s.addEventListener("mouseout",w))),l.style.width=n-20+40+"px",l.style.paddingRight="20px",s.appendChild(l),s._project=l;var h=document.createElement("span");h.style.display="inline-block",h.style.verticalAlign="top",h.style.color="#5e6061",h.style.fontSize="14px",h.style.lineHeight="18px",h.style.marginTop="4px",h.style.marginBottom="3px",h.style.fontFamily="TheinhardtRegular",h.innerHTML=r[o].querySelector(".award").innerHTML,h.style.width=n-20+80+"px",h.style.paddingRight="20px",s.appendChild(h),s._award=h;var d=document.createElement("span");d.style.display="inline-block",d.style.verticalAlign="top",d.style.color="#5e6061",d.style.fontSize="14px",d.style.lineHeight="18px",d.style.marginTop="4px",d.style.marginBottom="3px",d.style.fontFamily="TheinhardtRegular",d.innerHTML=r[o].querySelector(".contest").innerHTML,d.style.width=n-50+"px",s.appendChild(d),s._contest=d;var u=r[o].getAttribute("data-highlightImage"),p=r[o].getAttribute("data-highlightText");if(u&&p){a.style.fontFamily="TheinhardtBold",l.style.fontFamily="TheinhardtBold",h.style.fontFamily="TheinhardtBold",d.style.fontFamily="TheinhardtBold",s.style.borderBottom="1px solid #c7ccc7";var f=document.createElement("div");f.style.position="absolute",f.style.width=_+"px",f.style.left=-_+"px",f.style.height="1px",f.style.backgroundColor="#c7ccc7",s.appendChild(f),s._highlightLine=f;var g=document.createElement("img");g.src=Assets.CDN_URL_SMALL+u;var m=r[o].getAttribute("data-xy");m=m.split(","),g._xPos=parseInt(m[0]),g._yPos=parseInt(m[1]),(s._highlightImg=g).onload=function(){g.style.width=g.clientWidth/2+"px",g.style.height="auto",g.style.top=-g.clientHeight-g._yPos+"px",g.style.left=-_+g.clientWidth/2-g._xPos+"px"},g.style.position="absolute",g.style.zIndex=3,s.appendChild(g);var y=document.createElement("span");y.innerHTML=p,y.style.position="absolute",y.style.fontSize="44px",y.style.lineHeight="45px",y.style.display="block",y.style.zIndex=2,y.style.left=-_+"px",y.style.width=_+"px",setTimeout(function(){y.style.top=10-y.clientHeight+"px"},20),y.style.color="#fff",s.appendChild(y),s._highlightText=y}i.appendChild(s),e._awardArr.push(s)}return i}function v(t){ContentManager.path(this._projectLink)}function b(t){TweenMax.to(this,.2,{_opacity:.6,ease:Linear.easeNone})}function w(t){TweenMax.to(this,.2,{_opacity:1,ease:Linear.easeNone})}function i(t){_=(Assets.getWindowWidth()-40)/4;window.innerWidth;window.innerHeight<window.innerWidth&&window.innerHeight;window.innerWidth<900||window.innerHeight;l.resize(),u.style.width=Assets.getWindowWidth()-40+"px",u.style.minHeight=Assets.getWindowHeight()-20+"px";for(var e=0;e<g.length;e++)for(var i=0;i<g[e]._awardArr.length;i++){var n=g[e]._awardArr[i];if(Assets.getWindowWidth()<480?(n._client.style.fontSize="12px",n._client.style.lineHeight="14px",n._project.style.fontSize="12px",n._project.style.lineHeight="14px",n._award.style.fontSize="12px",n._award.style.lineHeight="14px",n._contest.style.fontSize="12px",n._contest.style.lineHeight="14px"):(n._client.style.fontSize="14px",n._client.style.lineHeight="18px",n._project.style.fontSize="14px",n._project.style.lineHeight="18px",n._award.style.fontSize="14px",n._award.style.lineHeight="18px",n._contest.style.fontSize="14px",n._contest.style.lineHeight="18px"),1==BrowserDetect.MOBILE&&-1<n._project.innerHTML.indexOf(".com")){var r=n._project.innerHTML.split(".com");n._project.innerHTML=r[0]+"</br>.com"}}if(Assets.getWindowWidth()<860?(c.style.width=Assets.getWindowWidth()-80+"px",c.style.marginTop="300px"):Assets.getWindowWidth()<1488?(c.style.width=(Assets.getWindowWidth()-40)/4*3-80+"px",c.style.marginTop="0px"):(c.style.marginTop="0px",c.style.width="1100px"),Assets.getWindowWidth()<1024||Assets.getWindowHeight()<860?(c.style.fontSize="23px",c.style.lineHeight="28px",h.style.fontSize="23px",h.style.lineHeight="28px"):(c.style.fontSize="33px",c.style.lineHeight="39px",h.style.fontSize="33px",h.style.lineHeight="39px"),Assets.getWindowWidth()<860?h.style.marginTop="120px":h.style.marginTop="480px",Assets.getWindowWidth()<860?(c.style.position="relative",c.style.left="20px"):(c.style.position="absolute",c.style.left=(Assets.getWindowWidth()-40)/4+20+"px"),Assets.getWindowWidth()<640?(u.style.paddingBottom="50px",d.style.left="auto",d.style.right="20px"):(d.style.left=(Assets.getWindowWidth()-40)/4+20+"px",d.style.right="auto",u.style.paddingBottom="0px"),Assets.getWindowWidth()<860){h.style.marginLeft="20px";for(var o=0;o<g.length;o++){g[o].style.width=Assets.getWindowWidth()-80+"px",g[o]._yearTag.style.width="auto",g[o]._yearTag.style.display="block",g[o]._yearTag.style.marginBottom="36px",g[o]._yearTag.style.opacity=0,g[o]._yearTitle.style.fontSize="30px",g[o]._yearTitle.style.top="10px";var s=(Assets.getWindowWidth()-40)/3;g[o]._clientTag.style.width=s-50+"px",g[o]._clientTag.style.display="none",g[o]._projectTag.style.width=s-20+20+"px",g[o]._awardTag.style.width=s-20+20+"px",g[o]._contestTag.style.width=s-20-50+"px",g[o]._awardList.style.width=Assets.getWindowWidth()-40-40+"px";for(var a=0;a<g[o]._awardArr.length;a++){(n=g[o]._awardArr[a]).style.marginLeft="0px",n._client.style.width=s-50+"px",n._client.style.display="none",n._project.style.width=s-20+20+"px",n._award.style.width=s-20+20+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtRegular",n._project.style.fontFamily="TheinhardtRegular",n._award.style.fontFamily="TheinhardtRegular",n._contest.style.fontFamily="TheinhardtRegular",n._highlightLine.style.display="none",n._highlightImg.style.visibility="hidden",n._highlightText.style.visibility="hidden")}}}else if(Assets.getWindowWidth()<1200){h.style.marginLeft="20px";for(o=0;o<g.length;o++){g[o].style.width=Assets.getWindowWidth()-80+"px",g[o]._yearTag.style.width="auto",g[o]._yearTag.style.display="block",g[o]._yearTag.style.marginBottom="60px",g[o]._yearTag.style.opacity=0,g[o]._yearTitle.style.fontSize="50px",g[o]._yearTitle.style.top="10px";s=(Assets.getWindowWidth()-40)/4;g[o]._clientTag.style.width=s-50+"px",g[o]._projectTag.style.width=s-20+40+"px",g[o]._awardTag.style.width=s-20+80+"px",g[o]._contestTag.style.width=s-20-50+"px",g[o]._awardList.style.width=Assets.getWindowWidth()-40-40+"px";for(a=0;a<g[o]._awardArr.length;a++){(n=g[o]._awardArr[a]).style.marginLeft="0px",n._client.style.width=s-50+"px",n._project.style.width=s-20+40+"px",n._award.style.width=s-20+80+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtRegular",n._project.style.fontFamily="TheinhardtRegular",n._award.style.fontFamily="TheinhardtRegular",n._contest.style.fontFamily="TheinhardtRegular",n._highlightLine.style.display="none",n._highlightImg.style.visibility="hidden",n._highlightText.style.visibility="hidden",n._highlightLine.style.width=_+"px",n._highlightLine.style.left=-_+"px")}}}else{h.style.marginLeft=_+20+"px";for(o=0;o<g.length;o++){g[o].style.width=Assets.getWindowWidth()-80+"px",g[o]._yearTag.style.width=_+"px",g[o]._yearTag.style.display="inline-block",g[o]._yearTag.style.marginBottom="0px",g[o]._yearTag.style.opacity=1,g[o]._yearTitle.style.fontSize="60px",g[o]._yearTitle.style.top="27px";s=(Assets.getWindowWidth()-40-_-40)/4;g[o]._clientTag.style.width=s-50+"px",g[o]._projectTag.style.width=s-20+40+"px",g[o]._awardTag.style.width=s-20+80+"px",g[o]._contestTag.style.width=s-20-50+"px",g[o]._awardList.style.width=Assets.getWindowWidth()-40-_-40+"px";for(a=0;a<g[o]._awardArr.length;a++){(n=g[o]._awardArr[a]).style.marginLeft=_+"px",n._client.style.width=s-50+"px",n._project.style.width=s-20+40+"px",n._award.style.width=s-20+80+"px",n._contest.style.width=s-20-50+"px",n._highlightLine&&(n._client.style.fontFamily="TheinhardtBold",n._project.style.fontFamily="TheinhardtBold",n._award.style.fontFamily="TheinhardtBold",n._contest.style.fontFamily="TheinhardtBold",n._highlightLine.style.display="block",n._highlightImg.style.visibility="visible",n._highlightText.style.visibility="visible",n._highlightLine.style.width=_+"px",n._highlightLine.style.left=-_+"px",0<n._highlightImg.clientHeight&&(n._highlightImg.style.left=-_+n._highlightImg.clientWidth/2-n._highlightImg._xPos+"px"),0<n._highlightText.clientHeight&&(n._highlightText.style.top=10-n._highlightText.clientHeight+"px"),n._highlightText.style.left=-_+"px",n._highlightText.style.width=_+"px")}}}p.style.width=Assets.getWindowWidth()+"px"}function n(){for(var t=0;t<g.length;t++)for(var e=0;e<g[t]._awardArr.length;e++)g[t]._awardArr[e]._projectLink&&(g[t]._awardArr[e].removeEventListener("click",v),BrowserDetect.MOBILE||BrowserDetect.TABLET||(g[t]._awardArr[e].removeEventListener("mouseover",b),g[t]._awardArr[e].removeEventListener("mouseout",w)));p.parentNode.removeChild(p)}return p.templateIn=function(){SmartObject(p),p._allowOverflowReset=!0,p.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,p.style.background="#bac2bb",p.style.overflow="hidden",p.style.width="100%",p.style.height="auto",p.style.minHeight="100%",p.style.paddingBottom="22px",p.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,p.appendChild(t),(u=document.createElement("div")).style.position="relative",u.style.overflow="hidden",u.style.backgroundColor="rgb(175,182,176)",u.style.height="100%",u.style.minHeight=Assets.getWindowHeight()-20+"px",u.style.borderBottom="20px solid rgb(186,194,187)",u.style.left="20px",u.style.top="20px",_=(Assets.getWindowWidth()-40)/4,p.appendChild(u),l=new HMLogo,u.appendChild(l),(c=document.createElement("span")).style.display="block",c.style.position="absolute",c.style.fontSize="33px",c.style.lineHeight="39px",c.style.color="#555658",c.innerHTML=f.querySelector(".intro-text").innerHTML,c.style.top="32px",u.appendChild(c),function(){(h=document.createElement("span")).style.display="block",h.innerHTML=f.querySelector(".page-title").innerHTML,h.style.marginTop="480px",h.style.fontSize="33px",h.style.lineHeight="39px",h.style.color="#555658",h.style.marginLeft=_+20+"px",h.style.marginBottom="35px";var t=h.querySelector(".white");t.style.display="block",t.style.color="#fff",u.appendChild(h)}(),function(){for(var t=f.querySelectorAll(".year"),e=0;e<t.length;e++){var i=document.createElement("div");i.style.width=Assets.getWindowWidth()-80+"px",i.style.position="relative",i.style.marginLeft="20px",e==t.length-1?i.style.marginBottom="140px":i.style.marginBottom="40px";var n=document.createElement("span");n.style.fontSize="14px",n.style.display="inline-block",n.style.color="#fff",n.style.width=_+"px",n.style.paddingRight="20px",n.innerHTML=Assets.DATA_STATIC.querySelector("#year").innerHTML,i.appendChild(n),i._yearTag=n;var r=(Assets.getWindowWidth()-40-_-40)/4,o=document.createElement("span");o.style.fontSize="14px",o.style.display="inline-block",o.style.color="#fff",o.style.width=r-50+"px",o.style.paddingRight="20px",o.innerHTML=Assets.DATA_STATIC.querySelector("#client").innerHTML,i.appendChild(o),i._clientTag=o;var s=document.createElement("span");s.style.fontSize="14px",s.style.display="inline-block",s.style.color="#fff",s.style.width=r-20+40+"px",s.style.paddingRight="20px",s.innerHTML=Assets.DATA_STATIC.querySelector("#project").innerHTML,i.appendChild(s),i._projectTag=s;var a=document.createElement("span");a.style.fontSize="14px",a.style.display="inline-block",a.style.color="#fff",a.style.width=r-20+80+"px",a.style.paddingRight="20px",a.innerHTML=Assets.DATA_STATIC.querySelector("#award").innerHTML,i.appendChild(a),i._awardTag=a;var l=document.createElement("span");l.style.fontSize="14px",l.style.display="inline-block",l.style.color="#fff",l.style.width=r-20-50+"px",l.innerHTML=Assets.DATA_STATIC.querySelector("#contest").innerHTML,i.appendChild(l),i._contestTag=l;var c=document.createElement("div");c.style.width="100%",c.style.marginTop="7px",c.style.marginBottom="7px",c.style.height="1px",c.style.backgroundColor="#9ea4a1",i.appendChild(c);var h=document.createElement("span");h.style.position="absolute",h.innerHTML=t[e].getAttribute("data-year"),h.style.color="#555658",h.style.fontSize="60px",h.style.left=0,h.style.top="27px",i._yearTitle=h,i.appendChild(h);var d=new m(t[e],i);i._awardList=d,i.appendChild(d),g.push(i),u.appendChild(i)}}(),function(){var t=Assets.DATA_STATIC.querySelector("#email").innerHTML;(e=document.createElement("a")).style.position="absolute",e.href="mailto:"+t,e.innerHTML=t,e.style.textDecoration="none",e.style.fontFamily="TheinhardtRegular",e.style.fontSize="12px",e.style.color="#717573",e.style.left="20px",e.style.bottom="20px",BrowserDetect.DESKTOP&&(e.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(e,.2,{opacity:.5,ease:Linear.easeNone})}),e.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(e,.2,{opacity:1,ease:Linear.easeNone})}));u.appendChild(e),(d=document.createElement("span")).style.position="absolute",d.innerHTML="&copy; Copyright "+(new Date).getFullYear(),d.style.fontFamily="TheinhardtRegular",d.style.fontSize="12px",d.style.color="#717573",d.style.left="20px",d.style.bottom="20px",u.appendChild(d)}(),i(),window.addEventListener("resize",i),Assets.LAYER_MID.appendChild(p),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(f.getAttribute("data-path"))},p.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},p.templateOut=function(){window.removeEventListener("resize",i),Assets.TRANSITIONS_MANAGER.go(p,f,n)},p}function CultureTemplate(t){var A,C,i,e,n,u=document.createElement("div"),r=t.getXML(),E=[],p=334/496,f=3,S=0,O=0,M=0,o=!1,s=!1,a=!1,L=5,k=[];function D(){var t,e,i,n;if(M!=E.length)if(M%L==0&&0!==M&&C[O]){var r=C[w=O].text,o=C[w].user.screen_name;o=String(o),x=(T=(x=C[w].created_at).split(" "))[1]+" "+T[2]+", "+T[5];var s=E[M].offsetWidth,a=E[M].offsetHeight,l=new B(E[M],r,o,x,s,a);E[M]._tweet=l,E[M].style.backgroundColor="#bac1ba",E[M].appendChild(l),setTimeout(function(){TweenMax.to(l,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),O++,M++,D()},100)}else if(A&&A[S]){for(var c=A[w=S].caption.text,h=(o=A[w].user.username,!1),d=0;d<k.length;d++)k[d]==o&&(h=!0);if(0==h)return S++,void D();var u,p,f=(new Date).setTime(1e3*A[w].created_time),g=new Date,m=(t=864e5,e=2592e6,i=31536e6,(n=g-f)<6e4?1==Math.round(n/1e3)?Math.round(n/1e3)+" second ago":Math.round(n/1e3)+" seconds ago":n<36e5?1==Math.round(n/6e4)?Math.round(n/6e4)+" minute ago":Math.round(n/6e4)+" minutes ago":n<t?1==Math.round(n/36e5)?Math.round(n/36e5)+" hour ago":Math.round(n/36e5)+" hours ago":n<e?1==Math.round(n/t)?Math.round(n/t)+" day ago":Math.round(n/t)+" days ago":n<i?1==Math.round(n/e)?Math.round(n/e)+" month ago":Math.round(n/e)+" months ago":1==Math.round(n/i)?Math.round(n/i)+" year ago":Math.round(n/i)+" years ago");if("video"==A[w].type){var y=-1<navigator.userAgent.toLowerCase().indexOf("android"),_=!1,v=document.createElement("video");v.canPlayType&&v.canPlayType("video/mp4").replace(/no/,"")&&(_=!0),"Firefox"==BrowserDetect.BROWSER_NAME&&BrowserDetect.BROWSER_VERSION<=34?(u=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?A[w].images.standard_resolution:A[w].images.low_resolution,p="image"):1==y?(u=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?A[w].images.standard_resolution:A[w].images.low_resolution,p="image"):0==_?(u=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?A[w].images.standard_resolution:A[w].images.low_resolution,p="image"):((u=A[w].videos.low_resolution)._image=A[w].images.standard_resolution,p="video")}else u=!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?A[w].images.standard_resolution:A[w].images.low_resolution,p="image";s=E[M].offsetWidth,a=E[M].offsetHeight;var b=new I(E[M],c,o,m,u,p,s,a);E[M]._insta=b,E[M].appendChild(b),b._loadImg.onload=function(){TweenMax.to(b,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),M++,S++,D()}}else if(C[O]){var w,x,T;r=C[w=O].text,o=C[w].user.screen_name;o=String(o),x=(T=(x=C[w].created_at).split(" "))[1]+" "+T[2]+", "+T[5];s=E[M].offsetWidth,a=E[M].offsetHeight,l=new B(E[M],r,o,x,s,a);E[M]._tweet=l,E[M].style.backgroundColor="#bac1ba",E[M].appendChild(l),setTimeout(function(){TweenMax.to(l,.3,{_opacity:1,ease:Linear.easeNone,delay:.2}),O++,M++,D()},100)}}function I(t,e,i,n,r,o,s,a){var l,c=new SmartObject;if(c._opacity=0,c.style.width="100%",c.style.height="100%",c.style.pointerEvents="all","video"==o){var h=document.createElement("video");h.src=r.url,h.loop=!0,h.muted=!0,h.style.width="100%",h.style.height="auto",h.style.marginTop=-a/4+"px",c._vid=h,l=r._image.url,c.style.backgroundImage="url("+l+")",c.style.backgroundSize="cover",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center center",c.style.overflow="hidden",h.oncanplay=function(){this.play()},c.appendChild(h)}else l=r.url,c.style.backgroundImage="url("+l+")",c.style.backgroundSize="cover",c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center center";var d=new SmartObject;d.style.width=s-40+"px",d.style.height=a-40+"px",d.style.backgroundColor="rgba(175,182,176,.9)",d.style.pointerEvents="none",d.style.top=0,d.style.left=0,d._opacity=0,d._x=20,d._y=20;var u=new SmartObject;u.style.position="relative",u._x=20,u.style.width=s-80+"px",d._textWrap=u;var p=document.createElement("span");if(p.style.display="block",p.style.width="100%",1==BrowserDetect.MOBILE?(p.style.fontSize="18px",p.style.lineHeight="20px"):Assets.getWindowWidth()<480?(p.style.fontSize="18px",p.style.lineHeight="20px"):Assets.getWindowWidth()<820&&700<Assets.getWindowWidth()?(p.style.fontSize="20px",p.style.lineHeight="22px"):(p.style.fontSize="25px",p.style.lineHeight="27px"),p.style.marginBottom="6px",p.style.color="#555658",-1<e.indexOf("#")||-1<e.indexOf("@"))for(var f=e.split(" "),g=0;g<f.length;g++)if(-1<f[g].indexOf("#")){var m=document.createElement("span");m.style.color="#fff",m.innerHTML=f[g]+" ",p.appendChild(m)}else if(-1<f[g].indexOf("@")){var y=document.createElement("span");y.style.color="#fff",y.innerHTML=f[g]+" ",p.appendChild(y)}else p.innerHTML+=f[g]+" ";else p.innerHTML=e;d._caption=p,u.appendChild(p);var _=document.createElement("span");_.style.display="inline-block",_.style.fontSize="14px",_.style.color="#fff",_.innerHTML="@"+i,u.appendChild(_);var v=document.createElement("span");v.style.display="inline-block",v.style.fontSize="14px",v.style.color="#fff",v.style.marginLeft="5px",v.innerHTML=n,u.appendChild(v),d.appendChild(u),setTimeout(function(){BrowserDetect.MOBILE||BrowserDetect.TABLET?u._y=a-110-u._getHeight():u._y=a-56-u._getHeight()},20),c.appendChild(d),c._hovBlock=d;var b=document.createElement("img");if(b.src=l,c._loadImg=b,!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE)c.addEventListener("mouseover",R),c.addEventListener("mouseout",P);else{var w=new SmartObject;w.style.marginTop="20px",w.style.display="block",w.style.width="35px",w.style.height="35px",w.style.borderRadius="100%",w.style.cursor="pointer",w.style.background="#fff",w.style.left="40px",w.style.bottom="40px";var x=AssetLoader.getAsset("assets/images/ui/dots@2.png");w.appendChild(x),c.appendChild(w),c.icon=w,c.iconInSite=x,c.hoverBlock=d,c.iconInSite=x,c.icon=w,c.addEventListener("click",T)}return c}function T(t){e!=this&&(l(),TweenMax.to(this.hoverBlock,.3,{_opacity:1,ease:Linear.easeNone}),TweenMax.to(this.iconInSite,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),n=setTimeout(l,4e3),e=this)}function l(){e&&(TweenMax.to(e.hoverBlock,.3,{_opacity:0,ease:Linear.easeNone}),TweenMax.to(e.iconInSite,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})),n&&(clearTimeout(n),n=null)}function R(t){i&&TweenMax.to(i,.3,{_opacity:0,ease:Linear.easeNone});var e=this._hovBlock;TweenMax.to(e,.3,{_opacity:1,ease:Linear.easeNone}),i=this._hovBlock}function P(t){var e=this._hovBlock;TweenMax.to(e,.3,{_opacity:0,ease:Linear.easeNone}),i=null}function B(t,e,i,n,r,o){var s=new SmartObject;s.style.width=r-40+"px",s.style.height=o-40+"px",s.style.backgroundColor="#afb6b0",s._x=20,s._y=20,s._opacity=0;var a=new SmartObject;a.style.position="relative",a._x=20,a.style.width=r-80+"px",s._textWrap=a;var l=document.createElement("span");if(l.style.display="block",l.style.width="100%",Assets.getWindowWidth()<480?(l.style.fontSize="18px",l.style.lineHeight="20px"):Assets.getWindowWidth()<820&&700<Assets.getWindowWidth()?(l.style.fontSize="20px",l.style.lineHeight="22px"):(l.style.fontSize="25px",l.style.lineHeight="27px"),l.style.marginBottom="6px",l.style.color="#ffffff",-1<e.indexOf("https://")||-1<e.indexOf("http://")||-1<e.indexOf("@"))for(var c=e.split(" "),h=0;h<c.length;h++){if(-1<c[h].indexOf("https://"))(d=document.createElement("a")).style.textDecoration="none",d.style.color="#555658",d.setAttribute("href",c[h]),d.setAttribute("target","_blank"),d.innerHTML=c[h]+" ",d.className="cultureLink",l.appendChild(d);else if(-1<c[h].indexOf("http://")){var d;(d=document.createElement("a")).style.textDecoration="none",d.style.color="#555658",d.setAttribute("href",c[h]),d.setAttribute("target","_blank"),d.innerHTML=c[h]+" ",d.className="cultureLink",l.appendChild(d)}else if(-1<c[h].indexOf("@")){var u=document.createElement("span");u.style.color="#555658",u.innerHTML=c[h]+" ",l.appendChild(u)}else l.innerHTML+=c[h]+" "}else l.innerHTML=e;s._text=l,a.appendChild(l);var p=document.createElement("span");p.style.display="inline-block",p.style.fontSize="14px",p.style.color="#fff",p.innerHTML="@"+i,a.appendChild(p);var f=document.createElement("span");return f.style.display="inline-block",f.style.fontSize="14px",f.style.color="#fff",f.style.marginLeft="5px",f.innerHTML=n,a.appendChild(f),s.appendChild(a),setTimeout(function(){a._y=o-56-a._getHeight()},20),s}function c(t){A=(A=JSON.parse(t)).data,o=!0,1==s&&0==a&&(a=!0,D())}function h(t){C=JSON.parse(t),s=!0,1==o&&0==a&&(a=!0,D())}function d(t){Assets.getWindowHeight(),f=Assets.getWindowWidth()<700?1:Assets.getWindowWidth()<1400?2:Assets.getWindowWidth()<2100?3:4;var e=Assets.getWindowWidth()/f,i=(e=Math.round(e))*p;i=Math.round(i);for(var n=0,r="#aeb6af",o="#aeb6af",s=0;s<E.length;s++){var a,l=E[s];if(l.style.width=e+"px",l.style.height=i+"px",l._x=e*(s%f),s%f==0&&n++,s%f==0?r=a="#aeb6af"==r?"#bac1ba":"#aeb6af":a="#aeb6af"==o?"#bac1ba":"#aeb6af",o=l.style.backgroundColor=a,l._y=i*(n-1),E[s]._insta){var c=E[s]._insta,h=c._hovBlock;1==BrowserDetect.MOBILE?(h._caption.style.fontSize="18px",h._caption.style.lineHeight="20px"):Assets.getWindowWidth()<480?(h._caption.style.fontSize="18px",h._caption.style.lineHeight="20px"):Assets.getWindowWidth()<820&&700<Assets.getWindowWidth()?(h._caption.style.fontSize="20px",h._caption.style.lineHeight="22px"):(h._caption.style.fontSize="25px",h._caption.style.lineHeight="27px"),h.style.width=E[s].offsetWidth-40+"px",h.style.height=E[s].offsetHeight-40+"px",h._textWrap.style.width=E[s].offsetWidth-80+"px",0<h._textWrap._getHeight()&&(BrowserDetect.MOBILE||BrowserDetect.TABLET?h._textWrap._y=E[s].offsetHeight-110-h._textWrap._getHeight():h._textWrap._y=E[s].offsetHeight-56-h._textWrap._getHeight()),c._vid&&(c._vid.style.marginTop=-E[s].offsetHeight/4+"px")}else if(E[s]._tweet){var d=E[s]._tweet;Assets.getWindowWidth()<480?(d._text.style.fontSize="18px",d._text.style.lineHeight="20px"):Assets.getWindowWidth()<820&&700<Assets.getWindowWidth()?(d._text.style.fontSize="20px",d._text.style.lineHeight="22px"):(d._text.style.fontSize="25px",d._text.style.lineHeight="27px"),d.style.width=E[s].offsetWidth-40+"px",d.style.height=E[s].offsetHeight-40+"px",d._textWrap.style.width=E[s].offsetWidth-80+"px",0<d._textWrap._getHeight()&&(d._textWrap._y=E[s].offsetHeight-56-d._textWrap._getHeight())}}Assets.getWindowWidth()<2100&&1400<Assets.getWindowWidth()?(E[E.length-1].style.display="none",n-=1):E[E.length-1].style.display="block",u.style.height=i*n+"px"}function g(){window.removeEventListener("resize",d),u.parentNode.removeChild(u)}return u.templateIn=function(){SmartObject(u),u._allowOverflowReset=!0,u.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,u.style.background="#bac2bb",u.style.overflow="hidden",u.style.width="100%",u.style.height="auto",u.style.minHeight="100%",u.style.paddingBottom="22px",u.style.backgroundColor="rgb(186,194,187)";var t=document.createElement("div");t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="#525453",t.style.zIndex=1e3,u.appendChild(t),function(){for(var t=r.querySelector(".instagram-list"),e=0;e<t.children.length;e++){var i=t.children[e].innerHTML;k.push(i)}}(),function(){for(var t=Assets.getWindowWidth()/f,e=0,i="#aeb6af",n="#aeb6af",r=0;r<36;r++){var o,s=new SmartObject;s.style.width=t+"px",s.style.height=t*p+"px",s._x=t*(r%f),r%f==0&&e++,r%f==0?i=o="#aeb6af"==i?"#bac1ba":"#aeb6af":o="#aeb6af"==n?"#bac1ba":"#aeb6af",s.style.backgroundColor=o,n=o,s._y=t*p*(e-1),E.push(s),u.appendChild(s)}u.style.height=t*p*e+"px"}(),AJAX.load(Assets.SITE_BASE+"/social/gettweets.php",h,"GET"),AJAX.load(Assets.SITE_BASE+"/social/getinstagrams.php",c,"GET"),d(),window.addEventListener("resize",d),Assets.LAYER_MID.appendChild(u),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(r.getAttribute("data-path"))},u.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},u.templateOut=function(){for(var t=0;t<E.length;t++)E[t]._insta&&(!0!==BrowserDetect.TABLET&&!0!==BrowserDetect.MOBILE?(E[t].removeEventListener("mouseover",R),E[t].removeEventListener("mouseout",P)):E[t].removeEventListener("click",R));Assets.TRANSITIONS_MANAGER.go(u,r,g)},u}function JournalTemplate(t){var e=document.createElement("div"),i=t.getXML();function n(t){}function r(){window.removeEventListener("resize",n),e.parentNode.removeChild(e)}return e.templateIn=function(){SmartObject(e),e._allowOverflowReset=!0,e.style.position="relative",_saveOverflow=Assets.LAYER_MID.style.overflow,e.style.background="#bac2bb",e.style.overflow="hidden",e.style.width="100%",e.style.height="auto",e.style.minHeight="100%",e.style.paddingBottom="22px",e.style.backgroundColor="rgb(186,194,187)",window.addEventListener("resize",n),Assets.LAYER_MID.appendChild(e),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(i.getAttribute("data-path"))},e.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},e.templateOut=function(){Assets.TRANSITIONS_MANAGER.go(e,i,r)},e}function ProjectsTemplate(t){var p,u,f,g=new SmartObject,r=new SmartObject,m=t.getXML(),y=(BrowserDetect.TABLET||BrowserDetect.MOBILE,window.innerWidth);function e(){for(var t,e,i,n,r,o,s,a=[],l=[],c=[],h=m.querySelectorAll("[data-type=dimension]"),d=0,u=h.length;d<u;d++){for(e=[],i={path:(t=h[d]).getAttribute("data-path")||"",headline:t.querySelector("[data-type=headline]").innerHTML,subHeadline:t.querySelector("[data-type=subHeadline]").innerHTML,subHeadlineColor:t.getAttribute("data-subHeadlineColor")||"",overlayColor:t.getAttribute("data-overlayColor")||"",bgColor:t.getAttribute("data-bgColor")||""},r=0,o=(n=t.getAttribute("data-images").split(", ")).length;r<o;r++)s=n[r],e.push(s),a.push(s);l.push(e),c.push(i)}(p=new FauxParallax({nrOfColumns:2,keepResizeRatio:!0,resizeLayersToFillCell:!0,resizeWithBreakPoints:!0,showOverlays:!0,animateRefreshes:!1,assets:a,cellData:l,cellAttributes:c}))._onBuildCallback=_,p._onRefreshCellsCallback=v,p.build(),c=l=a=null}function _(){for(var t=p.getAllCells(),e=0,i=t.length;e<i;e++){var n=SmartObject(t[e]);(n._container||n._href)&&(n.style.cursor="pointer"),n.style.webkitTransform="",r.appendChild(n)}v(),g.addEventListener("click",o),g.killPreloader()}function v(){if(window.innerWidth/640,window.innerHeight<window.innerWidth&&window.innerHeight/640,!p._buildFinished)return!1;var t=p.getAllCells(),e=t[0],i=Math.floor(e._width),n=Math.floor(e._height),r=0,o=t.length;u={x:0,y:0,columns:0,rows:0};for(var s=["#bac1ba","#aeb6af"];r<o;r++){if(!(d=t[r])._isHidden&&(d._orgX=u.x*i,d._orgY=u.y*n,d._column=u.x+1,d._row=u.y+1,u.x+=1,u.columns=u.x,u.rows=u.y+1,r%p._nrOfColumns==p._nrOfColumns-1&&(u.x=0,u.y+=1),d._container)){var a=s[0],l=s[1],c=r%2==0?a:l;if(0<r&&0===d._orgX&&3!==p._nrOfColumns&&1!==p._nrOfColumns){var h=t[r-1]._bgColor;s=[h,"#bac1ba"===h?"#aeb6af":"#bac1ba"],d.style.background=h}else d.style.background=d._bgColor=d._container._bgColor=c}}for(r=0;r<o;r++){var d=t[r];y<window.innerWidth&&(d=t[o-r-1]),void 0!==d._orgX&&TweenMax.set(d,{left:d._orgX,top:d._orgY})}y=window.innerWidth,f=(f=u.rows*n)<window.innerHeight?window.innerHeight:f,g.setDocHeight(),f}function o(t){if(Assets.MAIN_MENU._isOpen)return!1;var e=(t=t||window.event).target||t.currentTarget;(BrowserDetect.IE9||BrowserDetect.IE10)&&e._rel&&(e=e._rel),e._attributes&&(Assets.RESET_SCROLL_TO_ZERO=!0,ContentManager.path(e._attributes.path))}function i(){p.kill(),p=null,g.parentNode.removeChild(g),g=null}return g.templateIn=function(){console.log("ProjectsTemplate templateIn"),g._allowOverflowReset=!0,g.style.position="absolute",g.style.background="#D3D6CD",g.style.width="100%",r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.overflow="hidden",g.appendChild(r),requestAnimFrame(e),Assets.LAYER_MID.appendChild(g),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(m.getAttribute("data-path"))},g.buildTemplate=function(){},g.pause=function(){p&&p.checkVisibility(!0)},g.unpause=function(){p&&p.checkVisibility(!1,!0)},g.killPreloader=function(){},g.setOverflows=function(){Assets.LAYER_MID.style.overflow=Assets.mid_overflow,document.body.style.overflow=Assets.body_overflow},g.setDocHeight=function(){g.style.height=f+"px"},g.templateOut=function(){p._onBuildCallback=null,p._onRefreshCellsCallback=null,p.removeEvents(),p.deactivateCells(),g.removeEventListener("click",o),Assets.TRANSITIONS_MANAGER.go(g,m,i)},g}function HomeTemplate(t){var u,O,m,M,c,L,e,h,k,D,o=new SmartObject,I=new SmartObject,y=t.getXML(),R=y.querySelectorAll("[data-type=case]"),P={down:null,up:null,resize:null},_=!BrowserDetect.MOBILE&&!BrowserDetect.TABLET,n=[];function i(){(u=O.getAllLayers())[u.length-1]._isVisible=!0,L={oldLayer:null,newLayer:u[u.length-1]},O.addEvents(),P.up=new ArrowButton("up",O.changeLayer,null,null,O.transitionManager),P.down=new ArrowButton("down",O.changeLayer,null,null,O.transitionManager),d(),P.up.addEventListener("click",O.clearSlideshowInt),P.down.addEventListener("click",O.clearSlideshowInt),I.appendChild(P.up),I.appendChild(P.down),function(){var t,e=0,i=u.length;for(;e<i;e++){var n=R[e];(t=u[e])._data=u[e],t._headline=n.querySelector("[data-type=headline]").innerHTML,t._subHeadline=n.querySelector("[data-type=subHeadline]").innerHTML,t._description=n.querySelector("[data-type=description]").innerHTML,t._color=n.getAttribute("data-color"),t._bgColor=n.getAttribute("data-bgColor"),t._panelColor=n.getAttribute("data-panelColor"),t._title=n.querySelector("[data-type=title]").innerHTML,t._icon=n.getAttribute("data-icon"),t._note=n.querySelector("[data-type=note]").innerHTML,t._path=n.getAttribute("data-path"),t._hoverText=n.getAttribute("data-hoverText"),t._catID=n.getAttribute("data-cat"),t.style.background="#"+t._bgColor,t._catID&&p(t)}}(),function(){var t=R[R.length-1];if((M=new SmartObject).style.position="absolute",M.style.zIndex=999,M.style.width="50%",M.style.height="100%",M._color="fade",M._text=BrowserDetect.MOBILE||BrowserDetect.TABLET?"fade":"slide single",M._reverseText=!1,M._path=t.getAttribute("data-path"),O._gui){var e=O._gui.addFolder("Panel");e.open();e.add(M,"_color",["slide","fade"]),e.add(M,"_text",["slide all","slide single","fade"])}var d=new SmartObject;(k=d).style.position="absolute",d.style.left="52%",d.style.bottom="70px",d.style.right=0,d.style.width="auto",d.style.maxWidth="400px",d.style.height="auto",d.style.minHeight="200px",d.style.margin="0px 40px 0px 0px",d.style.display="block",d.style.cursor="pointer",d.style.overflow="visible";var u=document.createElement("span");u.innerHTML=t.querySelector("[data-type=title]").innerHTML,u.style.display="block",u.style.fontSize="14px",u.style.marginBottom="30px",u.style.color="#"+t.getAttribute("data-color");var p=document.createElement("span");p.innerHTML=t.querySelector("[data-type=headline]").innerHTML,p.style.display="block",p.style.fontSize="33px",p.style.lineHeight="36px",p.style.color="#fff",p.style.marginLeft="-2px",p.style.paddingLeft="2px";var f=document.createElement("span");f.innerHTML=t.querySelector("[data-type=subHeadline]").innerHTML,f.style.display="block",f.style.fontSize="33px",f.style.lineHeight="36px",f.style.color="#"+t.getAttribute("data-color");var g=document.createElement("span");g.style.marginTop="20px",g.style.display="block",g.style.width="35px",g.style.height="35px",g.style.borderRadius="100%",g.style.cursor="pointer",g.style.background="#fff";var m=AssetLoader.getAsset("assets/images/ui/dots@2.png");m.width=35,m.height=35;var y=AssetLoader.getAsset("assets/images/ui/dots-white@2.png");y.style.opacity=0;var _=new OffsiteButton;g.appendChild(m),g.appendChild(y),g.appendChild(_),-1!==M._path.indexOf("http")?(_.style.opacity=1,m.style.opacity=0):(_.style.opacity=0,m.style.opacity=1);var v=new SmartObject;v.style.width="200px",v.innerHTML=t.getAttribute("data-hoverText")||"See more",v._x=40,v._y=12,v._opacity=0,v.style.color="#"+t.getAttribute("data-color"),v._color="#"+t.getAttribute("data-color"),v.style.fontFamily="TheinhardtRegular",g.appendChild(v);var b=document.createElement("span");(D=b).style.marginTop="30px",b.style.display="block",b.style.fontSize="14px",b.style.lineHeight="18px",b.innerHTML=t.querySelector("[data-type=description]").innerHTML,b.style.fontFamily="TheinhardtRegular",b.style.color="#"+t.getAttribute("data-color");var i=new SmartObject;if((h=i).style.position="absolute",i.style.left="52%",i.style.top="0px",i.style.right=0,i.style.width="100%",i.style.height="auto",i.style.minHeight="200px",i.style.margin="0px 40px 0px 0px",i.style.display="block",i.style.cursor="pointer",i.style.zIndex=100,i.style.background="transparent","Explorer"===BrowserDetect.BROWSER_NAME){var n=Assets.getTransparentBg();(n._rel=i).appendChild(n)}i.onmouseover=function(t){TweenMax.to(v,.5,{_opacity:1,x:50,ease:Expo.easeOut,overwrite:"all"}),-1!==M._path.indexOf("http")?_.mouseOver():TweenMax.to(m,.5,{rotation:180,ease:Expo.easeOut,overwrite:"all"})},i.onmouseout=function(t){TweenMax.to(v,.5,{_opacity:0,x:40,ease:Expo.easeOut,overwrite:"all"}),-1!==M._path.indexOf("http")?_.mouseOut():TweenMax.to(m,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"})},M._hitArea=i,d.appendChild(u),d.appendChild(p),d.appendChild(f),d.appendChild(g),d.appendChild(b),M.appendChild(i);var r=new SmartObject;r.style.position="absolute",r.style.width="100%",r.style.height="100%";var w=new SmartObject;w.style.position="absolute",w.innerHTML=Assets.DATA_STATIC.querySelector("#whats-up").innerHTML,w.style.fontSize="14px",w.style.left="52%",w.style.top="30px",w.style.color="#"+t.getAttribute("data-color");var x=new SmartObject;x.style.width="45px",x.style.height="1px",x.style.position="absolute",x.style.top="8px",x.style.right="-49px",x.style.backgroundColor=w.style.color,w.appendChild(x);var o=new HMLogo;M._logo=o;var s=Assets.DATA_STATIC.querySelector("#email").innerHTML,T=document.createElement("a");T.style.position="absolute",T.style.fontFamily="TheinhardtRegular",T.href="mailto:"+s,T.innerHTML=s,T.style.left="20px",T.style.bottom="20px",T.style.color="#"+t.getAttribute("data-color"),T.style.textDecoration="none",BrowserDetect.DESKTOP&&(T.addEventListener(MouseEvent.MOUSE_OVER,function(t){TweenMax.to(T,.2,{opacity:.5,ease:Linear.easeNone})}),T.addEventListener(MouseEvent.MOUSE_OUT,function(t){TweenMax.to(T,.2,{opacity:1,ease:Linear.easeNone})}));var A=new SmartObject;A.style.position="absolute",A.innerHTML="&copy; Copyright "+(new Date).getFullYear(),A.style.fontFamily="TheinhardtRegular",A.style.left="52%",A.style.bottom="20px",A.style.color="#"+t.getAttribute("data-color");var C=new SmartObject;C.style.opacity=0,C.innerHTML=t.querySelector("[data-type=note]").innerHTML.trunc(250/3,!0),C.style.position="absolute",C.style.left="20px",C.style.fontSize="14px",C.style.color="#"+t.getAttribute("data-color"),C.style.maxWidth="200px";var E=C.cloneNode(!0);E.style.opacity=0,E.innerHTML=u.innerHTML,E.style.left="52%",r.appendChild(w),r.appendChild(o),r.appendChild(T),r.appendChild(A),r.appendChild(d),r.appendChild(C),r.appendChild(E);var S=new SmartObject;S.style.position="absolute",S.style.display="block",S.style.width="100%",S.style.height="auto",S.style.top=0,S.style.left=0,S.style.right=0,S.style.bottom=0,S.style.margin="20px 0px 20px 20px";var a=new SmartObject;a.style.position="absolute",a.style.width="100%",a.style.height="100%",a.style.opacity=.9;var l=new SmartObject;l.style.position="absolute",l.style.width="100%",l.style.height="100%",l.style.background="#"+t.getAttribute("data-panelColor"),l.style.opacity=.9,TweenMax.set(l,{x:0,y:0,z:0}),S._curr=l,S._bg1=a,S._bg2=l,S.appendChild(a),S.appendChild(l),S.appendChild(r),M.appendChild(S),M.resize=function(t){c=window.innerWidth/640,window.innerHeight<window.innerWidth&&(c=window.innerHeight/640),M.style.width=window.innerWidth/2-20+"px",o.resize();var e=window.innerWidth<900||window.innerHeight<600;580<window.innerHeight?v.style.visibility="visible":v.style.visibility="hidden",e||BrowserDetect.MOBILE?(d.style.left="20px",A.style.opacity=0,w.style.opacity=0,C.style.display="none",b.style.display="none",BrowserDetect.MOBILE&&window.innerWidth>window.innerHeight?(T.style.opacity=0,d.style.left="52%",E.style.opacity=1,u.style.display="none"):(T.style.opacity=1,E.style.opacity=0,u.style.display="block")):(d.style.left="52%",A.style.opacity=1,w.style.opacity=1,C.style.display="block",b.style.display="block"),d.style.minHeight=.25*M.offsetHeight+"px",e?(u.style.fontSize=14*c+"px",u.style.marginBottom=30*c+"px",p.style.fontSize=33*c+"px",p.style.lineHeight=33*1.083333333*c+"px",f.style.fontSize=33*c+"px",f.style.lineHeight=33*1.083333333*c+"px",window.innerWidth>window.innerHeight?d.style.bottom="50px":d.style.bottom=(window.innerHeight<500?100:180)*c+"px"):(u.style.fontSize="14px",u.style.marginBottom="30px",p.style.fontSize="33px",p.style.lineHeight=33*1.083333333+"px",f.style.fontSize="33px",f.style.lineHeight=33*1.083333333+"px",d.style.bottom="70px"),setTimeout(function(){C.style.top=W(b).top-20+"px",C.style.opacity=1,E.style.top="30px",H()},0)},M.resize(),O._onChangeLayerCompleteCallback=function(){L.oldLayer.style.display="none"},O._onChangeLayerStartCallback=function(t){var e=t.oldLayer._cat;e&&B(e);var i=t.newLayer._cat;i&&j(i);var n="up"===t.moveDirection?"Next":"Previous";_gaq.push(["_trackEvent","Home",n,t.newLayer._headline]);var r=O.transitionManager._options.speed;if((L=t).oldLayer._isVisible=!1,t.newLayer._isVisible=!0,"down"===t.moveDirection?P.up.onClick(null,!0):"up"===t.moveDirection&&P.down.onClick(null,!0),"fade"===M._color){var o=t.newLayer,s=t.moveDirection,a=50*("down"===s||"left"===s?-1:1);TweenMax.to(S._curr,.7*r,{backgroundColor:"#"+o._panelColor,ease:Expo.easeInOut,overwrite:"all"})}if("fade"===M._text){var s=t.moveDirection,l=BrowserDetect.MOBILE||BrowserDetect.TABLET?1:0;TweenMax.to(d,r/3,{opacity:l,ease:Expo.easeInOut,overwrite:"all",onComplete:function(){p.innerHTML=o._headline,f.innerHTML=o._subHeadline,f.style.color="#"+o._color,u.innerHTML=o._title,u.style.color="#"+o._color,b.innerHTML=o._description,b.style.color="#"+o._color,C.innerHTML=o._note,C.style.color="#"+o._color,C.style.top=W(b).top-20+a+"px",E.innerHTML=u.innerHTML,E.style.color="#"+o._color,E.style.top="30px",v.innerHTML=o._hoverText||"See more",v._color="#"+o._color,v.style.color=v._color,g.style.background="#fff",M._path=o._path,y.style.opacity=0,-1!==M._path.indexOf("http")?(_.style.opacity=1,m.style.opacity=0):(_.style.opacity=0,m.style.opacity=1),BrowserDetect.MOBILE||BrowserDetect.TABLET||TweenMax.to(d,r/3,{opacity:1,ease:Expo.easeInOut,overwrite:"all"})}})}if("slide single"===M._text){var s=t.moveDirection,a=75*("down"===s||"left"===s?-1:1);M._reverseText&&(a*=-1);"down"!==s&&"left"!==s||(.1,.05,0);var c=[u,p,f,g,b,C];"down"!==s&&"left"!==s||(c=[b,g,f,p,u,C]);var h=1.3/c.length/10;TweenMax.staggerTo(c,r/3,{opacity:0,x:0,y:-a,z:0,ease:Expo.easeInOut,overwrite:"all",onComplete:function(){p.innerHTML=o._headline,f.innerHTML=o._subHeadline,f.style.color="#"+o._color,u.innerHTML=o._title,u.style.color="#"+o._color,b.innerHTML=o._description,b.style.color="#"+o._color,C.innerHTML=o._note,C.style.color="#"+o._color,C.style.top=W(b).top-20+a+"px",E.innerHTML=u.innerHTML,E.style.color="#"+o._color,E.style.top="30px",v.innerHTML=o._hoverText||"See more",v._color="#"+o._color,v.style.color=v._color,g.style.background="#fff",H(),M._path=o._path,y.style.opacity=0,-1!==M._path.indexOf("http")?(_.style.opacity=1,m.style.opacity=0):(_.style.opacity=0,m.style.opacity=1),TweenMax.set(c,{x:0,y:a,z:0}),TweenMax.staggerTo(c,r/3,{opacity:1,x:0,y:0,z:0,ease:Expo.easeInOut,overwrite:"all"},h)}},h)}TweenMax.to([w,A,T],r,{color:"#"+o._color,ease:Expo.easeInOut,overwrite:"all"}),TweenMax.to(x,r,{backgroundColor:"#"+o._color,ease:Expo.easeInOut,overwrite:"all"})},I.appendChild(M)}(),function(){var t=0,e=n.length;for(;t<e;t++){var i=n[t];M.appendChild(i),n[t]=null}}(),function(){var t=[],e=[],i=[],n=0,r=y.children.length;for(;n<r;n++){var o,s=y.children[n],a=[],l=s.querySelector("[data-type=dimension]");if(l){o={alignOnMobile:l.getAttribute("data-alignOnMobile")};for(var c=l.getAttribute("data-images").split(", "),h=0,d=c.length;h<d;h++){var u=c[h];a.push(u),t.push(u)}e.push(a),i.push(o)}}p=t,f=e,g=i,(m=new FauxParallax({nrOfColumns:0,perspective:9e3,zoomDepth:145,resizeLayersToFillCell:!0,resizeWithBreakPoints:!1,showOverlays:!1,animateRefreshes:!1,dontRefreshCells:!0,hideCellsOnBuild:!1,addDesktopEvents:_,loadAssetsInReverse:!0,assets:p,cellData:f,cellAttributes:g}))._onBuildCallback=v,m._onResizeCallback=b,m.build();var p,f,g}(),a(),o.addEventListener("click",l)}function B(t){if(!(t=t||e))return!1;try{t.pause()}catch(t){}TweenLite.to(t,.3,{_opacity:0,onComplete:r,onCompleteParams:[t],ease:Linear.easeNone,overwrite:"all"})}function r(t){if(!(t=t||e))return!1;t&&t.parentNode&&(t._stack._cat=null,t.parentNode.removeChild(t),t.unloadAssets(),t=null)}function v(){for(var t=m.getAllCells(),e=0,i=u.length;e<i;e++){var n=t[e];n.style.position="absolute",u[e].appendChild(n)}o.killPreloader();var r=u[u.length-1]._cat;r&&j(r)}function b(){for(var t=m.getAllCells(),e=0,i=u.length,n=window.innerWidth<900||window.innerHeight<600;e<i;e++){var r,o,s=t[e],a=window.innerWidth,l=window.innerHeight,c=s._ratio,h=Math.ceil(1.1*a),d=Math.ceil(h*c);d<l&&(d=Math.ceil(1.1*l),h=Math.ceil(d/c)),r=Math.ceil((a-h)/2),o=Math.ceil((l-d)/2),(n||BrowserDetect.MOBILE||BrowserDetect.TABLET)&&s._mobileAlign&&(r=-(h-a)*s._mobileAlign),s.refresh(h,d,!1),s.style.top=o+"px",s.style.left=r+"px"}}function s(t){requestAnimFrame(a)}function a(t){c=window.innerWidth/640,window.innerHeight<window.innerWidth&&(c=window.innerHeight/640),M&&M.resize(t),d()}function l(t){var e=(t=t||window.event).target||t.currentTarget;e!==M._hitArea&&e._rel!==M._hitArea||(-1!==M._path.indexOf("http")?window.open(M._path):ContentManager.path(M._path))}function d(){if(P.down&&P.up){window.innerWidth<900||BrowserDetect.MOBILE?P.down._x=P.up._x=window.innerWidth-70:P.down._x=P.up._x=window.innerWidth-90;var t=.7*window.innerHeight;P.up._y=t,P.down._y=t+54}}function H(){h.style.width=k.offsetLeft<100?"100%":"50%",h.style.top=k.offsetTop+"px",h.style.height=D.offsetTop+"px",window.innerWidth<900&&(h.style.height=window.innerHeight+"px"),h.style.left=k.style.left}function p(t){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||Assets.CAT_ANIMATION_RUN||"Explorer"===BrowserDetect.BROWSER_NAME)return!1;if(900<=window.innerWidth){var e=new Cat(t._catID,B);e._x=36,e._opacity=0,e.style.bottom="248px",e.style.zIndex=999,(e._stack=t)._cat=e,n.push(e)}}function j(t){(t=t||e)&&(TweenLite.to(t,.3,{delay:.8,_opacity:1,onComplete:f,onCompleteParams:[t],ease:Linear.easeNone}),Assets.CAT_ANIMATION_RUN=!0)}function f(t){if(t)try{t.play()}catch(t){}}function W(t){var e,i,n,r,o={top:0,left:0},s=t&&t.ownerDocument;return e=s.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=null!=(r=n=s)&&r===r.window?n:9===n.nodeType&&n.defaultView,{top:o.top+i.pageYOffset-e.clientTop,left:o.left+i.pageXOffset-e.clientLeft}}function g(){P.up.removeEvents(),P.down.removeEvents(),P.up.removeEventListener("click",O.clearSlideshowInt),P.down.removeEventListener("click",O.clearSlideshowInt),M._hitArea.onmouseover=null,M._hitArea.onmouseout=null,M._logo.onclick=null,L=M=null;for(var t=0,e=u.length;t<e;t++)u[t]&&u[t].parentNode&&u[t].parentNode.removeChild(u[t]),u[t]=null;u=null,O._onBuildCallback=null,O._onResizeCallback=null,O._onChangeLayerCompleteCallback=null,O._onChangeLayerStartCallback=null,I.removeChild(O),O.kill(),O=null,o.removeChild(I),I=null,m.kill(),m=null,o.parentNode.removeChild(o),o=null}return o.templateIn=function(){o._allowOverflowReset=!1,o.style.width="100%",o.style.height="100%",o.style.background="#D3D6CD",I.style.width="100%",I.style.height="100%",I.style.overflow="hidden",I.___MEM_ID___="PageWrapper",o.appendChild(I);var t=new SmartObject;t.style.width="20px",t.style.height="100%",t.style.position="absolute",t.style.left="-20px",t.style.background="red",t.style.zIndex=1e3,(O=new StackTransition(null,!0,_,y.children.length))._onBuildCallback=i,O._onResizeCallback=s,O.setup(),I.appendChild(O),O.setSlideshowInt(),Assets.LAYER_MID.appendChild(o),ContentManager.nextTemplate(),Assets.MAIN_MENU.highlightMenuItemFromPath(y.getAttribute("data-path"))},o.killPreloader=function(){},o.setOverflows=function(){Assets.LAYER_MID.style.overflow="hidden",document.body.style.overflow="hidden"},o.hideContent=function(){},o.showContent=function(){},o.hideActiveCat=function(){B()},o.templateOut=function(){o.hideActiveCat(),O.clearSlideshowInt(),o.removeEventListener("click",l),O.removeEvents(),m.removeEvents(),Assets.TRANSITIONS_MANAGER.go(o,y,g)},o}function FauxParallax(t){var h={};h._scroll,h._dynamicOut=!0,h._buildFinished=!1,h._currWinWidth=window.innerWidth,h._onGetAllCellsCallback=null,h._onGetCellCallback=null,h._onRefreshCellsCallback=null,h._onUpdateOptionsCallback=null,h._onScrollCallback=null,h._onResizeCallback=null,h._onMouseMoveCallback=null,h._onRemoveEventsCallback=null,h._onAddEventsCallback=null,h._onAddCellsCallback=null,h._onBuildCallback=null,h._onLoadAssetsCallback=null,h._onInitCallback=null,h._onAddSingleCellCallback=null,h._onRefreshSingleCellCallback=null;var c,d,e,i,u={perspective:1e3,overflow:"hidden",width:496,height:334,keepResizeRatio:!1,zoomDepth:45,nrOfColumns:0,resizeWithBreakPoints:!1,resizeLayersToFillCell:!1,resizeCellToFillParent:!1,animateRefreshes:!(h._onAllAssetsLoadedCallback=null),animateHovers:!1,showOverlays:!1,dontRefreshCells:!1,hideCellsOnBuild:!0,addDesktopEvents:!0,loadAssetsInReverse:!1,assets:["../development/assets/images/gfx3d/0-1.png","../development/assets/images/gfx3d/0-2.png"],cellData:[["../development/assets/images/gfx3d/0-1.png","../development/assets/images/gfx3d/0-2.png"]],cellAttributes:[[{headline:"",subHeadline:"",overlayColor:""}]]},s={x:0,y:0,timeout:null,timeoutDelay:1e3,isMoving:!1,isDown:!1},p={currValue:0,prevValue:0,absolute:0,alpha:0,gamma:0,beta:0,timeStamp:null,isLandscape:!1},f=[],n=!1,g=[];function r(){!function(){h&&"function"==typeof h._onLoadAssetsCallback&&h._onLoadAssetsCallback(u.assets);d=document.createElement("div"),function(){var t=u.cellData;if(t){c=[];for(var e=0,i=t.length;e<i;e++){var n=t[e],r=u.cellAttributes[e],o=new Cell(n,h,e,r);h._hideCellsOnBuild&&(o.style.opacity=0),f.push(o),c.push(o)}m();for(var e=0,i=3;e<i;e++){var o=document.createElement("div");if(o._type="extraFooterCellCTA",o.style.background="#AFB6B0",o._width=Math.ceil(h._width),o._height=Math.ceil(h._height),o._ratio=o._height/o._width,o.style.borderTop="20px solid #BAC3BB",o.style.borderBottom="20px solid #BAC3BB",0===e?o.style.borderLeft="20px solid #BAC3BB":2===e&&(o.style.borderRight="20px solid #BAC3BB"),2===e){var s=new SmartObject;s.style.position="absolute",s.innerHTML="Looking for more",s.style.fontSize="14px",s.style.left="20px",s.style.top="20px",s.style.color="#fff";var a=new SmartObject;a.style.width="45px",a.style.height="1px",a.style.position="absolute",a.style.top="11px",a.style.right="-44px",a.style.backgroundColor="#fff",s.appendChild(a);var l=SmartObject(document.createElement("a"));l.style.position="absolute",l.innerHTML="<span style='color:#fff;'>It's a wrap<br /></span><span style='color:#4E4F51;'>Want to create<br />great things<br />with us?<br /></span><span style='color:#fff;'>hello@hellomonday.com</span>",l.style.fontSize="14px",l.style.left="20px",l.style.bottom="20px",l.style.color="#fff",l.style.fontSize="20px",l.style.lineHeight="24px",l.style.cursor="pointer",l.setAttribute("href","mailto:hello@hellomonday.com"),l.className="itsAwrapLink",o.appendChild(s),o.appendChild(l)}o.refresh=function(t,e,i){var n=this;t&&(i&&(n._width=t,n._height=n._width*n._ratio),n._width=Math.ceil(n._width),n._height=Math.ceil(n._height)),n.style.width=n._width+"px",n.style.height=n._height+"px"},f.push(o),c.push(o),g.push(o)}h&&"function"==typeof h._onAddCellsCallback&&h._onAddCellsCallback(c)}else console.log("Error: No cell data provided")}(),n?console.log("Error: Events already added"):(n=!0,h._addDesktopEvents&&(window.addEventListener("mousemove",y),window.addEventListener("scroll",b)),window.addEventListener("resize",_),window.addEventListener("deviceorientation",x),window.addEventListener("orientationchange",T),h&&"function"==typeof h._onAddEventsCallback&&h._onAddEventsCallback(h)),v(),w(),T(),h._buildFinished=!0,h&&"function"==typeof h._onBuildCallback&&h._onBuildCallback(c)}()}function m(){e=h._loadAssetsInReverse?f.length-1:0,i=f.length,o()}function o(){var t=f[e];t._onAddLayersCallback=a,t._loadAssets()}function a(){return!!h&&(h._loadAssetsInReverse?e--:e++,h._loadAssetsInReverse&&e<0?(h._allCellImagesLoaded=!0,h&&"function"==typeof h._onAllAssetsLoadedCallback&&h._onAllAssetsLoadedCallback(h),!1):i<=e?(h._allCellImagesLoaded=!0,h&&"function"==typeof h._onAllAssetsLoadedCallback&&h._onAllAssetsLoadedCallback(h),!1):void o())}function l(){n&&(n=!1,h._addDesktopEvents&&(window.removeEventListener("mousemove",y),window.removeEventListener("scroll",b)),window.removeEventListener("resize",_),window.removeEventListener("deviceorientation",x),window.removeEventListener("orientationchange",T),h&&"function"==typeof h._onRemoveEventsCallback&&h._onRemoveEventsCallback(h))}function y(t){(t=t||window.event).target||t.currentTarget||t.srcElement;clearTimeout(s.timeout),s.isMoving=!0,s.x=t.clientX,s.y=t.clientY,s.timeout=setTimeout(function(t){if(s.isMoving=!1,f)for(var e=0,i=f.length;e<i;e++){var n=f[e];n&&n._onMouseOut&&n._onMouseOut(t,n)}},s.timeoutDelay);var e=0,i=f.length;for(Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;e<i;e++){var n=f[e];if(!n._isSelected&&n._isLoaded){var r=n.getBoundingClientRect(),o=r.top>-r.height&&r.top+r.height<window.innerHeight+r.height;!o&&n.parentNode&&n.parentNode._isVisible&&(o=!0),(n._isVisible=o)&&n._onMouseMove&&n._onMouseMove(t,n)}}h&&"function"==typeof h._onMouseMoveCallback&&h._onMouseMoveCallback(s)}function _(t){requestAnimFrame(v)}function v(t){T(t=t||window.event),d.clientX=(window.innerWidth-30)/2,d.clientY=(window.innerHeight-30)/2,h._resizeWithBreakPoints&&(window.innerWidth<700?h._nrOfColumns=1:window.innerWidth<1400?h._nrOfColumns=2:window.innerWidth<2100?h._nrOfColumns=3:h._nrOfColumns=4),h._currWinWidth=window.innerWidth-Assets.SCROLLBAR_WIDTH,h.refreshCells(),h&&"function"==typeof h._onResizeCallback&&h._onResizeCallback(h)}function b(t){requestAnimFrame(w)}function w(t){t=t||window.event;var e=document.documentElement,i=(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0),n=(window.pageYOffset||e.scrollTop)-(e.clientTop||0);h._scroll={x:i,y:n},h&&"function"==typeof h._onScrollCallback&&h._onScrollCallback(h._scroll)}function x(t){var e=t.absolute,i=Math.round(t.alpha),n=Math.round(t.beta),r=Math.round(t.gamma),o=t.timeStamp;p.absolute=e,p.alpha=i,p.beta=n,p.gamma=r,p.timeStamp=o,p.prevValue=p.currValue,p.currValue=p.beta,function(){if(!h._allCellImagesLoaded)return;p.currValue=p.currValue%360;var t=p.isLandscape?p.beta:-p.gamma,e=p.isLandscape?p.gamma:p.beta,i=p.isLandscape?1.35:1.22,n={clientX:d.clientX*t/20+360*i*(window.innerWidth/900),clientY:-d.clientY*e/20+360*i*(window.innerHeight/900)},r=0,o=f.length;Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;for(;r<o;r++){var s=f[r];if(!s._isSelected&&s._isLoaded){var a=s.getBoundingClientRect(),l=a.top>-a.height&&a.top+a.height<window.innerHeight+a.height;l&&(s._onMouseMove&&s._onMouseMove(n,s),0)}}}()}function T(t){!function(){if(!window.matchMedia)return;var t=window.matchMedia("(orientation: portrait)");if(t)t.matches?p.isLandscape=!1:p.isLandscape=!0,t.addListener(A);else{var e=window.getComputedStyle(document.body,":after");"p"==e.content?p.isLandscape=!1:"l"==e.content?p.isLandscape=!0:p.isLandscape=window.innerWidth>=window.innerHeight}}()}function A(t){t.matches?p.isLandscape=!1:p.isLandscape=!0}return h.loadCellAssets=m,h.removeEvents=l,h.checkVisibility=function(t,e){var i=0,n=f.length,r=0;for(Assets.LAYER_ALL.scrollTop,Assets.LAYER_ALL.scrollTop,window.innerHeight;i<n;i++){var o=f[i];if(!o._isSelected){var s=o.getBoundingClientRect(),a=s.top>-s.height&&s.top+s.height<window.innerHeight+s.height;!a&&o.parentNode&&o.parentNode._isVisible&&(a=!0),a||o._type||(t?o.style.display="none":e&&(o.style.display="block"),r++),o._isVisible=a}}var l=e?"show":t?"hide":"";console.log("FauxParallax checkVisibility "+l,r)},h.updateOptions=function(t){return function(){var t=1,e=arguments.length;for(;t<e;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(arguments[0][i]=arguments[t][i]);for(var n in u)if(u.hasOwnProperty(n)){var r=n,i=u[n];h["_"+r]=i}arguments[0]}(u,t),h&&"function"==typeof h._onUpdateOptionsCallback&&h._onUpdateOptionsCallback(u),h},h.build=function(t){return t&&h.updateOptions(t),r(),h},h.refreshCells=function(){if(h._dontRefreshCells)return!1;var t=0,e=f.length,i=0,n=0,r=null,o=0;for(h._nrOfColumns&&(i=(window.innerWidth-Assets.SCROLLBAR_WIDTH)/h._nrOfColumns);t<e;t++){var s=f[t];if(h._resizeCellToFillParent&&s.parentNode&&(i=s.parentNode.offsetWidth||i,n=s.parentNode.offsetHeight||n),s.refresh(i,n,h._keepResizeRatio),h._hideCellsOnBuild&&(_hideCellsOnBuild=!1,s.style.opacity=1),!s._container){if(null===r){var a=(e-3)/Math.ceil(h._currWinWidth/i);if(r=a>Math.floor(a)){var l=Math.ceil(h._currWinWidth/i);o=l-(e-3)%l}}var c=t-e+3;1===o?2!==c?(s._isHidden=!0,s.style.display="none"):(s._isHidden=!1,s.style.display="block",s.style.borderLeft="20px solid #BAC3BB"):2===o?1===c?(s._isHidden=!0,s.style.display="none"):(s._isHidden=!1,s.style.display="block"):3===o?(s._isHidden=!1,s.style.display="block"):(s._isHidden=!0,s.style.display="none"),1!==o&&2===c&&(s.style.borderLeft="0px solid #BAC3BB")}}return h&&"function"==typeof h._onRefreshCellsCallback&&h._onRefreshCellsCallback(f),h},h.getCell=function(t,e){return h&&"function"==typeof h._onGetCellCallback&&h._onGetCellCallback(c[e]),"last"===t?c[e]:f[e]},h.getAllCells=function(t){return h&&"function"==typeof h._onGetAllCellsCallback&&h._onGetAllCellsCallback(c),"last"===t?c:f},h.kill=function(){l(),d=null,s.timeout&&clearTimeout(s.timeout),function(){var t=0,e=f.length;for(;t<e;t++)f[t].kill&&f[t].kill(),f[t]._onAddLayersCallback=null,f[t]._isHidden=null,f[t]=null;for(t=0,e=g.length;t<e;t++)g[t].kill&&g[t].kill(),g[t]._isHidden=null,g[t]=null;if(c)for(t=0,e=c.length;t<e;t++)c[t].kill&&c[t].kill(),c[t]._isHidden=null,c[t]=null;g=f=c=null}(),h.parentNode&&h.parentNode.removeChild(h),h=null},h.deactivateCells=function(){for(var t=0,e=f.length;t<e;t++)f[t].removeEvents&&f[t].removeEvents();for(t=0,e=g.length;t<e;t++)g[t].removeEvents&&g[t].removeEvents();if(c)for(t=0,e=c.length;t<e;t++)c[t].removeEvents&&c[t].removeEvents()},h.updateOptions(t),h&&"function"==typeof h._onInitCallback&&h._onInitCallback(h),h}function Cell(r,e,t,i){var o,g,h,m,y=document.createElement("div");y._zoomDepth=e._zoomDepth,y._width=Math.ceil(e._width),y._height=Math.ceil(e._height),y._ratio=y._height/y._width,y._data=r,y._parent=e,y._realIndex=t,y._attributes=i,y._mobileAlign=i.alignOnMobile,y._lastWinWidth=window.innerWidth,y._layerArr=[],y._onBuildCallback=null,y._onAddLayersCallback=null,y._onOverlayShowCallback=null,y._onOverlayHideCallback=null,y._onAddOverlayCallback=null,y._onAddEventsCallback=null,y._onRemoveEventsCallback=null,y._onMouseMoveCallback=null,y._onMouseOverCallback=null,y._onMouseOutCallback=null,y._onRefreshCallback=null,y.onSetSizeCallback=null;var n=!1;Assets.LOADED_PROJECTS_GRID_ITEMS||(Assets.LOADED_PROJECTS_GRID_ITEMS=[]);var s=Assets.LOADED_PROJECTS_GRID_ITEMS[r[r.length-1]],p="Firefox"===BrowserDetect.BROWSER_NAME&&35===BrowserDetect.BROWSER_VERSION&&"HomeTemplate"===ContentManager._activeTemplates[0].templateName;function a(){var t=0,e=r.length,i=10;if(!o)return!1;for(o.style.background=y._attributes?"#"+y._attributes.bgColor:"";t<e;t++){var n=AssetLoader.getAsset(r[t]);n._orgW=n.width||n.naturalWidth,n._orgH=n.height||n.naturalHeight,n._ratio=n._orgH/n._orgW,n._orgRatioW=n._ratio,n._orgRatioH=n._orgW/n._orgH,n._orgX=-(n._orgW-y._width)/2,n._orgY=-(n._orgH-y._height)/2,n._orgZ=i,y._mobileAlign,i+=10,p||TweenMax.set(n,{x:n._orgX,y:n._orgY,z:n._orgZ}),n.style.pointerEvents="none",g.appendChild(n),y._layerArr.push(n)}if(s);else{o.style.opacity=0,TweenMax.to(o,.3,{opacity:1,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(y,0,{delay:.25,overwrite:"all",onComplete:function(){Assets.LOADED_PROJECTS_GRID_ITEMS[r[r.length-1]]||(Assets.LOADED_PROJECTS_GRID_ITEMS[r[r.length-1]]=r[r.length-1]),y&&(y._isLoaded=!0,"function"==typeof y._onAddLayersCallback&&y._onAddLayersCallback(y._layerArr))}})}y.refresh()}function l(){n&&(n=!1,y._parent._addDesktopEvents&&(y.removeEventListener("mousemove",c),y.removeEventListener("mouseover",d),y.removeEventListener("mouseout",u)),y._onMouseMove=null,y._onMouseOver=null,y._onMouseOut=null,y&&"function"==typeof y._onRemoveEventsCallback&&y._onRemoveEventsCallback(y))}function c(t,e){t=t||window.event;var i=e||t.target||t.currentTarget||t.srcElement;if(p)return!1;if((BrowserDetect.IE9||BrowserDetect.IE10)&&i._rel===y&&(i=y),!i._parent)return!1;var n=v(i),r=n.left,o=n.top,s=i._width,a=i._height,l=i._parent._scroll;i._mouse={x:t.clientX-r+l.x,y:t.clientY-o+l.y,winX:t.clientX,winY:t.clientY};var c=(s/2-i._mouse.x)/s*2;c=1<c?c=1:c<-1?c=-1:c;var h=(a/2-i._mouse.y)/a*2;h=1.25<h?h=1.25:h<-1.25?h=-1.25:h;var d=c*(BrowserDetect.IE11?5:15)*.75,u=5*h*.75;TweenMax.to(g,.5,{delay:0,rotationY:d,rotationX:-u,ease:Quad.easeOut,overwrite:"all"}),y&&"function"==typeof y._onMouseMoveCallback&&y._onMouseMoveCallback(i._mouse)}function d(t,e,i){t=t||window.event;var n=e||t.target||t.currentTarget||t.srcElement;if((BrowserDetect.IE9||BrowserDetect.IE10)&&n._rel===y&&(n=y),n._isSelected=!0,n._overlay&&n._parent&&n._parent._showOverlays&&(!e||i)&&h.show(t,n),n._parent&&n._parent._animateHovers)for(var r=0,o=n._zoomDepth*n._layerArr.length,s=Math.ceil(o/n._layerArr.length)/1,a=0,l=n._layerArr.length;a<l;a++){var c=n._layerArr[l-a-1];TweenMax.to(c,3,{delay:r,x:c._orgX,y:c._orgY,z:o,ease:Elastic.easeOut,overwrite:"all"}),r+=.05,o-=s}y&&"function"==typeof y._onMouseOverCallback&&y._onMouseOverCallback(n._mouse)}function u(t,e,i){t=t||window.event;var n=e||t.target||t.currentTarget||t.srcElement;if((BrowserDetect.IE9||BrowserDetect.IE10)&&n._rel===y&&(n=y),n._isSelected=!1,n._overlay&&n._parent&&n._parent._showOverlays&&(!e||i)&&h.hide(t,n),n._parent&&n._parent._animateHovers){var r=0,o=1;TweenMax.to(g,o,{delay:r,rotationY:0,rotationX:0,ease:Quad.easeInOut,overwrite:"all"});r=0,o=1.5;for(var s=10,a=0,l=n._layerArr.length;a<l;a++){var c=n._layerArr[a];TweenMax.to(c,o,{delay:r,x:c._orgX,y:c._orgY,z:s,ease:Quad.easeInOut,overwrite:"all"}),r+=.05,s+=10}}y&&"function"==typeof y._onMouseOutCallback&&y._onMouseOutCallback(n._mouse)}function f(t,e,i){var n,r,o,s,a,l,c,h,d,u=e._parent._resizeLayersToFillCell;if(u){"width"===u?(t._orgW=e._width||t.width||t.naturalWidth,t._orgH=e._width*t._ratio||t.height||t.naturalHeight):(t._orgH=e._height||t.height||t.naturalHeight,t._orgW=e._height*t._orgRatioH||t.width||t.naturalWidth);var p=BrowserDetect.IE9?1.2:1;if(t._orgW=Math.ceil(t._orgW)*p,t._orgH=Math.ceil(t._orgH)*p,t._ratio=t._orgH/t._orgW,e._parent&&e._parent._animateRefreshes){var f=.03*e._realIndex;e._lastWinWidth<window.innerWidth&&(f=e._parent?.03*(e._parent.getAllCells().length-e._realIndex):0),TweenMax.to(t,1,{delay:f,width:t._orgW,height:t._orgH,ease:Expo.easeInOut})}else t.style.width=t._orgW+"px",t.style.height=t._orgH+"px"}t._orgX=-(t._orgW-e._width)/2,t._orgY=-(t._orgH-e._height)/2,t._orgZ=i,y._mobileAlign,n=t,r=y._parent._perspective,o=n._orgW,s=n._orgH,a=n._orgZ+g._orgZ,l=Math.ceil(o*r/(r-a)),c=Math.ceil(s*r/(r-a)),h=l/o,d=c/s,n._perspective=r,n._orgWidth=o,n._orgHeight=s,n._zSpace=a,n._newWidth=l,n._newHeight=c,n._widthPercent=h,n._heightPercent=d,m&&m.update()}function _(t,e){t=t||window.event;e._mouse;var i=e._parent._scroll,n=v(e),r=e._width,o=e._height,s=(t.clientX+i.x-n.left-r/2)*(o<r?o/r:1),a=(t.clientY+i.y-n.top-o/2)*(r<o?r/o:1),l=Math.round((Math.atan2(a,s)*(180/Math.PI)+180)/90+3)%4;return l=0===l?"top":1===l?"right":2===l?"bottom":3===l?"left":l}function v(t){var e,i,n,r,o={top:0,left:0},s=t&&t.ownerDocument;return e=s.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=null!=(r=n=s)&&r===r.window?n:9===n.nodeType&&n.defaultView,{top:o.top+i.pageYOffset-e.clientTop,left:o.left+i.pageXOffset-e.clientLeft}}return y._loadAssets=function(t){if(s&&(y._isLoaded=!0,y&&"function"==typeof y._onAddLayersCallback))return y._onAddLayersCallback(y._layerArr),!1;var e=r;e?AssetLoader.loadGroup(new AssetGroup(e,{onComplete:function(){a(),t&&t()},onUpdate:null})):console.log("Error: No assets provided")},y.removeEvents=l,y.refresh=function(t,e,i){var n=y;if(t&&(i?(n._width=t,n._height=n._width*n._ratio):y.setSize(t,e),n._width=Math.ceil(n._width),n._height=Math.ceil(n._height)),n._parent&&n._parent._animateRefreshes){var r=.03*n._realIndex;n._lastWinWidth<window.innerWidth&&(r=n._parent?.03*(n._parent.getAllCells().length-n._realIndex):0),TweenMax.to(n,1,{delay:r,width:n._width,height:n._height,ease:Expo.easeInOut})}else n.style.width=n._width+"px",n.style.height=n._height+"px";if(n._overlay.style.width=n._width+"px",n._overlay.style.height=n._height+"px",TweenMax.set(n._overlay,{opacity:n._isSelected?1:0,x:0,y:-n._height,z:0}),n._parent._animateHovers)for(var o=0,s=n._layerArr.length,a=10;o<s;o++){f(c=n._layerArr[o],n,a),a+=10,TweenMax.set(c,{x:c._orgX,y:c._orgY,z:a})}else{a=n._zoomDepth*n._layerArr.length;var l=Math.ceil(a/n._layerArr.length)/1;for(o=0,s=n._layerArr.length;o<s;o++){var c;f(c=n._layerArr[s-o-1],n,a),p||TweenMax.set(c,{x:c._orgX,y:c._orgY,z:a}),a-=l}}return n._lastWinWidth=window.innerWidth,y&&"function"==typeof y._onRefreshCallback&&y._onRefreshCallback(y),y&&"function"==typeof y._parent._onRefreshSingleCellCallback&&y._parent._onRefreshSingleCellCallback(y),y},y.setSize=function(t,e){return y._width=t,y._height=e,y._ratio=y._height/y._width,"function"==typeof y.onSetSizeCallback&&y.onSetSizeCallback({width:y._width,height:y._height,ratio:y._ratio}),y},y.getOffset=v,y.kill=function(){if(l(),h&&(h.parentNode&&h.parentNode.removeChild(h),y._overlay=null,h.show=null,h.hide=null,h=null),m&&(m.update=null,m=null),y){for(var t=0,e=y._layerArr.length;t<e;t++)g&&g.removeChild(y._layerArr[t]),y._layerArr[t]=null;y._layerArr[t]=null,y._data=null,g&&o.removeChild(g),o&&(y.removeChild(o),y._container=null,o=null),g&&(y._wrapper=null,g=null),y._parent=null,y._realIndex=null,y._attributes=null,y._onBuildCallback=null,y._onAddLayersCallback=null,y._onOverlayShowCallback=null,y._onOverlayHideCallback=null,y._onAddOverlayCallback=null,y._onAddEventsCallback=null,y._onRemoveEventsCallback=null,y._onMouseMoveCallback=null,y._onMouseOverCallback=null,y._onMouseOutCallback=null,y._onRefreshCallback=null,y.onSetSizeCallback=null,y=null}},function(){if(y.style.width=y._width+"px",y.style.height=y._height+"px",y.style.position="relative",y.style.overflow=e._overflow,y.style.background=y._attributes?"#"+y._attributes.bgColor:"",(o=document.createElement("div")).style.width="100%",o.style.height="100%",o.style.pointerEvents="none",p||TweenMax.set(o,{perspective:e._perspective,transformStyle:"preserve-3d"}),(g=new SmartObject).style.position="relative",g.style.width="100%",g.style.height="100%",g.style.pointerEvents="none",g._orgZ=100,p||TweenMax.set(g,{transformStyle:"preserve-3d",x:0,y:0,z:g._orgZ}),"Explorer"===BrowserDetect.BROWSER_NAME&&TweenMax.set(g,{perspective:e._perspective}),o.appendChild(g),y.appendChild(o),y._container=o,y._wrapper=g,function(){if((h=new SmartObject).style.position="absolute",h.style.width=y._width+"px",h.style.height=y._height+"px",h.style.color="#fff",h.style.textAlign="left",h.style.pointerEvents="none",h.style.padding="20px",h.style.font="25px/27px ClarendonLTStdBold",y._attributes)var t=y._attributes.overlayColor||Math.random().toString(16).slice(2,8),e=y._attributes.headline,i=y._attributes.subHeadline,n=y._attributes.subHeadlineColor||"000";else var t="",e="",i="",n="000";var r,o=document.createElement("div");o.style.width="100%",o.style.height="100%",o.style.color="#fff",o.style.background="rgba("+((r=parseInt(t,16))>>16&255)+","+(r>>8&255)+","+(255&r)+", 0.80)";var s=new SmartObject;s.style.position="absolute",s.style.left="40px",s.style.bottom="90px",s.style.width="80%",s.innerHTML=e+"<br/><span style='color:#"+n+";'>"+i+"</span>";var a=new SmartObject;a.style.marginTop="20px",a.style.display="block",a.style.width="35px",a.style.height="35px",a.style.borderRadius="100%",a.style.cursor="pointer",a.style.background="#fff",a.style.left="40px",a.style.bottom="40px";var l=AssetLoader.getAsset("assets/images/ui/dots@2.png");if(l.width=35,l.height=35,a.appendChild(l),BrowserDetect.MOBILE||BrowserDetect.TABLET){var c=a.cloneNode(!0);c._parent=y._parent,c.addEventListener("click",function(t){h._isVisible?h.hide(t,y):(h.show(t,y),clearTimeout(y._lastTouchedTimeout),y._lastTouchedTimeout=setTimeout(function(){h.hide(t,y)},4e3))}),"HomeTemplate"!==ContentManager._activeTemplates[0].templateName&&y.appendChild(c)}o.appendChild(s),o.appendChild(a),h.appendChild(o),y._parent._showOverlays&&y.appendChild(h),(y._overlay=h).show=function(t,e){(e=e||y)._mouseInDirection=_(t,e),h._isVisible=!0,TweenMax.to(h,.3,{opacity:1,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(l,.5,{delay:.1,rotation:180,ease:Expo.easeOut,overwrite:"all"}),y&&"function"==typeof y._onOverlayShowCallback&&y._onOverlayShowCallback(h)},h.hide=function(t,e){(e=e||y)._mouseOutDirection=_(t,e),h._isVisible=!1,TweenMax.to(h,.3,{opacity:0,ease:Linear.easeNone,overwrite:"all"}),TweenMax.to(l,.5,{rotation:0,ease:Expo.easeOut,overwrite:"all"}),y&&"function"==typeof y._onOverlayHideCallback&&y._onOverlayHideCallback(h)},y&&"function"==typeof y._onAddOverlayCallback&&y._onAddOverlayCallback(h)}(),BrowserDetect.IE9||BrowserDetect.IE10){var t=Assets.getTransparentBg();(t._rel=y).appendChild(t)}s&&a(),y&&"function"==typeof y._onBuildCallback&&y._onBuildCallback(y),y&&"function"==typeof y._parent._onAddSingleCellCallback&&y._parent._onAddSingleCellCallback(y)}(),n?console.log("Error: Events already added"):(n=!0,!y._parent._addDesktopEvents||BrowserDetect.MOBILE||BrowserDetect.TABLET||(y.addEventListener("mousemove",c),y.addEventListener("mouseover",d),y.addEventListener("mouseout",u)),y._onMouseMove=c,y._onMouseOver=d,y._onMouseOut=u,y&&"function"==typeof y._onAddEventsCallback&&y._onAddEventsCallback(y)),y}function FullScreenStackTransition(t){var c,h,d={};d._isAnimating=!1,d._options={speed:1,delay:0,magnitude:2,direction:"up",darkenOverlay:!1,onStart:null,onComplete:null,allowDeffering:!0};var u=[];function p(){for(var t=1,e=arguments.length;t<e;t++)for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(arguments[0][i]=arguments[t][i]);return arguments[0]}return d.setOptions=function(t){p(d._options,t)},d.move=function(t,e,i,n){if(t&&e)if(d._isAnimating){if(console.log("Error: busy animating",t,e),n);else if(d._options.allowDeffering){console.log("Assets.CLICKED_MENU_LINK",Assets.CLICKED_MENU_LINK);var r={oldLayer:t,newLayer:e,newOptions:i};u.push(r)}}else{var o={speed:d._options.speed,delay:d._options.delay,magnitude:d._options.magnitude,direction:d._options.direction,onStart:d._options.onStart,onComplete:d._options.onComplete,maxWidth:window.innerWidth,maxHeight:window.innerHeight,extraDelay:.05};function s(t,e,i){t._isAnimating=!0,"function"==typeof e.onStart&&e.onStart(t)}function a(t,e,i){Assets.showAllInvisibleChildren(i,"PageTransitionsManager"),"function"==typeof e.onComplete&&e.onComplete(d),t._isAnimating=!1,function(){if(!d)return;var t=u.shift();if(!t)return;var e=t.oldLayer;Assets.MAIN_MENU&&Assets.MAIN_MENU._isOpen?t.oldLayer=Assets.MAIN_MENU:t.oldLayer=h;e!==t.oldLayer&&(t.oldLayer.style.display="none");d.move(t.oldLayer,t.newLayer,t.newOptions)}()}p(o,i),c=t,h=e,i,Assets.hideAllInvisibleChildren(t,"PageTransitionsManager"),"none"===t.style.display&&(t.style.display="block"),"none"===e.style.display&&(e.style.display="block");var l=parseInt(t.style.zIndex)||0;99<l&&(l=10),"up"===o.direction?(t.style.zIndex=l+1,e.style.zIndex=l+2,TweenMax.set(e,{x:0,y:Math.ceil(o.maxHeight+2),z:0}),TweenMax.to(t,o.speed,{delay:o.delay+o.extraDelay,x:0,y:-Math.ceil(o.maxHeight/o.magnitude),z:0,ease:Expo.easeInOut,onStart:s,onComplete:a,onStartParams:[d,o,e],onCompleteParams:[d,o,e]})):"down"===o.direction?(t.style.zIndex=l+2,e.style.zIndex=l+1,TweenMax.set(e,{x:0,y:-Math.ceil(o.maxHeight/o.magnitude-2),z:0}),TweenMax.to(t,o.speed,{delay:o.delay+o.extraDelay,x:0,y:Math.ceil(o.maxHeight),z:0,ease:Expo.easeInOut,onStart:s,onComplete:a,onStartParams:[d,o,e],onCompleteParams:[d,o,e]})):"left"===o.direction?(TweenMax.set(e,{x:Math.ceil(o.maxWidth+2),y:0,z:0}),TweenMax.to(t,o.speed,{delay:o.delay+o.extraDelay,x:-Math.ceil(o.maxWidth/o.magnitude),y:0,z:0,ease:Expo.easeInOut,onStart:s,onComplete:a,onStartParams:[d,o,e],onCompleteParams:[d,o,e]})):"right"===o.direction&&(TweenMax.set(e,{x:-Math.ceil(o.maxWidth/o.magnitude-2),y:0,z:0}),TweenMax.to(t,o.speed,{delay:o.delay+o.extraDelay,x:Math.ceil(o.maxWidth),y:0,z:0,ease:Expo.easeInOut,onStart:s,onComplete:a,onStartParams:[d,o,e],onCompleteParams:[d,o,e]})),TweenMax.to(e,o.speed,{delay:o.delay-o.extraDelay,x:0,y:0,z:0,ease:Expo.easeInOut})}else console.log("Error: missing oldLayer or newLayer")},d.abort=function(){c&&TweenMax.killTweensOf(c),h&&TweenMax.killTweensOf(h)},d.kill=function(){d.parentNode&&d.parentNode.removeChild(d),d=null},d.setOptions(t),d}function TinyTouchController(t,c){var h={};function e(t){if(null==(t=t||window.event).targetTouches||1==t.targetTouches.length){var e=d(t);h.isActive=!0,h.startPoint.x=e.x,h.startPoint.y=e.y,h.e=t,h.state="Started",c&&c(h),document.addEventListener("touchmove",i),document.addEventListener("touchend",n),document.addEventListener("touchcancel",n)}}function i(t){if((t=t||window.event).preventDefault(),h.isActive&&(null==t.targetTouches||1==t.targetTouches.length)){var e=d(t);h.stopPoint.x=e.x,h.stopPoint.y=e.y,h.direction=(s=h.startPoint,a=h.stopPoint,l=Math.abs(s.x-a.x),Math.abs(s.y-a.y)<=l?0<s.x-a.x?"left":"right":0<s.y-a.y?"up":"down"),h.distance=(i=h.startPoint,n=h.stopPoint,r=n.x-i.x,o=i.y-n.y,Math.round(Math.sqrt(r*r+o*o))),h.difference={x:h.stopPoint.x-h.startPoint.x,y:h.stopPoint.y-h.startPoint.y},h.e=t,h.state="Moving",c&&c(h)}var i,n,r,o,s,a,l}function n(t){t=t||window.event,h.isActive=!1,h.e=t,h.state="Stopped",c&&c(h),r()}function r(){document.removeEventListener("touchmove",i),document.removeEventListener("touchend",n),document.removeEventListener("touchcancel",n),h.isActive=!1,h.e=null,h.state=null,h.direction=null,h.distance=0,h.difference=null,h.startPoint={x:0,y:0},h.stopPoint={x:0,y:0}}function d(t){var e={x:0,y:0};return 1==(t=t||window.event).targetTouches.length&&(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY),e}return h.isActive=!1,h.e=null,h.state=null,h.direction=null,h.distance=0,h.difference=null,h.startPoint={x:0,y:0},h.stopPoint={x:0,y:0},h.threshold=t||1,h.addEvents=function(){document.addEventListener("touchstart",e)},h.removeEvents=function(){document.removeEventListener("touchstart",e)},h.kill=function(){r(),h.removeEvents(),h=null},h}function StackTransition(t,o,e,i){var s,n,a=document.createElement("div");a.speed=1,a.delay=.1,a.magnitude=2,a.showLoader=!1,a.loaderDelay=.1,a.darkenOverlay=!1,a.overlayDarkness=.5,a.addDesktopEvents=!1!==e,a._gui,a._onInitCallback=null,a._onLoadAssetsCallback=null,a._onBuildCallback=null,a._onAddLayersCallback=null,a._onAddLoaderCallback=null,a._onAddEventsCallback=null,a._onRemoveEventsCallback=null,a._onChangeLayerCallback=null,a._onChangeLayerStartCallback=null,a._onChangeLayerCompleteCallback=null,a._onScrollCallback=null,a._onDocumentClickCallback=null,a._onKeyDownCallback=null,a._onTouchCallback=null,a._onResizeCallback=null,a._slideshowInt=null;var l,c,h,d,u=[],r={down:null,up:null},p=!1,f=t||["_1.jpg","_2.jpg","_3.jpg"],g=i||f.length,m="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";function y(){a&&"function"==typeof a._onLoadAssetsCallback&&a._onLoadAssetsCallback(a),function(){var t=0,e=g;for(l=e-1;t<e;t++){E();var i=new SmartObject;i.style.width="100%",i.style.height="100%",i.style.overflow="hidden",i.style.color="#fff",i.style.fontWeight="bold",i.style.font="1500%/0px Helvetica",i.style.position="absolute",i._i=t,i.style.display="none",TweenMax.set(i,{x:0,y:0,z:0});var n=document.createElement("div");if(n.style.width="100%",n.style.height="100%",n.style.pointerEvents="none",n.style.opacity=0,n.style.background="rgba(0,0,0,"+a.overlayDarkness+")",!o){var r=SmartObject(AssetLoader.getAsset(f[t]));r.style.position="absolute",r._orgW=r.width||r.naturalWidth,r._orgH=r.height||r.naturalHeight,r._ratio=r._orgH/r._orgW,r._orgRatioW=r._ratio,r._orgRatioH=r._orgW/r._orgH,i._img=r,i.appendChild(r)}i._overlay=n,i.appendChild(n),i.resize=function(t,e){var e=e||this._img;if(e){var i,n,r=e.parentNode.offsetWidth,o=e.parentNode.offsetHeight,s=e._ratio,a=Math.ceil(1*r),l=Math.ceil(a*s);l<o&&(l=Math.ceil(1*o),a=Math.ceil(l/s)),i=Math.ceil((r-a)/2),n=Math.ceil((o-l)/2),e.style.width=a+"px",e.style.height=l+"px",TweenMax.set(e,{x:i,y:n,z:0}),e._x=i,e._y=n,e._width=a,e._height=l}},u.push(i),a.appendChild(i)}u[u.length-1].style.display="block",a&&"function"==typeof a._onAddLayersCallback&&a._onAddLayersCallback(a)}(),function(){(c=new SmartObject).style.width="100%",c.style.height="100%",c.style.display="table",c.style.textAlign="center",c.style.color="#fff",c.style.fontWeight="bold",c.style.font="200%/0px Helvetica",c.style.position="absolute",c.style.backgroundColor=E(),c.style.opacity=0,TweenMax.set(c,{x:0,y:0,z:0});var t=document.createElement("div");t.style.display="table-cell",t.style.verticalAlign="middle",t.style.pointerEvents="none",t.innerHTML="Loading awesomeness...",c._overlay=t,c.appendChild(t),a.appendChild(c),a&&"function"==typeof a._onAddLoaderCallback&&a._onAddLoaderCallback(a)}(),C(),a&&"function"==typeof a._onBuildCallback&&a._onBuildCallback(a)}function _(t,e){if(s._isAnimating||Assets.MAIN_MENU&&Assets.MAIN_MENU._isOpen)return!1;p=!0;var i,n,r=u[l];"up"===e?(l=l>=u.length-1?-1:l,i=u[++l],n="down"):"down"===e?(l=l<=0?u.length:l,i=u[--l],n="up"):"left"===e?(l=l<=0?u.length:l,i=u[--l],n="right"):"right"===e&&(l=l>=u.length-1?-1:l,i=u[++l],n="left"),h={oldLayer:r,newLayer:i,moveDirection:n},a.showLoader&&(d=h,(i=c).style.opacity=1,c.style.backgroundColor=E()),r&&i&&n&&requestAnimFrame(function(){s.move(r,i,{direction:n,onStart:v,onComplete:b})}),a&&"function"==typeof a._onChangeLayerCallback&&a._onChangeLayerCallback(h)}function v(){a&&"function"==typeof a._onChangeLayerStartCallback&&a._onChangeLayerStartCallback(h)}function b(){if(p=!1,d){var t=c,e=d.newLayer,i=d.moveDirection;h=d,d=null,s.move(t,e,{direction:i,onStart:v,onComplete:b,delay:a.loaderDelay})}a&&"function"==typeof a._onChangeLayerCompleteCallback&&a._onChangeLayerCompleteCallback(h)}function w(t){if(t=t||window.event,p)return!1;a.clearSlideshowInt();var e,i,n,r,o=(e=(e=t)||window.event).detail<0?1:0<e.wheelDelta?1:-1,s=(n=(i=(i=t)||window.event).wheelDelta,(r=i.detail)?n?0<n/r/40*r?1:-1:-r/3:n/120);0<o?.5<=Math.abs(s)&&_(0,"up"):o<0&&.5<=Math.abs(s)&&_(0,"down"),a&&"function"==typeof a._onScrollCallback&&a._onScrollCallback(a)}function x(t){var e=(t=t||window.event).target||t.currentTarget;if(!r.down)return!1;e===r.down?_(0,"down"):e===r.up&&_(0,"up"),a.clearSlideshowInt(),a&&"function"==typeof a._onDocumentClickCallback&&a._onDocumentClickCallback(a)}function T(t,e){(t=t||window.event).target||t.currentTarget;if(p)return!1;a.clearSlideshowInt(),"38"==t.keyCode?_(0,"up"):"40"==t.keyCode||"32"==t.keyCode?_(0,"down"):"37"==t.keyCode||t.keyCode,a&&"function"==typeof a._onKeyDownCallback&&a._onKeyDownCallback(a)}function A(t){if("Stopped"===t.state&&t.distance>t.threshold){if(p)return!1;a.clearSlideshowInt(),"up"===t.direction?_(t.e,"down"):"down"===t.direction?_(t.e,"up"):"left"===t.direction||t.direction}a&&"function"==typeof a._onTouchCallback&&a._onTouchCallback(a)}function C(t){t=t||window.event;for(var e=0,i=u.length;e<i;e++){u[e].resize(t)}a&&"function"==typeof a._onResizeCallback&&a._onResizeCallback(t)}function E(){return"#"+Math.random().toString(16).slice(2,8)}return a.onDATchange=function(){s.setOptions({speed:a.speed,delay:a.delay,magnitude:a.magnitude,darkenOverlay:a.darkenOverlay});for(var t=0,e=u.length;t<e;t++){var i=u[t]._overlay;i.style.background="rgba(0,0,0,"+a.overlayDarkness+")",i.style.opacity=0}},a.setup=function(){o?y():f?AssetLoader.loadGroup(new AssetGroup(f,{onComplete:y,onUpdate:null})):console.log("Error: No assets provided")},a.addEvents=function(){window.addEventListener("resize",C),a.addDesktopEvents&&(window.addEventListener("keydown",T),window.addEventListener("DOMMouseScroll",w),window.addEventListener(m,w),a.addEventListener("click",x)),n.addEvents(),a&&"function"==typeof a._onAddEventsCallback&&a._onAddEventsCallback(a)},a.removeEvents=function(){window.removeEventListener("resize",C),a.addDesktopEvents&&(window.removeEventListener("keydown",T),window.removeEventListener("DOMMouseScroll",w),window.removeEventListener(m,w),a.removeEventListener("click",x)),n.removeEvents(),a&&"function"==typeof a._onRemoveEventsCallback&&a._onRemoveEventsCallback(a)},a.getLayer=function(t){return u[t]},a.getAllLayers=function(){return u},a.kill=function(){a.removeEvents(),n.kill(),d=h=null;for(var t=0,e=u.length;t<e;t++)u[t]&&u[t].parentNode&&u[t].parentNode.removeChild(u[t]),u[t]=null;u=null,a.removeChild(c),c=null,a.parentNode&&a.parentNode.removeChild(a),a=null},a.changeLayer=_,a.setSlideshowInt=function(){window.event;a._slideshowInt=setInterval(function(){_(0,"down")},8e3)},a.clearSlideshowInt=function(){a._slideshowInt&&(clearInterval(a._slideshowInt),a._slideshowInt=null)},a.style.width="100%",a.style.height="100%",s=new FullScreenStackTransition({speed:Assets.PAGE_TRANSTION_SPEED,allowDeffering:!1}),a.transitionManager=s,n=new TinyTouchController(50,A),a&&"function"==typeof a._onInitCallback&&a._onInitCallback(a),a}Assets.firstRun=!0,Assets.LAYER_ALL=null,Assets.LAYER_TOP=null,Assets.LAYER_MID=null,Assets.LAYER_BOT=null,Assets.DATA_SITE=null,Assets.DATA_STATIC=null,Assets.DATA_PAGES=null,Assets.DATA_URL=null,Assets.CDN_URL_SMALL="",Assets.CDN_URL_LARGE="",Assets.SITE_VERSION="",Assets.SCROLLBAR_WIDTH=0,Assets.CULTURE_ARR=[],Assets.CAT_ANIMATION_RUN=!1,Assets.HOME_CAT=null,Assets.DELAY_CASE_IMAGES=!1,Assets.FIRST_PAGE_TRANSITION=!0,Assets.getWindowWidth=function(){return document.documentElement.clientWidth-Assets.SCROLLBAR_WIDTH},Assets.getWindowHeight=function(){return window.innerHeight},Assets.getScrollbarWidth=function(){var t=document.createElement("div");t.className="scrollbar-measure",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},Assets.hideAllInvisibleChildren=function(t,e){return!1},Assets.showAllInvisibleChildren=function(t,e){return!1},Assets.getTransparentBg=function(){var t=AssetLoader.getAsset("assets/images/ui/transparent.gif");return t.style.position="absolute",t.style.width="100%",t.style.height="100%",t.style.display="block",t.style.pointerEvents="none",t.style.top=0,t.style.left=0,t},function(){var s=document.getElementsByTagName("head")[0]||document.documentElement;this.load=function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.url=t.url||location.href,t.data=t.data||null,t.type=t.type||"json",t.action=t.action||"GET";var i=t.callback||function(){},n=t.callbackError||function(){};if("jsonp"==t.type){var r="_"+Math.random().toString(36).substring(7),o=document.createElement("script");window[r]=function(t){i(t)},t.url=t.url.replace("callback=?","callback="+r),o.src=t.url,s.appendChild(o)}else"json"==t.type&&(e.onreadystatechange=function(){4==e.readyState&&(e.status<300?(i(e.responseText),e.onreadystatechange=null,e=null):300<e.status&&(n(),e.onreadystatechange=null,e=null))});return e.open(t.action,t.url,!0),e.send(t.data),e},window.HM_JSON=this}(),String.prototype.trunc=function(t,e){var i=this.length>t,n=i?this.substr(0,t-1):this;return n=e&&i?n.substr(0,n.lastIndexOf(" ")):n,i?n+"&hellip;":n},Array.prototype.remove=function(t){var e=this.indexOf(t);-1!=this.indexOf(t)&&this.splice(e,0)},Array.prototype.contains=function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1},Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i},function(){for(var t,e=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],n=i.length,r=window.console=window.console||{};n--;)r[t=i[n]]||(r[t]=e)}(),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},function c(){var f={},l=[{menuItemName:"Minify JS",onClickFunction:function(){var r="",o=document.getElementsByTagName("script"),s=o.length-1,a=0;function t(t){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var t=i.responseText;0<=t.indexOf("style.float")&&alert("Potential error in "+n+":\nYou are using style.float - please change this to style.cssFloat throughout your code.");var e=t+"\n";r+=e,g.innerHTML="<b>Loading scripts:</b><br>"+a+" of "+s,l()}};var n=o[t].src,e=o[t].getAttribute("data-minify");"no"===e||""===n||null===n||-1<n.indexOf("www.google-analytics.com")||-1<n.indexOf("apis.google.com")||-1<n.indexOf("Minify.js")||0<=n.indexOf(".com")||-1<n.indexOf("BugTracker_min.js")||-1<n.indexOf("BugTracker.js")?(c.compileInlineScripts&&"no"!==e&&(r+=o[t].innerHTML),l()):(i.open("GET",n,!0),i.send(null))}function l(){var e;a<s?t(++a):(e=r,function(t){var p=this;window.XMLHttpRequest&&(p.xmlHttpReq=new XMLHttpRequest),p.xmlHttpReq.open("POST",t,!0),p.xmlHttpReq.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.xmlHttpReq.onreadystatechange=function(){if(4==p.xmlHttpReq.readyState){var t=!1,e=p.xmlHttpReq.responseText,i=new DOMParser,n=i.parseFromString(e,"text/xml"),r=Number(n.getElementsByTagName("originalSize")[0].firstChild.nodeValue),o=Number(n.getElementsByTagName("compressedSize")[0].firstChild.nodeValue),s=100-Math.round(o/r*100)+"%",a=n.getElementsByTagName("error");if(0<a.length&&(t=!0),0==t){var l=n.getElementsByTagName("compiledCode")[0].firstChild.nodeValue;0<=l.indexOf("}(")&&alert("Potential error when merging:\nWhen the code gets merged all white space gets removed. It looks like you have not ended one of your functions() {}; with a semi colon ;. If you need to trouble shoot it search the min file for a place where it has '}('");var c="<b>Done:</b><br>Original size: "+r+"<br>Compiled size: "+o+"<br>Saved "+s+" off the original size",h="http://closure-compiler.appspot.com/"+n.getElementsByTagName("outputFilePath")[0].firstChild.nodeValue;g.innerHTML=h+"<br>"+c+"<br><br>Download the file <a style='pointer-events: all' href='"+h+"' download='"+f.jsOutputFilename+"'>here</a>"}else{for(var d="",u=0;u<a.length;u++)trace("checkForError : "+a[u].toString()),d+=a[u].firstChild.nodeValue;g.innerHTML="The Closure Compiler returned with the following errors: <br><br>"+d}g.pointerEvents="all"}},g.innerHTML="<b>Scripts loaded:</b><br>Sending to Closure Compuler",p.xmlHttpReq.send("compilation_level="+f.compilationLevel+"&output_format=xml&output_info=compiled_code&output_info=errors&output_info=statistics&output_file_name="+f.jsOutputFilename+"&js_code="+encodeURIComponent(e))}("http://closure-compiler.appspot.com/compile"))}t(0)}},{menuItemName:"Data-URI Creator",onClickFunction:function(){var s=0,a=1,l="",c=0;function r(t){var e=new XMLHttpRequest,o="";e.addEventListener(Event.LOAD,function t(e){var i=e.currentTarget.responseText;c+=i.length;o+=function(t){var e,i,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",s=0,a=t.length;for(;s<a;){if(e=255&t.charCodeAt(s++),s==a){o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4),o+="==";break}if(i=t.charCodeAt(s++),s==a){o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4|(240&i)>>4),o+=r.charAt((15&i)<<2),o+="=";break}n=t.charCodeAt(s++),o+=r.charAt(e>>2),o+=r.charAt((3&e)<<4|(240&i)>>4),o+=r.charAt((15&i)<<2|(192&n)>>6),o+=r.charAt(63&n)}return o}(i)+"|";e.currentTarget.removeEventListener(Event.LOAD,t);l+=o;s++;if(s==a){g.innerHTML="CreateDataURI:<br>Done, converted "+a+" images into 1 file, saving "+(a-1)+" HTTP Requests",g.innerHTML+="<br>Images loaded as a total of "+Math.round(c/1e3)+" kb";var n="a DECREASE",r=c-l.length;r<0&&(r*=-1,n="an INCREASE"),g.innerHTML+="<br>As data URI the images are now "+Math.round(l.length/1e3)+" kb, which means "+n+" of "+Math.round(r/1e3)+" kb",g.innerHTML+="<br>Remember to serve gzipped, the data-uri size would then be roughly (estimated) "+Math.round(l.length/1.4/1e3)+" kb",g.innerHTML+='<br><a href="data:text/plain;text,'+l+'" download="'+f.dataURIOutputFilename+'">Download file</a>'}},!0);var i=t;trace(i);var n=i.lastIndexOf(".");"jpg"==(i=null!=n?i.substring(n+1,i.length):"png")&&(i="jpeg"),o=t+"|data:image/"+i+";base64,",e.open("GET",t,!1),e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.send(null)}null!=AssetLoader?function(t){c=s=0,l="";var e=t.length;a=e,g.innerHTML="CreateDataURI:<br>Converting "+e+" images into 1 file, saving "+(e-1)+" HTTP Requests";for(var i=0;i<e;i++){var n=t[i];r(n.id)}}(AssetLoader.assets):g.innerHTML="AssetLoader not found."}}];f.compilationLevel="SIMPLE_OPTIMIZATIONS",f.jsOutputFilename="minified.js",f.dataURIOutputFilename="datauri.txt";var r,g=null;window.addEventListener&&(r=[],window.addEventListener("keyup",function(t){r=[]},!1),window.addEventListener("keydown",function(t){r.push(t.keyCode);for(var e=0,i=0;i<r.length;i++){var n=r[i];17!=n&&77!=n||e++}2==r.length&&2==e&&function(){var t=document.createElement("div");t.style.position="absolute",t.style.zIndex=9999999999,t.style.top="0px",t.style.left="0px",t.style.width="100%",t.style.height="100%";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.width="100%",e.style.height="100%",e.style.opacity=.7,e.style.backgroundColor="#000000",t.appendChild(e);var i=document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left=window.innerWidth/2-225+"px",i.style.width="450px",i.style.height="300px",i.style.backgroundColor="#333333",t.appendChild(i);var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="150px",n.style.width="1px",n.style.height="300px",n.style.backgroundColor="#555555",i.appendChild(n);for(var r=0;r<l.length;r++){var o=l[r],s=document.createElement("div");s.style.position="absolute",s.style.color="#ffffff",s.style.fontSize="12px",s.style.fontFamily="arial, verdana",s.innerHTML=o.menuItemName,s.style.pointerEvents="all",s.style.top=20*r+20+"px",s.style.left="20px",s.addEventListener("click",o.onClickFunction),i.appendChild(s)}var a=document.createElement("div");a.style.position="absolute",a.style.top="20px",a.style.left="180px",a.style.width="250px",a.style.height="250px",a.innerHTML="Choose an action on the left hand side.",a.style.color="#ffffff",a.style.fontSize="12px",a.style.fontFamily="arial, verdana",i.appendChild(a),g=a,document.body.appendChild(t)}()},!1)),window.Minify=f}(window),function(e){var t={};function i(){Assets.PRELOADER=new Preloader,HM_JSON.load({url:"framework/site-structure.json",type:"json",callback:n})}function n(t){Assets.DATA_URL=JSON.parse(t),AJAX.load("framework/site-content.php",r,"GET")}function r(t){document.getElementById("PAGES").innerHTML=t,Assets.FULLSCREEN_TRANSITIONS=new FullScreenStackTransition({speed:Assets.PAGE_TRANSTION_SPEED,delay:0}),Assets.TRANSITIONS_MANAGER=new PageTransitionsManager,Assets.SCROLL_DISABLER=new ScrollDisabler,Assets.SCROLLBAR_WIDTH=Assets.getScrollbarWidth(),new FastClick(document.body),function(){Assets.LAYER_ALL=document.createElement("div"),Assets.LAYER_ALL.style["-webkit-backface-visibility"]="visible",Assets.LAYER_ALL.style.position="absolute",Assets.LAYER_ALL.id="LAYER_ALL",Assets.LAYER_ALL.style.width="100%",9==BrowserDetect.BROWSER_VERSION&&"Explorer"===BrowserDetect.BROWSER_NAME&&(Assets.LAYER_ALL.style.width=e.innerWidth+16+"px",e.addEventListener("resize",o));Assets.LAYER_ALL.style.height="100%",Assets.LAYER_ALL.style.overflowX="hidden",Assets.LAYER_ALL.style.overflowY="visible",document.body.appendChild(Assets.LAYER_ALL),Assets.LAYER_MID=document.createElement("div"),Assets.LAYER_MID.style.position="absolute",Assets.LAYER_MID.style.zIndex=2,Assets.LAYER_MID.id="LAYER_MID",Assets.LAYER_MID.style.width="100%",Assets.LAYER_MID.style.height="100%",Assets.LAYER_ALL.appendChild(Assets.LAYER_MID),Assets.LAYER_TOP=document.createElement("div"),Assets.LAYER_TOP.style.position="absolute",Assets.LAYER_TOP.style.zIndex=3,Assets.LAYER_TOP.id="LAYER_TOP",Assets.LAYER_ALL.appendChild(Assets.LAYER_TOP)}(),Assets.DATA_SITE=document.getElementById("SITE"),Assets.DATA_PAGES=document.getElementById("PAGES"),Assets.DATA_SITE.parentNode.removeChild(Assets.DATA_SITE),ContentManager.AUTOMATICALLY_TRACK_GOOGLE_ANALYTICS=!0,ContentManager.addTemplate("HomeTemplate",HomeTemplate),ContentManager.addTemplate("ProjectsTemplate",ProjectsTemplate),ContentManager.addTemplate("CaseTemplate",CaseTemplate),ContentManager.addTemplate("AboutTemplate",AboutTemplate),ContentManager.addTemplate("ContactTemplate",ContactTemplate),ContentManager.addTemplate("PeopleTemplate",PeopleTemplate),ContentManager.addTemplate("AwardsTemplate",AwardsTemplate),ContentManager.addTemplate("CultureTemplate",CultureTemplate),ContentManager.addTemplate("JournalTemplate",JournalTemplate),Assets.mid_overflow=Assets.LAYER_MID.style.overflow,Assets.all_overflow=Assets.LAYER_ALL.style.overflowY,Assets.body_overflow=document.body.style.overflow,AssetLoader.loadGroup(new AssetGroup(["assets/images/ui/arrow@2.png","assets/images/frontpage/hellomonday-logo@2.png","assets/images/ui/menu-ico@2.png","assets/images/ui/white-arrow-left@2.png","assets/images/ui/white-arrow-down@2.png","assets/images/ui/arrow_in_circle@2.png","assets/images/ui/dots_in_circle@2.png","assets/images/ui/offsite_icon_in_circle@2.png","assets/images/ui/navigationline@2.png","assets/images/ui/dots@2.png","assets/images/ui/dots-white@2.png","assets/images/ui/offsite_icon_arrow@2.png","assets/images/ui/offsite_icon_outline@2.png","assets/images/ui/transparent.gif","assets/images/ui/link_icon@2.png"],{onComplete:a,onUpdate:s,dataURIFile:"assets/datauri.txt",dataURIFileSizeInBytes:91e3,dataURIFilePercentageOfTotal:100}))}function o(t){Assets.LAYER_ALL.style.width=e.innerWidth+16+"px"}function s(t){Assets.PRELOADER.update(t)}function a(){if(BrowserDetect.MOBILE||BrowserDetect.TABLET||"Explorer"===BrowserDetect.BROWSER_NAME||"Mozilla"===BrowserDetect.BROWSER_NAME||"Opera"===BrowserDetect.BROWSER_NAME)HM.AssetLoader.init("",Assets.SITE_VERSION),l();else{HM.AssetLoader.init("",Assets.SITE_VERSION),l()}}function l(){Assets.MAIN_MENU=new MainMenu(Assets.DATA_PAGES),Assets.LAYER_MID.appendChild(Assets.MAIN_MENU),ContentManager.init(Assets.DATA_PAGES,"home"),Assets.PRELOADER.kill()}t.init=function(){ContentManager.USE_HISTORY_API=!0,ContentManager.DEFAULT_SUBFOLDER=document.getElementById("site-root").getAttribute("data-path"),Trace.isEnabled=!0,Trace.displayOnScreen=!1,(-1===e.location.href.indexOf("8888")||BrowserDetect.MOBILE||BrowserDetect.TABLET)&&(console.log=function(){},console.group=function(){},console.groupEnd=function(){},alert=function(){},Trace.isEnabled=!1),trace("version","1.6"),trace(BrowserDetect.BROWSER_NAME,"BrowserDetect.BROWSER_NAME"),trace(BrowserDetect.BROWSER_VERSION,"BrowserDetect.BROWSER_VERSION"),trace(BrowserDetect.TABLET,"BrowserDetect.TABLET"),trace(BrowserDetect.MOBILE,"BrowserDetect.MOBILE"),trace(BrowserDetect.OS,"BrowserDetect.OS"),BrowserDetect.BROWSER_VERSION<9&&"Explorer"===BrowserDetect.BROWSER_NAME&&alert("Please update your browser. HelloMonday.com is optimised for Internet Explorer 11."),document.body.style.margin=0,document.body.style.padding=0,document.body.style.color="#000",document.body.style.fontFamily="ClarendonLTStdBold",document.body.style.fontSize="11px",document.body.style.fontStyle="normal",Assets.DATA_STATIC=document.getElementById("STATIC"),Assets.SITE_BASE="/",Assets.CDN_URL_SMALL="/",Assets.CDN_URL_LARGE="/",Assets.SITE_VERSION=Assets.DATA_STATIC.querySelector("#version-string").getAttribute("data-version"),Assets.PAGE_TRANSTION_SPEED=(BrowserDetect.MOBILE||BrowserDetect.TABLET,1),BrowserDetect.DESKTOP||(document.body.className="disallow-text-select"),AssetLoader.init(Assets.CDN_URL_SMALL,Assets.SITE_VERSION),AssetLoader.loadGroup(new AssetGroup(["assets/images/frontpage/hellomonday-logo@2.png"],{onComplete:i}))},e.Main=t}(window),window.onload=Main.init;